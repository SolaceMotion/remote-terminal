const oi=function(){const v=document.createElement("link").relList;if(v&&v.supports&&v.supports("modulepreload"))return;for(const H of document.querySelectorAll('link[rel="modulepreload"]'))B(H);new MutationObserver(H=>{for(const n of H)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&B(g)}).observe(document,{childList:!0,subtree:!0});function C(H){const n={};return H.integrity&&(n.integrity=H.integrity),H.referrerpolicy&&(n.referrerPolicy=H.referrerpolicy),H.crossorigin==="use-credentials"?n.credentials="include":H.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function B(H){if(H.ep)return;H.ep=!0;const n=C(H);fetch(H.href,n)}};oi();var qr={exports:{}};(function(O,v){(function(C,B){O.exports=B()})(self,function(){return(()=>{var C={4567:function(H,n,g){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;var f=g(9042),h=g(6114),b=g(9924),p=g(3656),o=g(844),c=g(5596),u=g(9631),i=function(t){function e(r,s){var a=t.call(this)||this;a._terminal=r,a._renderService=s,a._liveRegionLineCount=0,a._charsToConsume=[],a._charsToAnnounce="",a._accessibilityTreeRoot=document.createElement("div"),a._accessibilityTreeRoot.classList.add("xterm-accessibility"),a._accessibilityTreeRoot.tabIndex=0,a._rowContainer=document.createElement("div"),a._rowContainer.setAttribute("role","list"),a._rowContainer.classList.add("xterm-accessibility-tree"),a._rowElements=[];for(var d=0;d<a._terminal.rows;d++)a._rowElements[d]=a._createAccessibilityTreeNode(),a._rowContainer.appendChild(a._rowElements[d]);if(a._topBoundaryFocusListener=function(y){return a._onBoundaryFocus(y,0)},a._bottomBoundaryFocusListener=function(y){return a._onBoundaryFocus(y,1)},a._rowElements[0].addEventListener("focus",a._topBoundaryFocusListener),a._rowElements[a._rowElements.length-1].addEventListener("focus",a._bottomBoundaryFocusListener),a._refreshRowsDimensions(),a._accessibilityTreeRoot.appendChild(a._rowContainer),a._renderRowsDebouncer=new b.TimeBasedDebouncer(a._renderRows.bind(a)),a._refreshRows(),a._liveRegion=document.createElement("div"),a._liveRegion.classList.add("live-region"),a._liveRegion.setAttribute("aria-live","assertive"),a._accessibilityTreeRoot.appendChild(a._liveRegion),!a._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return a._terminal.element.insertAdjacentElement("afterbegin",a._accessibilityTreeRoot),a.register(a._renderRowsDebouncer),a.register(a._terminal.onResize(function(y){return a._onResize(y.rows)})),a.register(a._terminal.onRender(function(y){return a._refreshRows(y.start,y.end)})),a.register(a._terminal.onScroll(function(){return a._refreshRows()})),a.register(a._terminal.onA11yChar(function(y){return a._onChar(y)})),a.register(a._terminal.onLineFeed(function(){return a._onChar(`
`)})),a.register(a._terminal.onA11yTab(function(y){return a._onTab(y)})),a.register(a._terminal.onKey(function(y){return a._onKey(y.key)})),a.register(a._terminal.onBlur(function(){return a._clearLiveRegion()})),a.register(a._renderService.onDimensionsChange(function(){return a._refreshRowsDimensions()})),a._screenDprMonitor=new c.ScreenDprMonitor,a.register(a._screenDprMonitor),a._screenDprMonitor.setListener(function(){return a._refreshRowsDimensions()}),a.register((0,p.addDisposableDomListener)(window,"resize",function(){return a._refreshRowsDimensions()})),a}return _(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),(0,u.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0},e.prototype._onBoundaryFocus=function(r,s){var a=r.target,d=this._rowElements[s===0?1:this._rowElements.length-2];if(a.getAttribute("aria-posinset")!==(s===0?"1":""+this._terminal.buffer.lines.length)&&r.relatedTarget===d){var y,L;if(s===0?(y=a,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(y=this._rowElements.shift(),L=a,this._rowContainer.removeChild(y)),y.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){var w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else w=this._createAccessibilityTreeNode(),this._rowElements.push(w),this._rowContainer.appendChild(w);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),r.preventDefault(),r.stopImmediatePropagation()}},e.prototype._onResize=function(r){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>r;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},e.prototype._createAccessibilityTreeNode=function(){var r=document.createElement("div");return r.setAttribute("role","listitem"),r.tabIndex=-1,this._refreshRowDimensions(r),r},e.prototype._onTab=function(r){for(var s=0;s<r;s++)this._onChar(" ")},e.prototype._onChar=function(r){var s=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==r&&(this._charsToAnnounce+=r):this._charsToAnnounce+=r,r===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),h.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(function(){s._accessibilityTreeRoot.appendChild(s._liveRegion)},0))},e.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,h.isMac&&(0,u.removeElementFromParent)(this._liveRegion)},e.prototype._onKey=function(r){this._clearLiveRegion(),this._charsToConsume.push(r)},e.prototype._refreshRows=function(r,s){this._renderRowsDebouncer.refresh(r,s,this._terminal.rows)},e.prototype._renderRows=function(r,s){for(var a=this._terminal.buffer,d=a.lines.length.toString(),y=r;y<=s;y++){var L=a.translateBufferLineToString(a.ydisp+y,!0),w=(a.ydisp+y+1).toString(),m=this._rowElements[y];m&&(L.length===0?m.innerText="\xA0":m.textContent=L,m.setAttribute("aria-posinset",w),m.setAttribute("aria-setsize",d))}this._announceCharacters()},e.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var r=0;r<this._terminal.rows;r++)this._refreshRowDimensions(this._rowElements[r])}},e.prototype._refreshRowDimensions=function(r){r.style.height=this._renderService.dimensions.actualCellHeight+"px"},e.prototype._announceCharacters=function(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},e}(o.Disposable);n.AccessibilityManager=i},3614:(H,n)=>{function g(h){return h.replace(/\r?\n/g,"\r")}function l(h,b){return b?"\x1B[200~"+h+"\x1B[201~":h}function _(h,b,p){h=l(h=g(h),p.decPrivateModes.bracketedPasteMode),p.triggerDataEvent(h,!0),b.value=""}function f(h,b,p){var o=p.getBoundingClientRect(),c=h.clientX-o.left-10,u=h.clientY-o.top-10;b.style.width="20px",b.style.height="20px",b.style.left=c+"px",b.style.top=u+"px",b.style.zIndex="1000",b.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=g,n.bracketTextForPaste=l,n.copyHandler=function(h,b){h.clipboardData&&h.clipboardData.setData("text/plain",b.selectionText),h.preventDefault()},n.handlePasteEvent=function(h,b,p){h.stopPropagation(),h.clipboardData&&_(h.clipboardData.getData("text/plain"),b,p)},n.paste=_,n.moveTextAreaUnderMouseCursor=f,n.rightClickHandler=function(h,b,p,o,c){f(h,b,p),c&&o.rightClickSelect(h),b.value=o.selectionText,b.select()}},4774:(H,n)=>{var g,l,_,f;function h(p){var o=p.toString(16);return o.length<2?"0"+o:o}function b(p,o){return p<o?(o+.05)/(p+.05):(p+.05)/(o+.05)}Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=void 0,function(p){p.toCss=function(o,c,u,i){return i!==void 0?"#"+h(o)+h(c)+h(u)+h(i):"#"+h(o)+h(c)+h(u)},p.toRgba=function(o,c,u,i){return i===void 0&&(i=255),(o<<24|c<<16|u<<8|i)>>>0}}(g=n.channels||(n.channels={})),(l=n.color||(n.color={})).blend=function(p,o){var c=(255&o.rgba)/255;if(c===1)return{css:o.css,rgba:o.rgba};var u=o.rgba>>24&255,i=o.rgba>>16&255,t=o.rgba>>8&255,e=p.rgba>>24&255,r=p.rgba>>16&255,s=p.rgba>>8&255,a=e+Math.round((u-e)*c),d=r+Math.round((i-r)*c),y=s+Math.round((t-s)*c);return{css:g.toCss(a,d,y),rgba:g.toRgba(a,d,y)}},l.isOpaque=function(p){return(255&p.rgba)==255},l.ensureContrastRatio=function(p,o,c){var u=f.ensureContrastRatio(p.rgba,o.rgba,c);if(u)return f.toColor(u>>24&255,u>>16&255,u>>8&255)},l.opaque=function(p){var o=(255|p.rgba)>>>0,c=f.toChannels(o),u=c[0],i=c[1],t=c[2];return{css:g.toCss(u,i,t),rgba:o}},l.opacity=function(p,o){var c=Math.round(255*o),u=f.toChannels(p.rgba),i=u[0],t=u[1],e=u[2];return{css:g.toCss(i,t,e,c),rgba:g.toRgba(i,t,e,c)}},l.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]},(n.css||(n.css={})).toColor=function(p){switch(p.length){case 7:return{css:p,rgba:(parseInt(p.slice(1),16)<<8|255)>>>0};case 9:return{css:p,rgba:parseInt(p.slice(1),16)>>>0}}throw new Error("css.toColor: Unsupported css format")},function(p){function o(c,u,i){var t=c/255,e=u/255,r=i/255;return .2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))}p.relativeLuminance=function(c){return o(c>>16&255,c>>8&255,255&c)},p.relativeLuminance2=o}(_=n.rgb||(n.rgb={})),function(p){function o(u,i,t){for(var e=u>>24&255,r=u>>16&255,s=u>>8&255,a=i>>24&255,d=i>>16&255,y=i>>8&255,L=b(_.relativeLuminance2(a,y,d),_.relativeLuminance2(e,r,s));L<t&&(a>0||d>0||y>0);)a-=Math.max(0,Math.ceil(.1*a)),d-=Math.max(0,Math.ceil(.1*d)),y-=Math.max(0,Math.ceil(.1*y)),L=b(_.relativeLuminance2(a,y,d),_.relativeLuminance2(e,r,s));return(a<<24|d<<16|y<<8|255)>>>0}function c(u,i,t){for(var e=u>>24&255,r=u>>16&255,s=u>>8&255,a=i>>24&255,d=i>>16&255,y=i>>8&255,L=b(_.relativeLuminance2(a,y,d),_.relativeLuminance2(e,r,s));L<t&&(a<255||d<255||y<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),d=Math.min(255,d+Math.ceil(.1*(255-d))),y=Math.min(255,y+Math.ceil(.1*(255-y))),L=b(_.relativeLuminance2(a,y,d),_.relativeLuminance2(e,r,s));return(a<<24|d<<16|y<<8|255)>>>0}p.ensureContrastRatio=function(u,i,t){var e=_.relativeLuminance(u>>8),r=_.relativeLuminance(i>>8);if(b(e,r)<t)return r<e?o(u,i,t):c(u,i,t)},p.reduceLuminance=o,p.increaseLuminance=c,p.toChannels=function(u){return[u>>24&255,u>>16&255,u>>8&255,255&u]},p.toColor=function(u,i,t){return{css:g.toCss(u,i,t),rgba:g.toRgba(u,i,t)}}}(f=n.rgba||(n.rgba={})),n.toPaddedHex=h,n.contrastRatio=b},7239:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;var g=function(){function l(){this._color={},this._rgba={}}return l.prototype.clear=function(){this._color={},this._rgba={}},l.prototype.setCss=function(_,f,h){this._rgba[_]||(this._rgba[_]={}),this._rgba[_][f]=h},l.prototype.getCss=function(_,f){return this._rgba[_]?this._rgba[_][f]:void 0},l.prototype.setColor=function(_,f,h){this._color[_]||(this._color[_]={}),this._color[_][f]=h},l.prototype.getColor=function(_,f){return this._color[_]?this._color[_][f]:void 0},l}();n.ColorContrastCache=g},5680:function(H,n,g){var l=this&&this.__spreadArray||function(i,t,e){if(e||arguments.length===2)for(var r,s=0,a=t.length;s<a;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return i.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(n,"__esModule",{value:!0}),n.ColorManager=n.DEFAULT_ANSI_COLORS=void 0;var _=g(4774),f=g(7239),h=_.css.toColor("#ffffff"),b=_.css.toColor("#000000"),p=_.css.toColor("#ffffff"),o=_.css.toColor("#000000"),c={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var i=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],t=[0,95,135,175,215,255],e=0;e<216;e++){var r=t[e/36%6|0],s=t[e/6%6|0],a=t[e%6];i.push({css:_.channels.toCss(r,s,a),rgba:_.channels.toRgba(r,s,a)})}for(e=0;e<24;e++){var d=8+10*e;i.push({css:_.channels.toCss(d,d,d),rgba:_.channels.toRgba(d,d,d)})}return i}());var u=function(){function i(t,e){this.allowTransparency=e;var r=t.createElement("canvas");r.width=1,r.height=1;var s=r.getContext("2d");if(!s)throw new Error("Could not get rendering context");this._ctx=s,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new f.ColorContrastCache,this.colors={foreground:h,background:b,cursor:p,cursorAccent:o,selectionTransparent:c,selectionOpaque:_.color.blend(b,c),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return i.prototype.onOptionsChange=function(t){t==="minimumContrastRatio"&&this._contrastCache.clear()},i.prototype.setTheme=function(t){t===void 0&&(t={}),this.colors.foreground=this._parseColor(t.foreground,h),this.colors.background=this._parseColor(t.background,b),this.colors.cursor=this._parseColor(t.cursor,p,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,o,!0),this.colors.selectionTransparent=this._parseColor(t.selection,c,!0),this.colors.selectionOpaque=_.color.blend(this.colors.background,this.colors.selectionTransparent),_.color.isOpaque(this.colors.selectionTransparent)&&(this.colors.selectionTransparent=_.color.opacity(this.colors.selectionTransparent,.3)),this.colors.ansi[0]=this._parseColor(t.black,n.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,n.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,n.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,n.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,n.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,n.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,n.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,n.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,n.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,n.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,n.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,n.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,n.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,n.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,n.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear(),this._updateRestoreColors()},i.prototype.restoreColor=function(t){if(t!==void 0)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},i.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:l([],this.colors.ansi,!0)}},i.prototype._parseColor=function(t,e,r){if(r===void 0&&(r=this.allowTransparency),t===void 0)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,typeof this._ctx.fillStyle!="string")return console.warn("Color: "+t+" is invalid using fallback "+e.css),e;this._ctx.fillRect(0,0,1,1);var s=this._ctx.getImageData(0,0,1,1).data;if(s[3]!==255){if(!r)return console.warn("Color: "+t+" is using transparency, but allowTransparency is false. Using fallback "+e.css+"."),e;var a=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map(function(S){return Number(S)}),d=a[0],y=a[1],L=a[2],w=a[3],m=Math.round(255*w);return{rgba:_.channels.toRgba(d,y,L,m),css:t}}return{css:this._ctx.fillStyle,rgba:_.channels.toRgba(s[0],s[1],s[2],s[3])}},i}();n.ColorManager=u},9631:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.removeElementFromParent=void 0,n.removeElementFromParent=function(){for(var g,l=[],_=0;_<arguments.length;_++)l[_]=arguments[_];for(var f=0,h=l;f<h.length;f++){var b=h[f];(g=b==null?void 0:b.parentElement)===null||g===void 0||g.removeChild(b)}}},3656:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(g,l,_,f){g.addEventListener(l,_,f);var h=!1;return{dispose:function(){h||(h=!0,g.removeEventListener(l,_,f))}}}},3551:function(H,n,g){var l=this&&this.__decorate||function(o,c,u,i){var t,e=arguments.length,r=e<3?c:i===null?i=Object.getOwnPropertyDescriptor(c,u):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(o,c,u,i);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(r=(e<3?t(r):e>3?t(c,u,r):t(c,u))||r);return e>3&&r&&Object.defineProperty(c,u,r),r},_=this&&this.__param||function(o,c){return function(u,i){c(u,i,o)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseZone=n.Linkifier=void 0;var f=g(8460),h=g(2585),b=function(){function o(c,u,i){this._bufferService=c,this._logService=u,this._unicodeService=i,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new f.EventEmitter,this._onHideLinkUnderline=new f.EventEmitter,this._onLinkTooltip=new f.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(o.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),o.prototype.attachToDom=function(c,u){this._element=c,this._mouseZoneManager=u},o.prototype.linkifyRows=function(c,u){var i=this;this._mouseZoneManager&&(this._rowsToLinkify.start===void 0||this._rowsToLinkify.end===void 0?(this._rowsToLinkify.start=c,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,c),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(c,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return i._linkifyRows()},o._timeBeforeLatency))},o.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var c=this._bufferService.buffer;if(this._rowsToLinkify.start!==void 0&&this._rowsToLinkify.end!==void 0){var u=c.ydisp+this._rowsToLinkify.start;if(!(u>=c.lines.length)){for(var i=c.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,t=Math.ceil(2e3/this._bufferService.cols),e=this._bufferService.buffer.iterator(!1,u,i,t,t);e.hasNext();)for(var r=e.next(),s=0;s<this._linkMatchers.length;s++)this._doLinkifyRow(r.range.first,r.content,this._linkMatchers[s]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},o.prototype.registerLinkMatcher=function(c,u,i){if(i===void 0&&(i={}),!u)throw new Error("handler must be defined");var t={id:this._nextLinkMatcherId++,regex:c,handler:u,matchIndex:i.matchIndex,validationCallback:i.validationCallback,hoverTooltipCallback:i.tooltipCallback,hoverLeaveCallback:i.leaveCallback,willLinkActivate:i.willLinkActivate,priority:i.priority||0};return this._addLinkMatcherToList(t),t.id},o.prototype._addLinkMatcherToList=function(c){if(this._linkMatchers.length!==0){for(var u=this._linkMatchers.length-1;u>=0;u--)if(c.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,c);this._linkMatchers.splice(0,0,c)}else this._linkMatchers.push(c)},o.prototype.deregisterLinkMatcher=function(c){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===c)return this._linkMatchers.splice(u,1),!0;return!1},o.prototype._doLinkifyRow=function(c,u,i){for(var t,e=this,r=new RegExp(i.regex.source,(i.regex.flags||"")+"g"),s=-1,a=function(){var y=t[typeof i.matchIndex!="number"?0:i.matchIndex];if(!y)return d._logService.debug("match found without corresponding matchIndex",t,i),"break";if(s=u.indexOf(y,s+1),r.lastIndex=s+y.length,s<0)return"break";var L=d._bufferService.buffer.stringIndexToBufferIndex(c,s);if(L[0]<0)return"break";var w=d._bufferService.buffer.lines.get(L[0]);if(!w)return"break";var m=w.getFg(L[1]),S=m?m>>9&511:void 0;i.validationCallback?i.validationCallback(y,function(x){e._rowsTimeoutId||x&&e._addLink(L[1],L[0]-e._bufferService.buffer.ydisp,y,i,S)}):d._addLink(L[1],L[0]-d._bufferService.buffer.ydisp,y,i,S)},d=this;(t=r.exec(u))!==null&&a()!=="break";);},o.prototype._addLink=function(c,u,i,t,e){var r=this;if(this._mouseZoneManager&&this._element){var s=this._unicodeService.getStringCellWidth(i),a=c%this._bufferService.cols,d=u+Math.floor(c/this._bufferService.cols),y=(a+s)%this._bufferService.cols,L=d+Math.floor((a+s)/this._bufferService.cols);y===0&&(y=this._bufferService.cols,L--),this._mouseZoneManager.add(new p(a+1,d+1,y+1,L+1,function(w){if(t.handler)return t.handler(w,i);var m=window.open();m?(m.opener=null,m.location.href=i):console.warn("Opening link blocked as opener could not be cleared")},function(){r._onShowLinkUnderline.fire(r._createLinkHoverEvent(a,d,y,L,e)),r._element.classList.add("xterm-cursor-pointer")},function(w){r._onLinkTooltip.fire(r._createLinkHoverEvent(a,d,y,L,e)),t.hoverTooltipCallback&&t.hoverTooltipCallback(w,i,{start:{x:a,y:d},end:{x:y,y:L}})},function(){r._onHideLinkUnderline.fire(r._createLinkHoverEvent(a,d,y,L,e)),r._element.classList.remove("xterm-cursor-pointer"),t.hoverLeaveCallback&&t.hoverLeaveCallback()},function(w){return!t.willLinkActivate||t.willLinkActivate(w,i)}))}},o.prototype._createLinkHoverEvent=function(c,u,i,t,e){return{x1:c,y1:u,x2:i,y2:t,cols:this._bufferService.cols,fg:e}},o._timeBeforeLatency=200,o=l([_(0,h.IBufferService),_(1,h.ILogService),_(2,h.IUnicodeService)],o)}();n.Linkifier=b;var p=function(o,c,u,i,t,e,r,s,a){this.x1=o,this.y1=c,this.x2=u,this.y2=i,this.clickCallback=t,this.hoverCallback=e,this.tooltipCallback=r,this.leaveCallback=s,this.willLinkActivate=a};n.MouseZone=p},6465:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;var b=g(2585),p=g(8460),o=g(844),c=g(3656),u=function(i){function t(e){var r=i.call(this)||this;return r._bufferService=e,r._linkProviders=[],r._linkCacheDisposables=[],r._isMouseOut=!0,r._activeLine=-1,r._onShowLinkUnderline=r.register(new p.EventEmitter),r._onHideLinkUnderline=r.register(new p.EventEmitter),r.register((0,o.getDisposeArrayDisposable)(r._linkCacheDisposables)),r}return _(t,i),Object.defineProperty(t.prototype,"currentLink",{get:function(){return this._currentLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(e){var r=this;return this._linkProviders.push(e),{dispose:function(){var s=r._linkProviders.indexOf(e);s!==-1&&r._linkProviders.splice(s,1)}}},t.prototype.attachToDom=function(e,r,s){var a=this;this._element=e,this._mouseService=r,this._renderService=s,this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",function(){a._isMouseOut=!0,a._clearCurrentLink()})),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._onMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(e){if(this._lastMouseEvent=e,this._element&&this._mouseService){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);if(r){this._isMouseOut=!1;for(var s=e.composedPath(),a=0;a<s.length;a++){var d=s[a];if(d.classList.contains("xterm"))break;if(d.classList.contains("xterm-hover"))return}this._lastBufferCell&&r.x===this._lastBufferCell.x&&r.y===this._lastBufferCell.y||(this._onHover(r),this._lastBufferCell=r)}}},t.prototype._onHover=function(e){if(this._activeLine!==e.y)return this._clearCurrentLink(),void this._askForLink(e,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))},t.prototype._askForLink=function(e,r){var s,a=this;this._activeProviderReplies&&r||((s=this._activeProviderReplies)===null||s===void 0||s.forEach(function(y){y==null||y.forEach(function(L){L.link.dispose&&L.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=e.y);var d=!1;this._linkProviders.forEach(function(y,L){var w;r?!((w=a._activeProviderReplies)===null||w===void 0)&&w.get(L)&&(d=a._checkLinkProviderResult(L,e,d)):y.provideLinks(e.y,function(m){var S,x;if(!a._isMouseOut){var k=m==null?void 0:m.map(function(F){return{link:F}});(S=a._activeProviderReplies)===null||S===void 0||S.set(L,k),d=a._checkLinkProviderResult(L,e,d),((x=a._activeProviderReplies)===null||x===void 0?void 0:x.size)===a._linkProviders.length&&a._removeIntersectingLinks(e.y,a._activeProviderReplies)}})})},t.prototype._removeIntersectingLinks=function(e,r){for(var s=new Set,a=0;a<r.size;a++){var d=r.get(a);if(d)for(var y=0;y<d.length;y++)for(var L=d[y],w=L.link.range.start.y<e?0:L.link.range.start.x,m=L.link.range.end.y>e?this._bufferService.cols:L.link.range.end.x,S=w;S<=m;S++){if(s.has(S)){d.splice(y--,1);break}s.add(S)}}},t.prototype._checkLinkProviderResult=function(e,r,s){var a,d=this;if(!this._activeProviderReplies)return s;for(var y=this._activeProviderReplies.get(e),L=!1,w=0;w<e;w++)this._activeProviderReplies.has(w)&&!this._activeProviderReplies.get(w)||(L=!0);if(!L&&y){var m=y.find(function(x){return d._linkAtPosition(x.link,r)});m&&(s=!0,this._handleNewLink(m))}if(this._activeProviderReplies.size===this._linkProviders.length&&!s)for(w=0;w<this._activeProviderReplies.size;w++){var S=(a=this._activeProviderReplies.get(w))===null||a===void 0?void 0:a.find(function(x){return d._linkAtPosition(x.link,r)});if(S){s=!0,this._handleNewLink(S);break}}return s},t.prototype._onClick=function(e){if(this._element&&this._mouseService&&this._currentLink){var r=this._positionFromMouseEvent(e,this._element,this._mouseService);r&&this._linkAtPosition(this._currentLink.link,r)&&this._currentLink.link.activate(e,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(e,r){this._element&&this._currentLink&&this._lastMouseEvent&&(!e||!r||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=r)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,o.disposeArray)(this._linkCacheDisposables))},t.prototype._handleNewLink=function(e){var r=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(e.link,s)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:e.link.decorations===void 0||e.link.decorations.underline,pointerCursor:e.link.decorations===void 0||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:function(){var a,d;return(d=(a=r._currentLink)===null||a===void 0?void 0:a.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:function(a){var d,y;((d=r._currentLink)===null||d===void 0?void 0:d.state)&&r._currentLink.state.decorations.pointerCursor!==a&&(r._currentLink.state.decorations.pointerCursor=a,r._currentLink.state.isHovered&&((y=r._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:function(){var a,d;return(d=(a=r._currentLink)===null||a===void 0?void 0:a.state)===null||d===void 0?void 0:d.decorations.underline},set:function(a){var d,y,L;((d=r._currentLink)===null||d===void 0?void 0:d.state)&&((L=(y=r._currentLink)===null||y===void 0?void 0:y.state)===null||L===void 0?void 0:L.decorations.underline)!==a&&(r._currentLink.state.decorations.underline=a,r._currentLink.state.isHovered&&r._fireUnderlineEvent(e.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange(function(a){var d=a.start===0?0:a.start+1+r._bufferService.buffer.ydisp;r._clearCurrentLink(d,a.end+1+r._bufferService.buffer.ydisp)})))}},t.prototype._linkHover=function(e,r,s){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),r.hover&&r.hover(s,r.text)},t.prototype._fireUnderlineEvent=function(e,r){var s=e.range,a=this._bufferService.buffer.ydisp,d=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-a-1,s.end.x,s.end.y-a-1,void 0);(r?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(d)},t.prototype._linkLeave=function(e,r,s){var a;!((a=this._currentLink)===null||a===void 0)&&a.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(r,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),r.leave&&r.leave(s,r.text)},t.prototype._linkAtPosition=function(e,r){var s=e.range.start.y===e.range.end.y,a=e.range.start.y<r.y,d=e.range.end.y>r.y;return(s&&e.range.start.x<=r.x&&e.range.end.x>=r.x||a&&e.range.end.x>=r.x||d&&e.range.start.x<=r.x||a&&d)&&e.range.start.y<=r.y&&e.range.end.y>=r.y},t.prototype._positionFromMouseEvent=function(e,r,s){var a=s.getCoords(e,r,this._bufferService.cols,this._bufferService.rows);if(a)return{x:a[0],y:a[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(e,r,s,a,d){return{x1:e,y1:r,x2:s,y2:a,cols:this._bufferService.cols,fg:d}},f([h(0,b.IBufferService)],t)}(o.Disposable);n.Linkifier2=u},9042:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},6954:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseZoneManager=void 0;var b=g(844),p=g(3656),o=g(4725),c=g(2585),u=function(i){function t(e,r,s,a,d,y){var L=i.call(this)||this;return L._element=e,L._screenElement=r,L._bufferService=s,L._mouseService=a,L._selectionService=d,L._optionsService=y,L._zones=[],L._areZonesActive=!1,L._lastHoverCoords=[void 0,void 0],L._initialSelectionLength=0,L.register((0,p.addDisposableDomListener)(L._element,"mousedown",function(w){return L._onMouseDown(w)})),L._mouseMoveListener=function(w){return L._onMouseMove(w)},L._mouseLeaveListener=function(w){return L._onMouseLeave(w)},L._clickListener=function(w){return L._onClick(w)},L}return _(t,i),t.prototype.dispose=function(){i.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(e){this._zones.push(e),this._zones.length===1&&this._activate()},t.prototype.clearAll=function(e,r){if(this._zones.length!==0){e&&r||(e=0,r=this._bufferService.rows-1);for(var s=0;s<this._zones.length;s++){var a=this._zones[s];(a.y1>e&&a.y1<=r+1||a.y2>e&&a.y2<=r+1||a.y1<e&&a.y2>r+1)&&(this._currentZone&&this._currentZone===a&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(s--,1))}this._zones.length===0&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(e){this._lastHoverCoords[0]===e.pageX&&this._lastHoverCoords[1]===e.pageY||(this._onHover(e),this._lastHoverCoords=[e.pageX,e.pageY])},t.prototype._onHover=function(e){var r=this,s=this._findZoneEventAt(e);s!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),s&&(this._currentZone=s,s.hoverCallback&&s.hoverCallback(e),this._tooltipTimeout=window.setTimeout(function(){return r._onTooltip(e)},this._optionsService.rawOptions.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(e){this._tooltipTimeout=void 0;var r=this._findZoneEventAt(e);r==null||r.tooltipCallback(e)},t.prototype._onMouseDown=function(e){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var r=this._findZoneEventAt(e);r!=null&&r.willLinkActivate(e)&&(e.preventDefault(),e.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(e){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(e){var r=this._findZoneEventAt(e),s=this._getSelectionLength();r&&s===this._initialSelectionLength&&(r.clickCallback(e),e.preventDefault(),e.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var e=this._selectionService.selectionText;return e?e.length:0},t.prototype._findZoneEventAt=function(e){var r=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(r)for(var s=r[0],a=r[1],d=0;d<this._zones.length;d++){var y=this._zones[d];if(y.y1===y.y2){if(a===y.y1&&s>=y.x1&&s<y.x2)return y}else if(a===y.y1&&s>=y.x1||a===y.y2&&s<y.x2||a>y.y1&&a<y.y2)return y}},f([h(2,c.IBufferService),h(3,o.IMouseService),h(4,o.ISelectionService),h(5,c.IOptionsService)],t)}(b.Disposable);n.MouseZoneManager=u},6193:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0;var g=function(){function l(_){this._renderCallback=_}return l.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},l.prototype.refresh=function(_,f,h){var b=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return b._innerRefresh()}))},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(_,f)}},l}();n.RenderDebouncer=g},5596:function(H,n,g){var l,_=this&&this.__extends||(l=function(h,b){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,o){p.__proto__=o}||function(p,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(p[c]=o[c])},l(h,b)},function(h,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function p(){this.constructor=h}l(h,b),h.prototype=b===null?Object.create(b):(p.prototype=b.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;var f=function(h){function b(){var p=h!==null&&h.apply(this,arguments)||this;return p._currentDevicePixelRatio=window.devicePixelRatio,p}return _(b,h),b.prototype.setListener=function(p){var o=this;this._listener&&this.clearListener(),this._listener=p,this._outerListener=function(){o._listener&&(o._listener(window.devicePixelRatio,o._currentDevicePixelRatio),o._updateDpr())},this._updateDpr()},b.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},b.prototype._updateDpr=function(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},b.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},b}(g(844).Disposable);n.ScreenDprMonitor=f},3236:function(H,n,g){var l,_=this&&this.__extends||(l=function(R,U){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var T in P)Object.prototype.hasOwnProperty.call(P,T)&&(D[T]=P[T])},l(R,U)},function(R,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function D(){this.constructor=R}l(R,U),R.prototype=U===null?Object.create(U):(D.prototype=U.prototype,new D)});Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;var f=g(2950),h=g(1680),b=g(3614),p=g(2584),o=g(5435),c=g(3525),u=g(3551),i=g(9312),t=g(6114),e=g(3656),r=g(9042),s=g(357),a=g(6954),d=g(4567),y=g(1296),L=g(7399),w=g(8460),m=g(8437),S=g(5680),x=g(3230),k=g(4725),F=g(428),M=g(8934),E=g(6465),A=g(5114),I=g(8969),j=g(4774),N=g(4269),z=g(5941),J=g(7641),Y=typeof window!="undefined"?window.document:null,$=function(R){function U(D){D===void 0&&(D={});var P=R.call(this,D)||this;return P.browser=t,P._keyDownHandled=!1,P._keyPressHandled=!1,P._unprocessedDeadKey=!1,P._onCursorMove=new w.EventEmitter,P._onKey=new w.EventEmitter,P._onRender=new w.EventEmitter,P._onSelectionChange=new w.EventEmitter,P._onTitleChange=new w.EventEmitter,P._onBell=new w.EventEmitter,P._onFocus=new w.EventEmitter,P._onBlur=new w.EventEmitter,P._onA11yCharEmitter=new w.EventEmitter,P._onA11yTabEmitter=new w.EventEmitter,P._setup(),P.linkifier=P._instantiationService.createInstance(u.Linkifier),P.linkifier2=P.register(P._instantiationService.createInstance(E.Linkifier2)),P.decorationService=P.register(P._instantiationService.createInstance(J.DecorationService)),P.register(P._inputHandler.onRequestBell(function(){return P.bell()})),P.register(P._inputHandler.onRequestRefreshRows(function(T,V){return P.refresh(T,V)})),P.register(P._inputHandler.onRequestSendFocus(function(){return P._reportFocus()})),P.register(P._inputHandler.onRequestReset(function(){return P.reset()})),P.register(P._inputHandler.onRequestWindowsOptionsReport(function(T){return P._reportWindowsOptions(T)})),P.register(P._inputHandler.onColor(function(T){return P._handleColorEvent(T)})),P.register((0,w.forwardEvent)(P._inputHandler.onCursorMove,P._onCursorMove)),P.register((0,w.forwardEvent)(P._inputHandler.onTitleChange,P._onTitleChange)),P.register((0,w.forwardEvent)(P._inputHandler.onA11yChar,P._onA11yCharEmitter)),P.register((0,w.forwardEvent)(P._inputHandler.onA11yTab,P._onA11yTabEmitter)),P.register(P._bufferService.onResize(function(T){return P._afterResize(T.cols,T.rows)})),P}return _(U,R),Object.defineProperty(U.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onBell",{get:function(){return this._onBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),U.prototype._handleColorEvent=function(D){var P,T;if(this._colorManager){for(var V=0,G=D;V<G.length;V++){var X=G[V],Q=void 0,ee="";switch(X.index){case 256:Q="foreground",ee="10";break;case 257:Q="background",ee="11";break;case 258:Q="cursor",ee="12";break;default:Q="ansi",ee="4;"+X.index}if(Q)switch(X.type){case 0:var le=j.color.toColorRGB(Q==="ansi"?this._colorManager.colors.ansi[X.index]:this._colorManager.colors[Q]);this.coreService.triggerDataEvent(p.C0.ESC+"]"+ee+";"+(0,z.toRgbString)(le)+p.C0.BEL);break;case 1:Q==="ansi"?this._colorManager.colors.ansi[X.index]=j.rgba.toColor.apply(j.rgba,X.color):this._colorManager.colors[Q]=j.rgba.toColor.apply(j.rgba,X.color);break;case 2:this._colorManager.restoreColor(X.index)}}(P=this._renderService)===null||P===void 0||P.setColors(this._colorManager.colors),(T=this.viewport)===null||T===void 0||T.onThemeChange(this._colorManager.colors)}},U.prototype.dispose=function(){var D,P,T;this._isDisposed||(R.prototype.dispose.call(this),(D=this._renderService)===null||D===void 0||D.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},(T=(P=this.element)===null||P===void 0?void 0:P.parentNode)===null||T===void 0||T.removeChild(this.element))},U.prototype._setup=function(){R.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(U.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),U.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},U.prototype._updateOptions=function(D){var P,T,V,G;switch(R.prototype._updateOptions.call(this,D),D){case"fontFamily":case"fontSize":(P=this._renderService)===null||P===void 0||P.clear(),(T=this._charSizeService)===null||T===void 0||T.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"customGlyphs":case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":(V=this.viewport)===null||V===void 0||V.syncScrollArea();break;case"screenReaderMode":this.optionsService.rawOptions.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)):((G=this._accessibilityManager)===null||G===void 0||G.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.rawOptions.theme)}},U.prototype._onTextAreaFocus=function(D){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[I"),this.updateCursorStyle(D),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},U.prototype.blur=function(){var D;return(D=this.textarea)===null||D===void 0?void 0:D.blur()},U.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(p.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},U.prototype._syncTextArea=function(){if(this.textarea&&this.buffer.isCursorInViewport&&!this._compositionHelper.isComposing&&this._renderService){var D=this.buffer.ybase+this.buffer.y,P=this.buffer.lines.get(D);if(P){var T=Math.min(this.buffer.x,this.cols-1),V=this._renderService.dimensions.actualCellHeight,G=P.getWidth(T),X=this._renderService.dimensions.actualCellWidth*G,Q=this.buffer.y*this._renderService.dimensions.actualCellHeight,ee=T*this._renderService.dimensions.actualCellWidth;this.textarea.style.left=ee+"px",this.textarea.style.top=Q+"px",this.textarea.style.width=X+"px",this.textarea.style.height=V+"px",this.textarea.style.lineHeight=V+"px",this.textarea.style.zIndex="-5"}}},U.prototype._initGlobal=function(){var D=this;this._bindKeys(),this.register((0,e.addDisposableDomListener)(this.element,"copy",function(T){D.hasSelection()&&(0,b.copyHandler)(T,D._selectionService)}));var P=function(T){return(0,b.handlePasteEvent)(T,D.textarea,D.coreService)};this.register((0,e.addDisposableDomListener)(this.textarea,"paste",P)),this.register((0,e.addDisposableDomListener)(this.element,"paste",P)),t.isFirefox?this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(T){T.button===2&&(0,b.rightClickHandler)(T,D.textarea,D.screenElement,D._selectionService,D.options.rightClickSelectsWord)})):this.register((0,e.addDisposableDomListener)(this.element,"contextmenu",function(T){(0,b.rightClickHandler)(T,D.textarea,D.screenElement,D._selectionService,D.options.rightClickSelectsWord)})),t.isLinux&&this.register((0,e.addDisposableDomListener)(this.element,"auxclick",function(T){T.button===1&&(0,b.moveTextAreaUnderMouseCursor)(T,D.textarea,D.screenElement)}))},U.prototype._bindKeys=function(){var D=this;this.register((0,e.addDisposableDomListener)(this.textarea,"keyup",function(P){return D._keyUp(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keydown",function(P){return D._keyDown(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"keypress",function(P){return D._keyPress(P)},!0)),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionstart",function(){return D._compositionHelper.compositionstart()})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionupdate",function(P){return D._compositionHelper.compositionupdate(P)})),this.register((0,e.addDisposableDomListener)(this.textarea,"compositionend",function(){return D._compositionHelper.compositionend()})),this.register((0,e.addDisposableDomListener)(this.textarea,"input",function(P){return D._inputEvent(P)},!0)),this.register(this.onRender(function(){return D._compositionHelper.updateCompositionElements()})),this.register(this.onRender(function(P){return D._queueLinkification(P.start,P.end)}))},U.prototype.open=function(D){var P=this;if(!D)throw new Error("Terminal requires a parent element.");D.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=D.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),D.appendChild(this.element);var T=Y.createDocumentFragment();this._viewportElement=Y.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=Y.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=Y.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=Y.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=Y.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",r.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register((0,e.addDisposableDomListener)(this.textarea,"focus",function(X){return P._onTextAreaFocus(X)})),this.register((0,e.addDisposableDomListener)(this.textarea,"blur",function(){return P._onTextAreaBlur()})),this._helperContainer.appendChild(this.textarea);var V=this._instantiationService.createInstance(A.CoreBrowserService,this.textarea);this._instantiationService.setService(k.ICoreBrowserService,V),this._charSizeService=this._instantiationService.createInstance(F.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._theme=this.options.theme||this._theme,this._colorManager=new S.ColorManager(Y,this.options.allowTransparency),this.register(this.optionsService.onOptionChange(function(X){return P._colorManager.onOptionsChange(X)})),this._colorManager.setTheme(this._theme),this._characterJoinerService=this._instantiationService.createInstance(N.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService);var G=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,G,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange(function(X){return P._onRender.fire(X)})),this.onResize(function(X){return P._renderService.resize(X.cols,X.rows)}),this._compositionView=Y.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(f.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(T),this._soundService=this._instantiationService.createInstance(s.SoundService),this._instantiationService.setService(k.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(M.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(h.Viewport,function(X){return P.scrollLines(X,!0,1)},this._viewportElement,this._viewportScrollArea,this.element),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar(function(){return P.viewport.syncScrollArea()})),this.register(this.viewport),this.register(this.onCursorMove(function(){P._renderService.onCursorMove(),P._syncTextArea()})),this.register(this.onResize(function(){return P._renderService.onResize(P.cols,P.rows)})),this.register(this.onBlur(function(){return P._renderService.onBlur()})),this.register(this.onFocus(function(){return P._renderService.onFocus()})),this.register(this._renderService.onDimensionsChange(function(){return P.viewport.syncScrollArea()})),this._selectionService=this.register(this._instantiationService.createInstance(i.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(function(X){return P.scrollLines(X.amount,X.suppressScrollEvent)})),this.register(this._selectionService.onSelectionChange(function(){return P._onSelectionChange.fire()})),this.register(this._selectionService.onRequestRedraw(function(X){return P._renderService.onSelectionChanged(X.start,X.end,X.columnSelectMode)})),this.register(this._selectionService.onLinuxMouseSelection(function(X){P.textarea.value=X,P.textarea.focus(),P.textarea.select()})),this.register(this._onScroll.event(function(X){P.viewport.syncScrollArea(),P._selectionService.refresh()})),this.register((0,e.addDisposableDomListener)(this._viewportElement,"scroll",function(){return P._selectionService.refresh()})),this._mouseZoneManager=this._instantiationService.createInstance(a.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll(function(){return P._mouseZoneManager.clearAll()})),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.decorationService.attachToDom(this.screenElement,this._renderService,this._bufferService),this.register((0,e.addDisposableDomListener)(this.element,"mousedown",function(X){return P._selectionService.onMouseDown(X)})),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},U.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(c.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(y.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},U.prototype._setTheme=function(D){var P,T,V;this._theme=D,(P=this._colorManager)===null||P===void 0||P.setTheme(D),(T=this._renderService)===null||T===void 0||T.setColors(this._colorManager.colors),(V=this.viewport)===null||V===void 0||V.onThemeChange(this._colorManager.colors)},U.prototype.bindMouse=function(){var D=this,P=this,T=this.element;function V(K){var ne,ae,fe=P._mouseService.getRawByteCoords(K,P.screenElement,P.cols,P.rows);if(!fe)return!1;switch(K.overrideType||K.type){case"mousemove":ae=32,K.buttons===void 0?(ne=3,K.button!==void 0&&(ne=K.button<3?K.button:3)):ne=1&K.buttons?0:4&K.buttons?1:2&K.buttons?2:3;break;case"mouseup":ae=0,ne=K.button<3?K.button:3;break;case"mousedown":ae=1,ne=K.button<3?K.button:3;break;case"wheel":K.deltaY!==0&&(ae=K.deltaY<0?0:1),ne=4;break;default:return!1}return!(ae===void 0||ne===void 0||ne>4)&&P.coreMouseService.triggerMouseEvent({col:fe.x-33,row:fe.y-33,button:ne,action:ae,ctrl:K.ctrlKey,alt:K.altKey,shift:K.shiftKey})}var G={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X=function(K){return V(K),K.buttons||(D._document.removeEventListener("mouseup",G.mouseup),G.mousedrag&&D._document.removeEventListener("mousemove",G.mousedrag)),D.cancel(K)},Q=function(K){return V(K),D.cancel(K,!0)},ee=function(K){K.buttons&&V(K)},le=function(K){K.buttons||V(K)};this.register(this.coreMouseService.onProtocolChange(function(K){K?(D.optionsService.rawOptions.logLevel==="debug"&&D._logService.debug("Binding to mouse events:",D.coreMouseService.explainEvents(K)),D.element.classList.add("enable-mouse-events"),D._selectionService.disable()):(D._logService.debug("Unbinding from mouse events."),D.element.classList.remove("enable-mouse-events"),D._selectionService.enable()),8&K?G.mousemove||(T.addEventListener("mousemove",le),G.mousemove=le):(T.removeEventListener("mousemove",G.mousemove),G.mousemove=null),16&K?G.wheel||(T.addEventListener("wheel",Q,{passive:!1}),G.wheel=Q):(T.removeEventListener("wheel",G.wheel),G.wheel=null),2&K?G.mouseup||(G.mouseup=X):(D._document.removeEventListener("mouseup",G.mouseup),G.mouseup=null),4&K?G.mousedrag||(G.mousedrag=ee):(D._document.removeEventListener("mousemove",G.mousedrag),G.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,e.addDisposableDomListener)(T,"mousedown",function(K){if(K.preventDefault(),D.focus(),D.coreMouseService.areMouseEventsActive&&!D._selectionService.shouldForceSelection(K))return V(K),G.mouseup&&D._document.addEventListener("mouseup",G.mouseup),G.mousedrag&&D._document.addEventListener("mousemove",G.mousedrag),D.cancel(K)})),this.register((0,e.addDisposableDomListener)(T,"wheel",function(K){if(!G.wheel){if(!D.buffer.hasScrollback){var ne=D.viewport.getLinesScrolled(K);if(ne===0)return;for(var ae=p.C0.ESC+(D.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(K.deltaY<0?"A":"B"),fe="",Ae=0;Ae<Math.abs(ne);Ae++)fe+=ae;return D.coreService.triggerDataEvent(fe,!0),D.cancel(K,!0)}return D.viewport.onWheel(K)?D.cancel(K):void 0}},{passive:!1})),this.register((0,e.addDisposableDomListener)(T,"touchstart",function(K){if(!D.coreMouseService.areMouseEventsActive)return D.viewport.onTouchStart(K),D.cancel(K)},{passive:!0})),this.register((0,e.addDisposableDomListener)(T,"touchmove",function(K){if(!D.coreMouseService.areMouseEventsActive)return D.viewport.onTouchMove(K)?void 0:D.cancel(K)},{passive:!1}))},U.prototype.refresh=function(D,P){var T;(T=this._renderService)===null||T===void 0||T.refreshRows(D,P)},U.prototype._queueLinkification=function(D,P){var T;(T=this.linkifier)===null||T===void 0||T.linkifyRows(D,P)},U.prototype.updateCursorStyle=function(D){var P;!((P=this._selectionService)===null||P===void 0)&&P.shouldColumnSelect(D)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},U.prototype._showCursor=function(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},U.prototype.scrollLines=function(D,P,T){T===void 0&&(T=0),R.prototype.scrollLines.call(this,D,P,T),this.refresh(0,this.rows-1)},U.prototype.paste=function(D){(0,b.paste)(D,this.textarea,this.coreService)},U.prototype.attachCustomKeyEventHandler=function(D){this._customKeyEventHandler=D},U.prototype.registerLinkMatcher=function(D,P,T){var V=this.linkifier.registerLinkMatcher(D,P,T);return this.refresh(0,this.rows-1),V},U.prototype.deregisterLinkMatcher=function(D){this.linkifier.deregisterLinkMatcher(D)&&this.refresh(0,this.rows-1)},U.prototype.registerLinkProvider=function(D){return this.linkifier2.registerLinkProvider(D)},U.prototype.registerCharacterJoiner=function(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");var P=this._characterJoinerService.register(D);return this.refresh(0,this.rows-1),P},U.prototype.deregisterCharacterJoiner=function(D){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(D)&&this.refresh(0,this.rows-1)},Object.defineProperty(U.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),U.prototype.addMarker=function(D){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+D)},U.prototype.registerDecoration=function(D){return this.decorationService.registerDecoration(D)},U.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},U.prototype.select=function(D,P,T){this._selectionService.setSelection(D,P,T)},U.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},U.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},U.prototype.clearSelection=function(){var D;(D=this._selectionService)===null||D===void 0||D.clearSelection()},U.prototype.selectAll=function(){var D;(D=this._selectionService)===null||D===void 0||D.selectAll()},U.prototype.selectLines=function(D,P){var T;(T=this._selectionService)===null||T===void 0||T.selectLines(D,P)},U.prototype._keyDown=function(D){if(this._keyDownHandled=!1,this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(!this._compositionHelper.keydown(D))return this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;D.key!=="Dead"&&D.key!=="AltGraph"||(this._unprocessedDeadKey=!0);var P=(0,L.evaluateKeyboardEvent)(D,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(D),P.type===3||P.type===2){var T=this.rows-1;return this.scrollLines(P.type===2?-T:T),this.cancel(D,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,D)||(P.cancel&&this.cancel(D,!0),!P.key||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==p.C0.ETX&&P.key!==p.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),this.optionsService.rawOptions.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(D,!0))))},U.prototype._isThirdLevelShift=function(D,P){var T=D.isMac&&!this.options.macOptionIsMeta&&P.altKey&&!P.ctrlKey&&!P.metaKey||D.isWindows&&P.altKey&&P.ctrlKey&&!P.metaKey||D.isWindows&&P.getModifierState("AltGraph");return P.type==="keypress"?T:T&&(!P.keyCode||P.keyCode>47)},U.prototype._keyUp=function(D){this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1||(function(P){return P.keyCode===16||P.keyCode===17||P.keyCode===18}(D)||this.focus(),this.updateCursorStyle(D),this._keyPressHandled=!1)},U.prototype._keyPress=function(D){var P;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(D)===!1)return!1;if(this.cancel(D),D.charCode)P=D.charCode;else if(D.which===null||D.which===void 0)P=D.keyCode;else{if(D.which===0||D.charCode===0)return!1;P=D.which}return!(!P||(D.altKey||D.ctrlKey||D.metaKey)&&!this._isThirdLevelShift(this.browser,D)||(P=String.fromCharCode(P),this._onKey.fire({key:P,domEvent:D}),this._showCursor(),this.coreService.triggerDataEvent(P,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))},U.prototype._inputEvent=function(D){if(D.data&&D.inputType==="insertText"&&!D.composed&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;var P=D.data;return this.coreService.triggerDataEvent(P,!0),this.cancel(D),!0}return!1},U.prototype.bell=function(){var D;this._soundBell()&&((D=this._soundService)===null||D===void 0||D.playBellSound()),this._onBell.fire()},U.prototype.resize=function(D,P){D!==this.cols||P!==this.rows?R.prototype.resize.call(this,D,P):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},U.prototype._afterResize=function(D,P){var T,V;(T=this._charSizeService)===null||T===void 0||T.measure(),(V=this.viewport)===null||V===void 0||V.syncScrollArea(!0)},U.prototype.clear=function(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var D=1;D<this.rows;D++)this.buffer.lines.push(this.buffer.getBlankLine(m.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}},U.prototype.reset=function(){var D,P;this.options.rows=this.rows,this.options.cols=this.cols;var T=this._customKeyEventHandler;this._setup(),R.prototype.reset.call(this),(D=this._selectionService)===null||D===void 0||D.reset(),this._customKeyEventHandler=T,this.refresh(0,this.rows-1),(P=this.viewport)===null||P===void 0||P.syncScrollArea()},U.prototype.clearTextureAtlas=function(){var D;(D=this._renderService)===null||D===void 0||D.clearTextureAtlas()},U.prototype._reportFocus=function(){var D;!((D=this.element)===null||D===void 0)&&D.classList.contains("focus")?this.coreService.triggerDataEvent(p.C0.ESC+"[I"):this.coreService.triggerDataEvent(p.C0.ESC+"[O")},U.prototype._reportWindowsOptions=function(D){if(this._renderService)switch(D){case o.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var P=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),T=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[4;"+T+";"+P+"t");break;case o.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var V=this._renderService.dimensions.scaledCellWidth.toFixed(0),G=this._renderService.dimensions.scaledCellHeight.toFixed(0);this.coreService.triggerDataEvent(p.C0.ESC+"[6;"+G+";"+V+"t")}},U.prototype.cancel=function(D,P){if(this.options.cancelEvents||P)return D.preventDefault(),D.stopPropagation(),!1},U.prototype._visualBell=function(){return!1},U.prototype._soundBell=function(){return this.options.bellStyle==="sound"},U}(I.CoreTerminal);n.Terminal=$},9924:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0;var g=function(){function l(_,f){f===void 0&&(f=1e3),this._renderCallback=_,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}return l.prototype.dispose=function(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)},l.prototype.refresh=function(_,f,h){var b=this;this._rowCount=h,_=_!==void 0?_:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,_):_,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;var p=Date.now();if(p-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=p,this._innerRefresh();else if(!this._additionalRefreshRequested){var o=p-this._lastRefreshMs,c=this._debounceThresholdMS-o;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(function(){b._lastRefreshMs=Date.now(),b._innerRefresh(),b._additionalRefreshRequested=!1,b._refreshTimeoutID=void 0},c)}},l.prototype._innerRefresh=function(){if(this._rowStart!==void 0&&this._rowEnd!==void 0&&this._rowCount!==void 0){var _=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(_,f)}},l}();n.TimeBasedDebouncer=g},1680:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;var b=g(844),p=g(3656),o=g(4725),c=g(2585),u=function(i){function t(e,r,s,a,d,y,L,w){var m=i.call(this)||this;return m._scrollLines=e,m._viewportElement=r,m._scrollArea=s,m._element=a,m._bufferService=d,m._optionsService=y,m._charSizeService=L,m._renderService=w,m.scrollBarWidth=0,m._currentRowHeight=0,m._currentScaledCellHeight=0,m._lastRecordedBufferLength=0,m._lastRecordedViewportHeight=0,m._lastRecordedBufferHeight=0,m._lastTouchY=0,m._lastScrollTop=0,m._lastHadScrollBar=!1,m._wheelPartialScroll=0,m._refreshAnimationFrame=null,m._ignoreNextScrollEvent=!1,m.scrollBarWidth=m._viewportElement.offsetWidth-m._scrollArea.offsetWidth||15,m._lastHadScrollBar=!0,m.register((0,p.addDisposableDomListener)(m._viewportElement,"scroll",m._onScroll.bind(m))),m._activeBuffer=m._bufferService.buffer,m.register(m._bufferService.buffers.onBufferActivate(function(S){return m._activeBuffer=S.activeBuffer})),m._renderDimensions=m._renderService.dimensions,m.register(m._renderService.onDimensionsChange(function(S){return m._renderDimensions=S})),setTimeout(function(){return m.syncScrollArea()},0),m}return _(t,i),t.prototype.onThemeChange=function(e){this._viewportElement.style.backgroundColor=e.background.css},t.prototype._refresh=function(e){var r=this;if(e)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return r._innerRefresh()}))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._currentScaledCellHeight=this._renderService.dimensions.scaledCellHeight,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._optionsService.rawOptions.scrollback===0?this.scrollBarWidth=0:this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this._lastHadScrollBar=this.scrollBarWidth>0;var s=window.getComputedStyle(this._element),a=parseInt(s.paddingLeft)+parseInt(s.paddingRight);this._viewportElement.style.width=(this._renderService.dimensions.actualCellWidth*this._bufferService.cols+this.scrollBarWidth+(this._lastHadScrollBar?a:0)).toString()+"px",this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(e){if(e===void 0&&(e=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.scaledCellHeight===this._currentScaledCellHeight?this._lastHadScrollBar!==this._optionsService.rawOptions.scrollback>0&&this._refresh(e):this._refresh(e)},t.prototype._onScroll=function(e){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent){if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);var r=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(r)}},t.prototype._bubbleScroll=function(e,r){var s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(r<0&&this._viewportElement.scrollTop!==0||r>0&&s<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)},t.prototype.onWheel=function(e){var r=this._getPixelsScrolled(e);return r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},t.prototype._getPixelsScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?r*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._currentRowHeight*this._bufferService.rows),r},t.prototype.getLinesScrolled=function(e){if(e.deltaY===0||e.shiftKey)return 0;var r=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(r/=this._currentRowHeight+0,this._wheelPartialScroll+=r,r=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(r*=this._bufferService.rows),r},t.prototype._applyScrollModifier=function(e,r){var s=this._optionsService.rawOptions.fastScrollModifier;return s==="alt"&&r.altKey||s==="ctrl"&&r.ctrlKey||s==="shift"&&r.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity},t.prototype.onTouchStart=function(e){this._lastTouchY=e.touches[0].pageY},t.prototype.onTouchMove=function(e){var r=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,r!==0&&(this._viewportElement.scrollTop+=r,this._bubbleScroll(e,r))},f([h(4,c.IBufferService),h(5,c.IOptionsService),h(6,o.ICharSizeService),h(7,o.IRenderService)],t)}(b.Disposable);n.Viewport=u},2950:function(H,n,g){var l=this&&this.__decorate||function(p,o,c,u){var i,t=arguments.length,e=t<3?o:u===null?u=Object.getOwnPropertyDescriptor(o,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(p,o,c,u);else for(var r=p.length-1;r>=0;r--)(i=p[r])&&(e=(t<3?i(e):t>3?i(o,c,e):i(o,c))||e);return t>3&&e&&Object.defineProperty(o,c,e),e},_=this&&this.__param||function(p,o){return function(c,u){o(c,u,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;var f=g(4725),h=g(2585),b=function(){function p(o,c,u,i,t,e){this._textarea=o,this._compositionView=c,this._bufferService=u,this._optionsService=i,this._coreService=t,this._renderService=e,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}return Object.defineProperty(p.prototype,"isComposing",{get:function(){return this._isComposing},enumerable:!1,configurable:!0}),p.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")},p.prototype.compositionupdate=function(o){var c=this;this._compositionView.textContent=o.data,this.updateCompositionElements(),setTimeout(function(){c._compositionPosition.end=c._textarea.value.length},0)},p.prototype.compositionend=function(){this._finalizeComposition(!0)},p.prototype.keydown=function(o){if(this._isComposing||this._isSendingComposition){if(o.keyCode===229||o.keyCode===16||o.keyCode===17||o.keyCode===18)return!1;this._finalizeComposition(!1)}return o.keyCode!==229||(this._handleAnyTextareaChanges(),!1)},p.prototype._finalizeComposition=function(o){var c=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,o){var u={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(function(){if(c._isSendingComposition){c._isSendingComposition=!1;var t;u.start+=c._dataAlreadySent.length,(t=c._isComposing?c._textarea.value.substring(u.start,u.end):c._textarea.value.substring(u.start)).length>0&&c._coreService.triggerDataEvent(t,!0)}},0)}else{this._isSendingComposition=!1;var i=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(i,!0)}},p.prototype._handleAnyTextareaChanges=function(){var o=this,c=this._textarea.value;setTimeout(function(){if(!o._isComposing){var u=o._textarea.value.replace(c,"");u.length>0&&(o._dataAlreadySent=u,o._coreService.triggerDataEvent(u,!0))}},0)},p.prototype.updateCompositionElements=function(o){var c=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var u=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),i=this._renderService.dimensions.actualCellHeight,t=this._bufferService.buffer.y*this._renderService.dimensions.actualCellHeight,e=u*this._renderService.dimensions.actualCellWidth;this._compositionView.style.left=e+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=i+"px",this._compositionView.style.lineHeight=i+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var r=this._compositionView.getBoundingClientRect();this._textarea.style.left=e+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}o||setTimeout(function(){return c.updateCompositionElements(!0)},0)}},l([_(2,h.IBufferService),_(3,h.IOptionsService),_(4,h.ICoreService),_(5,f.IRenderService)],p)}();n.CompositionHelper=b},9806:(H,n)=>{function g(l,_){var f=_.getBoundingClientRect();return[l.clientX-f.left,l.clientY-f.top]}Object.defineProperty(n,"__esModule",{value:!0}),n.getRawByteCoords=n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=g,n.getCoords=function(l,_,f,h,b,p,o,c){if(b){var u=g(l,_);if(u)return u[0]=Math.ceil((u[0]+(c?p/2:0))/p),u[1]=Math.ceil(u[1]/o),u[0]=Math.min(Math.max(u[0],1),f+(c?1:0)),u[1]=Math.min(Math.max(u[1],1),h),u}},n.getRawByteCoords=function(l){if(l)return{x:l[0]+32,y:l[1]+32}}},9504:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;var l=g(2584);function _(c,u,i,t){var e=c-f(i,c),r=u-f(i,u),s=Math.abs(e-r)-function(a,d,y){for(var L=0,w=a-f(y,a),m=d-f(y,d),S=0;S<Math.abs(w-m);S++){var x=h(a,d)==="A"?-1:1,k=y.buffer.lines.get(w+x*S);k!=null&&k.isWrapped&&L++}return L}(c,u,i);return o(s,p(h(c,u),t))}function f(c,u){for(var i=0,t=c.buffer.lines.get(u),e=t==null?void 0:t.isWrapped;e&&u>=0&&u<c.rows;)i++,e=(t=c.buffer.lines.get(--u))==null?void 0:t.isWrapped;return i}function h(c,u){return c>u?"A":"B"}function b(c,u,i,t,e,r){for(var s=c,a=u,d="";s!==i||a!==t;)s+=e?1:-1,e&&s>r.cols-1?(d+=r.buffer.translateBufferLineToString(a,!1,c,s),s=0,c=0,a++):!e&&s<0&&(d+=r.buffer.translateBufferLineToString(a,!1,0,c+1),c=s=r.cols-1,a--);return d+r.buffer.translateBufferLineToString(a,!1,c,s)}function p(c,u){var i=u?"O":"[";return l.C0.ESC+i+c}function o(c,u){c=Math.floor(c);for(var i="",t=0;t<c;t++)i+=u;return i}n.moveToCellSequence=function(c,u,i,t){var e,r=i.buffer.x,s=i.buffer.y;if(!i.buffer.hasScrollback)return function(d,y,L,w,m,S){return _(y,w,m,S).length===0?"":o(b(d,y,d,y-f(m,y),!1,m).length,p("D",S))}(r,s,0,u,i,t)+_(s,u,i,t)+function(d,y,L,w,m,S){var x;x=_(y,w,m,S).length>0?w-f(m,w):y;var k=w,F=function(M,E,A,I,j,N){var z;return z=_(A,I,j,N).length>0?I-f(j,I):E,M<A&&z<=I||M>=A&&z<I?"C":"D"}(d,y,L,w,m,S);return o(b(d,x,L,k,F==="C",m).length,p(F,S))}(r,s,c,u,i,t);if(s===u)return e=r>c?"D":"C",o(Math.abs(r-c),p(e,t));e=s>u?"D":"C";var a=Math.abs(s-u);return o(function(d,y){return y.cols-d}(s>u?c:r,i)+(a-1)*i.cols+1+((s>u?r:c)-1),p(e,t))}},4389:function(H,n,g){var l=this&&this.__assign||function(){return l=Object.assign||function(i){for(var t,e=1,r=arguments.length;e<r;e++)for(var s in t=arguments[e])Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s]);return i},l.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;var _=g(3236),f=g(9042),h=g(7975),b=g(7090),p=g(5741),o=g(8285),c=["cols","rows"],u=function(){function i(t){var e=this;this._core=new _.Terminal(t),this._addonManager=new p.AddonManager,this._publicOptions=l({},this._core.options);var r=function(y){return e._core.options[y]},s=function(y,L){e._checkReadonlyOptions(y),e._core.options[y]=L};for(var a in this._core.options){var d={get:r.bind(this,a),set:s.bind(this,a)};Object.defineProperty(this._publicOptions,a,d)}}return i.prototype._checkReadonlyOptions=function(t){if(c.includes(t))throw new Error('Option "'+t+'" can only be set in the constructor')},i.prototype._checkProposedApi=function(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(i.prototype,"onBell",{get:function(){return this._core.onBell},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new h.ParserApi(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unicode",{get:function(){return this._checkProposedApi(),new b.UnicodeApi(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this._checkProposedApi(),this._buffer||(this._buffer=new o.BufferNamespaceApi(this._core)),this._buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"modes",{get:function(){var t=this._core.coreService.decPrivateModes,e="none";switch(this._core.coreMouseService.activeProtocol){case"X10":e="x10";break;case"VT200":e="vt200";break;case"DRAG":e="drag";break;case"ANY":e="any"}return{applicationCursorKeysMode:t.applicationCursorKeys,applicationKeypadMode:t.applicationKeypad,bracketedPasteMode:t.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:e,originMode:t.origin,reverseWraparoundMode:t.reverseWraparound,sendFocusMode:t.sendFocus,wraparoundMode:t.wraparound}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"options",{get:function(){return this._publicOptions},set:function(t){for(var e in t)this._publicOptions[e]=t[e]},enumerable:!1,configurable:!0}),i.prototype.blur=function(){this._core.blur()},i.prototype.focus=function(){this._core.focus()},i.prototype.resize=function(t,e){this._verifyIntegers(t,e),this._core.resize(t,e)},i.prototype.open=function(t){this._core.open(t)},i.prototype.attachCustomKeyEventHandler=function(t){this._core.attachCustomKeyEventHandler(t)},i.prototype.registerLinkMatcher=function(t,e,r){return this._checkProposedApi(),this._core.registerLinkMatcher(t,e,r)},i.prototype.deregisterLinkMatcher=function(t){this._checkProposedApi(),this._core.deregisterLinkMatcher(t)},i.prototype.registerLinkProvider=function(t){return this._checkProposedApi(),this._core.registerLinkProvider(t)},i.prototype.registerCharacterJoiner=function(t){return this._checkProposedApi(),this._core.registerCharacterJoiner(t)},i.prototype.deregisterCharacterJoiner=function(t){this._checkProposedApi(),this._core.deregisterCharacterJoiner(t)},i.prototype.registerMarker=function(t){return t===void 0&&(t=0),this._checkProposedApi(),this._verifyIntegers(t),this._core.addMarker(t)},i.prototype.registerDecoration=function(t){var e,r,s;return this._checkProposedApi(),this._verifyPositiveIntegers((e=t.x)!==null&&e!==void 0?e:0,(r=t.width)!==null&&r!==void 0?r:0,(s=t.height)!==null&&s!==void 0?s:0),this._core.registerDecoration(t)},i.prototype.addMarker=function(t){return this.registerMarker(t)},i.prototype.hasSelection=function(){return this._core.hasSelection()},i.prototype.select=function(t,e,r){this._verifyIntegers(t,e,r),this._core.select(t,e,r)},i.prototype.getSelection=function(){return this._core.getSelection()},i.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},i.prototype.clearSelection=function(){this._core.clearSelection()},i.prototype.selectAll=function(){this._core.selectAll()},i.prototype.selectLines=function(t,e){this._verifyIntegers(t,e),this._core.selectLines(t,e)},i.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},i.prototype.scrollLines=function(t){this._verifyIntegers(t),this._core.scrollLines(t)},i.prototype.scrollPages=function(t){this._verifyIntegers(t),this._core.scrollPages(t)},i.prototype.scrollToTop=function(){this._core.scrollToTop()},i.prototype.scrollToBottom=function(){this._core.scrollToBottom()},i.prototype.scrollToLine=function(t){this._verifyIntegers(t),this._core.scrollToLine(t)},i.prototype.clear=function(){this._core.clear()},i.prototype.write=function(t,e){this._core.write(t,e)},i.prototype.writeUtf8=function(t,e){this._core.write(t,e)},i.prototype.writeln=function(t,e){this._core.write(t),this._core.write(`\r
`,e)},i.prototype.paste=function(t){this._core.paste(t)},i.prototype.getOption=function(t){return this._core.optionsService.getOption(t)},i.prototype.setOption=function(t,e){this._checkReadonlyOptions(t),this._core.optionsService.setOption(t,e)},i.prototype.refresh=function(t,e){this._verifyIntegers(t,e),this._core.refresh(t,e)},i.prototype.reset=function(){this._core.reset()},i.prototype.clearTextureAtlas=function(){this._core.clearTextureAtlas()},i.prototype.loadAddon=function(t){return this._addonManager.loadAddon(this,t)},Object.defineProperty(i,"strings",{get:function(){return f},enumerable:!1,configurable:!0}),i.prototype._verifyIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,s=t;r<s.length;r++){var a=s[r];if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}},i.prototype._verifyPositiveIntegers=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,s=t;r<s.length;r++){var a=s[r];if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}},i}();n.Terminal=u},1546:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseRenderLayer=void 0;var l=g(643),_=g(8803),f=g(1420),h=g(3734),b=g(1752),p=g(4774),o=g(9631),c=g(8978),u=function(){function i(t,e,r,s,a,d,y,L){this._container=t,this._alpha=s,this._colors=a,this._rendererId=d,this._bufferService=y,this._optionsService=L,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+e+"-layer"),this._canvas.style.zIndex=r.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return i.prototype.dispose=function(){var t;(0,o.removeElementFromParent)(this._canvas),(t=this._charAtlas)===null||t===void 0||t.dispose()},i.prototype._initCanvas=function(){this._ctx=(0,b.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},i.prototype.onOptionsChanged=function(){},i.prototype.onBlur=function(){},i.prototype.onFocus=function(){},i.prototype.onCursorMove=function(){},i.prototype.onGridChanged=function(t,e){},i.prototype.onSelectionChanged=function(t,e,r){r===void 0&&(r=!1)},i.prototype.setColors=function(t){this._refreshCharAtlas(t)},i.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},i.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,f.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},i.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width=t.canvasWidth+"px",this._canvas.style.height=t.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},i.prototype.clearTextureAtlas=function(){var t;(t=this._charAtlas)===null||t===void 0||t.clear()},i.prototype._fillCells=function(t,e,r,s){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight)},i.prototype._fillMiddleLineAtCells=function(t,e,r){r===void 0&&(r=1);var s=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-s-window.devicePixelRatio,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillBottomLineAtCells=function(t,e,r){r===void 0&&(r=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,r*this._scaledCellWidth,window.devicePixelRatio)},i.prototype._fillLeftLineAtCell=function(t,e,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*r,this._scaledCellHeight)},i.prototype._strokeRectAtCell=function(t,e,r,s){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,r*this._scaledCellWidth-window.devicePixelRatio,s*this._scaledCellHeight-window.devicePixelRatio)},i.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},i.prototype._clearCells=function(t,e,r,s){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,r*this._scaledCellWidth,s*this._scaledCellHeight))},i.prototype._fillCharTrueColor=function(t,e,r){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=_.TEXT_BASELINE,this._clipRow(r);var s=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(s=(0,c.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),s||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},i.prototype._drawChars=function(t,e,r){var s,a,d,y=this._getContrastColor(t);y||t.isFgRGB()||t.isBgRGB()?this._drawUncachedChars(t,e,r,y):(t.isInverse()?(a=t.isBgDefault()?_.INVERTED_DEFAULT_COLOR:t.getBgColor(),d=t.isFgDefault()?_.INVERTED_DEFAULT_COLOR:t.getFgColor()):(d=t.isBgDefault()?l.DEFAULT_COLOR:t.getBgColor(),a=t.isFgDefault()?l.DEFAULT_COLOR:t.getFgColor()),a+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&a<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||l.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||l.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=d,this._currentGlyphIdentifier.fg=a,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic(),!((s=this._charAtlas)===null||s===void 0)&&s.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(t,e,r))},i.prototype._drawUncachedChars=function(t,e,r,s){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=_.TEXT_BASELINE,t.isInverse())if(s)this._ctx.fillStyle=s.css;else if(t.isBgDefault())this._ctx.fillStyle=p.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getBgColor()).join(",")+")";else{var a=t.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&a<8&&(a+=8),this._ctx.fillStyle=this._colors.ansi[a].css}else if(s)this._ctx.fillStyle=s.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb("+h.AttributeData.toColorRGB(t.getFgColor()).join(",")+")";else{var d=t.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&d<8&&(d+=8),this._ctx.fillStyle=this._colors.ansi[d].css}this._clipRow(r),t.isDim()&&(this._ctx.globalAlpha=_.DIM_OPACITY);var y=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(y=(0,c.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,r*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),y||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},i.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},i.prototype._getFont=function(t,e){return(e?"italic":"")+" "+(t?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight)+" "+this._optionsService.rawOptions.fontSize*window.devicePixelRatio+"px "+this._optionsService.rawOptions.fontFamily},i.prototype._getContrastColor=function(t){if(this._optionsService.rawOptions.minimumContrastRatio!==1){var e=this._colors.contrastCache.getColor(t.bg,t.fg);if(e!==void 0)return e||void 0;var r=t.getFgColor(),s=t.getFgColorMode(),a=t.getBgColor(),d=t.getBgColorMode(),y=!!t.isInverse(),L=!!t.isInverse();if(y){var w=r;r=a,a=w;var m=s;s=d,d=m}var S=this._resolveBackgroundRgba(d,a,y),x=this._resolveForegroundRgba(s,r,y,L),k=p.rgba.ensureContrastRatio(S,x,this._optionsService.rawOptions.minimumContrastRatio);if(k){var F={css:p.channels.toCss(k>>24&255,k>>16&255,k>>8&255),rgba:k};return this._colors.contrastCache.setColor(t.bg,t.fg,F),F}this._colors.contrastCache.setColor(t.bg,t.fg,null)}},i.prototype._resolveBackgroundRgba=function(t,e,r){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.foreground.rgba:this._colors.background.rgba}},i.prototype._resolveForegroundRgba=function(t,e,r,s){switch(t){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&s&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return r?this._colors.background.rgba:this._colors.foreground.rgba}},i}();n.BaseRenderLayer=u},2512:function(H,n,g){var l,_=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}),f=this&&this.__decorate||function(e,r,s,a){var d,y=arguments.length,L=y<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(e,r,s,a);else for(var w=e.length-1;w>=0;w--)(d=e[w])&&(L=(y<3?d(L):y>3?d(r,s,L):d(r,s))||L);return y>3&&L&&Object.defineProperty(r,s,L),L},h=this&&this.__param||function(e,r){return function(s,a){r(s,a,e)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CursorRenderLayer=void 0;var b=g(1546),p=g(511),o=g(2585),c=g(4725),u=600,i=function(e){function r(s,a,d,y,L,w,m,S,x){var k=e.call(this,s,"cursor",a,!0,d,y,w,m)||this;return k._onRequestRedraw=L,k._coreService=S,k._coreBrowserService=x,k._cell=new p.CellData,k._state={x:0,y:0,isFocused:!1,style:"",width:0},k._cursorRenderers={bar:k._renderBarCursor.bind(k),block:k._renderBlockCursor.bind(k),underline:k._renderUnderlineCursor.bind(k)},k}return _(r,e),r.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),e.prototype.dispose.call(this)},r.prototype.resize=function(s){e.prototype.resize.call(this,s),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},r.prototype.reset=function(){var s;this._clearCursor(),(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation(),this.onOptionsChanged()},r.prototype.onBlur=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onFocus=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onOptionsChanged=function(){var s,a=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new t(this._coreBrowserService.isFocused,function(){a._render(!0)})):((s=this._cursorBlinkStateManager)===null||s===void 0||s.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},r.prototype.onCursorMove=function(){var s;(s=this._cursorBlinkStateManager)===null||s===void 0||s.restartBlinkAnimation()},r.prototype.onGridChanged=function(s,a){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},r.prototype._render=function(s){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var a=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=a-this._bufferService.buffer.ydisp;if(d<0||d>=this._bufferService.rows)this._clearCursor();else{var y=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(a).loadCell(y,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var L=this._optionsService.rawOptions.cursorStyle;return L&&L!=="block"?this._cursorRenderers[L](y,d,this._cell):this._renderBlurCursor(y,d,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=d,this._state.isFocused=!1,this._state.style=L,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===y&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](y,d,this._cell),this._ctx.restore(),this._state.x=y,this._state.y=d,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},r.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},r.prototype._renderBarCursor=function(s,a,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(s,a,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},r.prototype._renderBlockCursor=function(s,a,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(s,a,d.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(d,s,a),this._ctx.restore()},r.prototype._renderUnderlineCursor=function(s,a,d){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(s,a),this._ctx.restore()},r.prototype._renderBlurCursor=function(s,a,d){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(s,a,d.getWidth(),1),this._ctx.restore()},f([h(5,o.IBufferService),h(6,o.IOptionsService),h(7,o.ICoreService),h(8,c.ICoreBrowserService)],r)}(b.BaseRenderLayer);n.CursorRenderLayer=i;var t=function(){function e(r,s){this._renderCallback=s,this.isCursorVisible=!0,r&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var r=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){r._renderCallback(),r._animationFrame=void 0})))},e.prototype._restartInterval=function(r){var s=this;r===void 0&&(r=u),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout(function(){if(s._animationTimeRestarted){var a=u-(Date.now()-s._animationTimeRestarted);if(s._animationTimeRestarted=void 0,a>0)return void s._restartInterval(a)}s.isCursorVisible=!1,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0}),s._blinkInterval=window.setInterval(function(){if(s._animationTimeRestarted){var d=u-(Date.now()-s._animationTimeRestarted);return s._animationTimeRestarted=void 0,void s._restartInterval(d)}s.isCursorVisible=!s.isCursorVisible,s._animationFrame=window.requestAnimationFrame(function(){s._renderCallback(),s._animationFrame=void 0})},u)},r)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},8978:(H,n,g)=>{var l,_,f,h,b,p,o,c,u,i,t,e,r,s,a,d,y,L,w,m,S,x,k,F,M,E,A,I,j,N,z,J,Y,$,R,U,D,P,T,V,G,X,Q,ee,le,K,ne,ae,fe,Ae,Kt,Vt,Gt,Yt,Xt,Jt,Zt,$t,Qt,er,tr,rr,We,qe,Ue,Ne,ze,Ke,Ve,Ge,Ye,Xe,Je,Ze,$e,Qe,et,tt,rt,it,nt,st,ot,at,ct,lt,ht,ut,ft,dt,_t,pt,vt,gt,yt,mt,bt,St,Ct,wt,Lt,Et,kt,xt,At,Rt,Ot,Mt,Tt,Bt,Dt,Pt,ir,nr,sr,or,ar,cr,lr,hr,ur,fr,dr,_r,pr,vr,gr,yr;Object.defineProperty(n,"__esModule",{value:!0}),n.tryDrawCustomChar=n.boxDrawingDefinitions=n.blockElementDefinitions=void 0;var Ar=g(1752);n.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:9,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:0,y:0,w:4,h:8}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var ri={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};n.boxDrawingDefinitions={"\u2500":(l={},l[1]="M0,.5 L1,.5",l),"\u2501":(_={},_[3]="M0,.5 L1,.5",_),"\u2502":(f={},f[1]="M.5,0 L.5,1",f),"\u2503":(h={},h[3]="M.5,0 L.5,1",h),"\u250C":(b={},b[1]="M0.5,1 L.5,.5 L1,.5",b),"\u250F":(p={},p[3]="M0.5,1 L.5,.5 L1,.5",p),"\u2510":(o={},o[1]="M0,.5 L.5,.5 L.5,1",o),"\u2513":(c={},c[3]="M0,.5 L.5,.5 L.5,1",c),"\u2514":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"\u2517":(i={},i[3]="M.5,0 L.5,.5 L1,.5",i),"\u2518":(t={},t[1]="M.5,0 L.5,.5 L0,.5",t),"\u251B":(e={},e[3]="M.5,0 L.5,.5 L0,.5",e),"\u251C":(r={},r[1]="M.5,0 L.5,1 M.5,.5 L1,.5",r),"\u2523":(s={},s[3]="M.5,0 L.5,1 M.5,.5 L1,.5",s),"\u2524":(a={},a[1]="M.5,0 L.5,1 M.5,.5 L0,.5",a),"\u252B":(d={},d[3]="M.5,0 L.5,1 M.5,.5 L0,.5",d),"\u252C":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"\u2533":(L={},L[3]="M0,.5 L1,.5 M.5,.5 L.5,1",L),"\u2534":(w={},w[1]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"\u253B":(m={},m[3]="M0,.5 L1,.5 M.5,.5 L.5,0",m),"\u253C":(S={},S[1]="M0,.5 L1,.5 M.5,0 L.5,1",S),"\u254B":(x={},x[3]="M0,.5 L1,.5 M.5,0 L.5,1",x),"\u2574":(k={},k[1]="M.5,.5 L0,.5",k),"\u2578":(F={},F[3]="M.5,.5 L0,.5",F),"\u2575":(M={},M[1]="M.5,.5 L.5,0",M),"\u2579":(E={},E[3]="M.5,.5 L.5,0",E),"\u2576":(A={},A[1]="M.5,.5 L1,.5",A),"\u257A":(I={},I[3]="M.5,.5 L1,.5",I),"\u2577":(j={},j[1]="M.5,.5 L.5,1",j),"\u257B":(N={},N[3]="M.5,.5 L.5,1",N),"\u2550":(z={},z[1]=function(q,W){return"M0,"+(.5-W)+" L1,"+(.5-W)+" M0,"+(.5+W)+" L1,"+(.5+W)},z),"\u2551":(J={},J[1]=function(q,W){return"M"+(.5-q)+",0 L"+(.5-q)+",1 M"+(.5+q)+",0 L"+(.5+q)+",1"},J),"\u2552":(Y={},Y[1]=function(q,W){return"M.5,1 L.5,"+(.5-W)+" L1,"+(.5-W)+" M.5,"+(.5+W)+" L1,"+(.5+W)},Y),"\u2553":($={},$[1]=function(q,W){return"M"+(.5-q)+",1 L"+(.5-q)+",.5 L1,.5 M"+(.5+q)+",.5 L"+(.5+q)+",1"},$),"\u2554":(R={},R[1]=function(q,W){return"M1,"+(.5-W)+" L"+(.5-q)+","+(.5-W)+" L"+(.5-q)+",1 M1,"+(.5+W)+" L"+(.5+q)+","+(.5+W)+" L"+(.5+q)+",1"},R),"\u2555":(U={},U[1]=function(q,W){return"M0,"+(.5-W)+" L.5,"+(.5-W)+" L.5,1 M0,"+(.5+W)+" L.5,"+(.5+W)},U),"\u2556":(D={},D[1]=function(q,W){return"M"+(.5+q)+",1 L"+(.5+q)+",.5 L0,.5 M"+(.5-q)+",.5 L"+(.5-q)+",1"},D),"\u2557":(P={},P[1]=function(q,W){return"M0,"+(.5+W)+" L"+(.5-q)+","+(.5+W)+" L"+(.5-q)+",1 M0,"+(.5-W)+" L"+(.5+q)+","+(.5-W)+" L"+(.5+q)+",1"},P),"\u2558":(T={},T[1]=function(q,W){return"M.5,0 L.5,"+(.5+W)+" L1,"+(.5+W)+" M.5,"+(.5-W)+" L1,"+(.5-W)},T),"\u2559":(V={},V[1]=function(q,W){return"M1,.5 L"+(.5-q)+",.5 L"+(.5-q)+",0 M"+(.5+q)+",.5 L"+(.5+q)+",0"},V),"\u255A":(G={},G[1]=function(q,W){return"M1,"+(.5-W)+" L"+(.5+q)+","+(.5-W)+" L"+(.5+q)+",0 M1,"+(.5+W)+" L"+(.5-q)+","+(.5+W)+" L"+(.5-q)+",0"},G),"\u255B":(X={},X[1]=function(q,W){return"M0,"+(.5+W)+" L.5,"+(.5+W)+" L.5,0 M0,"+(.5-W)+" L.5,"+(.5-W)},X),"\u255C":(Q={},Q[1]=function(q,W){return"M0,.5 L"+(.5+q)+",.5 L"+(.5+q)+",0 M"+(.5-q)+",.5 L"+(.5-q)+",0"},Q),"\u255D":(ee={},ee[1]=function(q,W){return"M0,"+(.5-W)+" L"+(.5-q)+","+(.5-W)+" L"+(.5-q)+",0 M0,"+(.5+W)+" L"+(.5+q)+","+(.5+W)+" L"+(.5+q)+",0"},ee),"\u255E":(le={},le[1]=function(q,W){return"M.5,0 L.5,1 M.5,"+(.5-W)+" L1,"+(.5-W)+" M.5,"+(.5+W)+" L1,"+(.5+W)},le),"\u255F":(K={},K[1]=function(q,W){return"M"+(.5-q)+",0 L"+(.5-q)+",1 M"+(.5+q)+",0 L"+(.5+q)+",1 M"+(.5+q)+",.5 L1,.5"},K),"\u2560":(ne={},ne[1]=function(q,W){return"M"+(.5-q)+",0 L"+(.5-q)+",1 M1,"+(.5+W)+" L"+(.5+q)+","+(.5+W)+" L"+(.5+q)+",1 M1,"+(.5-W)+" L"+(.5+q)+","+(.5-W)+" L"+(.5+q)+",0"},ne),"\u2561":(ae={},ae[1]=function(q,W){return"M.5,0 L.5,1 M0,"+(.5-W)+" L.5,"+(.5-W)+" M0,"+(.5+W)+" L.5,"+(.5+W)},ae),"\u2562":(fe={},fe[1]=function(q,W){return"M0,.5 L"+(.5-q)+",.5 M"+(.5-q)+",0 L"+(.5-q)+",1 M"+(.5+q)+",0 L"+(.5+q)+",1"},fe),"\u2563":(Ae={},Ae[1]=function(q,W){return"M"+(.5+q)+",0 L"+(.5+q)+",1 M0,"+(.5+W)+" L"+(.5-q)+","+(.5+W)+" L"+(.5-q)+",1 M0,"+(.5-W)+" L"+(.5-q)+","+(.5-W)+" L"+(.5-q)+",0"},Ae),"\u2564":(Kt={},Kt[1]=function(q,W){return"M0,"+(.5-W)+" L1,"+(.5-W)+" M0,"+(.5+W)+" L1,"+(.5+W)+" M.5,"+(.5+W)+" L.5,1"},Kt),"\u2565":(Vt={},Vt[1]=function(q,W){return"M0,.5 L1,.5 M"+(.5-q)+",.5 L"+(.5-q)+",1 M"+(.5+q)+",.5 L"+(.5+q)+",1"},Vt),"\u2566":(Gt={},Gt[1]=function(q,W){return"M0,"+(.5-W)+" L1,"+(.5-W)+" M0,"+(.5+W)+" L"+(.5-q)+","+(.5+W)+" L"+(.5-q)+",1 M1,"+(.5+W)+" L"+(.5+q)+","+(.5+W)+" L"+(.5+q)+",1"},Gt),"\u2567":(Yt={},Yt[1]=function(q,W){return"M.5,0 L.5,"+(.5-W)+" M0,"+(.5-W)+" L1,"+(.5-W)+" M0,"+(.5+W)+" L1,"+(.5+W)},Yt),"\u2568":(Xt={},Xt[1]=function(q,W){return"M0,.5 L1,.5 M"+(.5-q)+",.5 L"+(.5-q)+",0 M"+(.5+q)+",.5 L"+(.5+q)+",0"},Xt),"\u2569":(Jt={},Jt[1]=function(q,W){return"M0,"+(.5+W)+" L1,"+(.5+W)+" M0,"+(.5-W)+" L"+(.5-q)+","+(.5-W)+" L"+(.5-q)+",0 M1,"+(.5-W)+" L"+(.5+q)+","+(.5-W)+" L"+(.5+q)+",0"},Jt),"\u256A":(Zt={},Zt[1]=function(q,W){return"M.5,0 L.5,1 M0,"+(.5-W)+" L1,"+(.5-W)+" M0,"+(.5+W)+" L1,"+(.5+W)},Zt),"\u256B":($t={},$t[1]=function(q,W){return"M0,.5 L1,.5 M"+(.5-q)+",0 L"+(.5-q)+",1 M"+(.5+q)+",0 L"+(.5+q)+",1"},$t),"\u256C":(Qt={},Qt[1]=function(q,W){return"M0,"+(.5+W)+" L"+(.5-q)+","+(.5+W)+" L"+(.5-q)+",1 M1,"+(.5+W)+" L"+(.5+q)+","+(.5+W)+" L"+(.5+q)+",1 M0,"+(.5-W)+" L"+(.5-q)+","+(.5-W)+" L"+(.5-q)+",0 M1,"+(.5-W)+" L"+(.5+q)+","+(.5-W)+" L"+(.5+q)+",0"},Qt),"\u2571":(er={},er[1]="M1,0 L0,1",er),"\u2572":(tr={},tr[1]="M0,0 L1,1",tr),"\u2573":(rr={},rr[1]="M1,0 L0,1 M0,0 L1,1",rr),"\u257C":(We={},We[1]="M.5,.5 L0,.5",We[3]="M.5,.5 L1,.5",We),"\u257D":(qe={},qe[1]="M.5,.5 L.5,0",qe[3]="M.5,.5 L.5,1",qe),"\u257E":(Ue={},Ue[1]="M.5,.5 L1,.5",Ue[3]="M.5,.5 L0,.5",Ue),"\u257F":(Ne={},Ne[1]="M.5,.5 L.5,1",Ne[3]="M.5,.5 L.5,0",Ne),"\u250D":(ze={},ze[1]="M.5,.5 L.5,1",ze[3]="M.5,.5 L1,.5",ze),"\u250E":(Ke={},Ke[1]="M.5,.5 L1,.5",Ke[3]="M.5,.5 L.5,1",Ke),"\u2511":(Ve={},Ve[1]="M.5,.5 L.5,1",Ve[3]="M.5,.5 L0,.5",Ve),"\u2512":(Ge={},Ge[1]="M.5,.5 L0,.5",Ge[3]="M.5,.5 L.5,1",Ge),"\u2515":(Ye={},Ye[1]="M.5,.5 L.5,0",Ye[3]="M.5,.5 L1,.5",Ye),"\u2516":(Xe={},Xe[1]="M.5,.5 L1,.5",Xe[3]="M.5,.5 L.5,0",Xe),"\u2519":(Je={},Je[1]="M.5,.5 L.5,0",Je[3]="M.5,.5 L0,.5",Je),"\u251A":(Ze={},Ze[1]="M.5,.5 L0,.5",Ze[3]="M.5,.5 L.5,0",Ze),"\u251D":($e={},$e[1]="M.5,0 L.5,1",$e[3]="M.5,.5 L1,.5",$e),"\u251E":(Qe={},Qe[1]="M0.5,1 L.5,.5 L1,.5",Qe[3]="M.5,.5 L.5,0",Qe),"\u251F":(et={},et[1]="M.5,0 L.5,.5 L1,.5",et[3]="M.5,.5 L.5,1",et),"\u2520":(tt={},tt[1]="M.5,.5 L1,.5",tt[3]="M.5,0 L.5,1",tt),"\u2521":(rt={},rt[1]="M.5,.5 L.5,1",rt[3]="M.5,0 L.5,.5 L1,.5",rt),"\u2522":(it={},it[1]="M.5,.5 L.5,0",it[3]="M0.5,1 L.5,.5 L1,.5",it),"\u2525":(nt={},nt[1]="M.5,0 L.5,1",nt[3]="M.5,.5 L0,.5",nt),"\u2526":(st={},st[1]="M0,.5 L.5,.5 L.5,1",st[3]="M.5,.5 L.5,0",st),"\u2527":(ot={},ot[1]="M.5,0 L.5,.5 L0,.5",ot[3]="M.5,.5 L.5,1",ot),"\u2528":(at={},at[1]="M.5,.5 L0,.5",at[3]="M.5,0 L.5,1",at),"\u2529":(ct={},ct[1]="M.5,.5 L.5,1",ct[3]="M.5,0 L.5,.5 L0,.5",ct),"\u252A":(lt={},lt[1]="M.5,.5 L.5,0",lt[3]="M0,.5 L.5,.5 L.5,1",lt),"\u252D":(ht={},ht[1]="M0.5,1 L.5,.5 L1,.5",ht[3]="M.5,.5 L0,.5",ht),"\u252E":(ut={},ut[1]="M0,.5 L.5,.5 L.5,1",ut[3]="M.5,.5 L1,.5",ut),"\u252F":(ft={},ft[1]="M.5,.5 L.5,1",ft[3]="M0,.5 L1,.5",ft),"\u2530":(dt={},dt[1]="M0,.5 L1,.5",dt[3]="M.5,.5 L.5,1",dt),"\u2531":(_t={},_t[1]="M.5,.5 L1,.5",_t[3]="M0,.5 L.5,.5 L.5,1",_t),"\u2532":(pt={},pt[1]="M.5,.5 L0,.5",pt[3]="M0.5,1 L.5,.5 L1,.5",pt),"\u2535":(vt={},vt[1]="M.5,0 L.5,.5 L1,.5",vt[3]="M.5,.5 L0,.5",vt),"\u2536":(gt={},gt[1]="M.5,0 L.5,.5 L0,.5",gt[3]="M.5,.5 L1,.5",gt),"\u2537":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M0,.5 L1,.5",yt),"\u2538":(mt={},mt[1]="M0,.5 L1,.5",mt[3]="M.5,.5 L.5,0",mt),"\u2539":(bt={},bt[1]="M.5,.5 L1,.5",bt[3]="M.5,0 L.5,.5 L0,.5",bt),"\u253A":(St={},St[1]="M.5,.5 L0,.5",St[3]="M.5,0 L.5,.5 L1,.5",St),"\u253D":(Ct={},Ct[1]="M.5,0 L.5,1 M.5,.5 L1,.5",Ct[3]="M.5,.5 L0,.5",Ct),"\u253E":(wt={},wt[1]="M.5,0 L.5,1 M.5,.5 L0,.5",wt[3]="M.5,.5 L1,.5",wt),"\u253F":(Lt={},Lt[1]="M.5,0 L.5,1",Lt[3]="M0,.5 L1,.5",Lt),"\u2540":(Et={},Et[1]="M0,.5 L1,.5 M.5,.5 L.5,1",Et[3]="M.5,.5 L.5,0",Et),"\u2541":(kt={},kt[1]="M.5,.5 L.5,0 M0,.5 L1,.5",kt[3]="M.5,.5 L.5,1",kt),"\u2542":(xt={},xt[1]="M0,.5 L1,.5",xt[3]="M.5,0 L.5,1",xt),"\u2543":(At={},At[1]="M0.5,1 L.5,.5 L1,.5",At[3]="M.5,0 L.5,.5 L0,.5",At),"\u2544":(Rt={},Rt[1]="M0,.5 L.5,.5 L.5,1",Rt[3]="M.5,0 L.5,.5 L1,.5",Rt),"\u2545":(Ot={},Ot[1]="M.5,0 L.5,.5 L1,.5",Ot[3]="M0,.5 L.5,.5 L.5,1",Ot),"\u2546":(Mt={},Mt[1]="M.5,0 L.5,.5 L0,.5",Mt[3]="M0.5,1 L.5,.5 L1,.5",Mt),"\u2547":(Tt={},Tt[1]="M.5,.5 L.5,1",Tt[3]="M.5,.5 L.5,0 M0,.5 L1,.5",Tt),"\u2548":(Bt={},Bt[1]="M.5,.5 L.5,0",Bt[3]="M0,.5 L1,.5 M.5,.5 L.5,1",Bt),"\u2549":(Dt={},Dt[1]="M.5,.5 L1,.5",Dt[3]="M.5,0 L.5,1 M.5,.5 L0,.5",Dt),"\u254A":(Pt={},Pt[1]="M.5,.5 L0,.5",Pt[3]="M.5,0 L.5,1 M.5,.5 L1,.5",Pt),"\u254C":(ir={},ir[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ir),"\u254D":(nr={},nr[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",nr),"\u2504":(sr={},sr[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",sr),"\u2505":(or={},or[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",or),"\u2508":(ar={},ar[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ar),"\u2509":(cr={},cr[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",cr),"\u254E":(lr={},lr[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",lr),"\u254F":(hr={},hr[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",hr),"\u2506":(ur={},ur[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ur),"\u2507":(fr={},fr[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",fr),"\u250A":(dr={},dr[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",dr),"\u250B":(_r={},_r[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",_r),"\u256D":(pr={},pr[1]="C.5,1,.5,.5,1,.5",pr),"\u256E":(vr={},vr[1]="C.5,1,.5,.5,0,.5",vr),"\u256F":(gr={},gr[1]="C.5,0,.5,.5,0,.5",gr),"\u2570":(yr={},yr[1]="C.5,0,.5,.5,1,.5",yr)},n.tryDrawCustomChar=function(q,W,de,Be,De,ie){var _e=n.blockElementDefinitions[W];if(_e)return function(se,ve,Ie,He,Re,Oe){for(var ce=0;ce<ve.length;ce++){var oe=ve[ce],te=Re/8,me=Oe/8;se.fillRect(Ie+oe.x*te,He+oe.y*me,oe.w*te,oe.h*me)}}(q,_e,de,Be,De,ie),!0;var pe=ri[W];if(pe)return function(se,ve,Ie,He,Re,Oe){var ce,oe=Rr.get(ve);oe||(oe=new Map,Rr.set(ve,oe));var te=se.fillStyle;if(typeof te!="string")throw new Error('Unexpected fillStyle type "'+te+'"');var me=oe.get(te);if(!me){var he=ve[0].length,we=ve.length,Le=document.createElement("canvas");Le.width=he,Le.height=we;var It=(0,Ar.throwIfFalsy)(Le.getContext("2d")),Se=new ImageData(he,we),Me=void 0,Ee=void 0,mr=void 0,br=void 0;if(te.startsWith("#"))Me=parseInt(te.substr(1,2),16),Ee=parseInt(te.substr(3,2),16),mr=parseInt(te.substr(5,2),16),br=te.length>7&&parseInt(te.substr(7,2),16)||1;else{if(!te.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'+te+'" when drawing pattern glyph');Me=(ce=te.substring(5,te.length-1).split(",").map(function(si){return parseFloat(si)}))[0],Ee=ce[1],mr=ce[2],br=ce[3]}for(var ke=0;ke<we;ke++)for(var xe=0;xe<he;xe++)Se.data[4*(ke*he+xe)]=Me,Se.data[4*(ke*he+xe)+1]=Ee,Se.data[4*(ke*he+xe)+2]=mr,Se.data[4*(ke*he+xe)+3]=ve[ke][xe]*(255*br);It.putImageData(Se,0,0),me=(0,Ar.throwIfFalsy)(se.createPattern(Le,null)),oe.set(te,me)}se.fillStyle=me,se.fillRect(Ie,He,Re,Oe)}(q,pe,de,Be,De,ie),!0;var Pe=n.boxDrawingDefinitions[W];return!!Pe&&(function(se,ve,Ie,He,Re,Oe){se.strokeStyle=se.fillStyle;for(var ce=0,oe=Object.entries(ve);ce<oe.length;ce++){var te=oe[ce],me=te[0],he=te[1];se.beginPath(),se.lineWidth=window.devicePixelRatio*Number.parseInt(me);for(var we=0,Le=(typeof he=="function"?he(.15,.15/Oe*Re):he).split(" ");we<Le.length;we++){var It=Le[we],Se=It[0],Me=ii[Se];if(Me){var Ee=It.substring(1).split(",");Ee[0]&&Ee[1]&&Me(se,ni(Ee,Re,Oe,Ie,He))}else console.error('Could not find drawing instructions for "'+Se+'"')}se.stroke(),se.closePath()}}(q,Pe,de,Be,De,ie),!0)};var Rr=new Map;function Or(q,W,de){return de===void 0&&(de=0),Math.max(Math.min(q,W),de)}var ii={C:function(q,W){return q.bezierCurveTo(W[0],W[1],W[2],W[3],W[4],W[5])},L:function(q,W){return q.lineTo(W[0],W[1])},M:function(q,W){return q.moveTo(W[0],W[1])}};function ni(q,W,de,Be,De){var ie=q.map(function(Pe){return parseFloat(Pe)||parseInt(Pe)});if(ie.length<2)throw new Error("Too few arguments for instruction");for(var _e=0;_e<ie.length;_e+=2)ie[_e]*=W,ie[_e]!==0&&(ie[_e]=Or(Math.round(ie[_e]+.5)-.5,W,0)),ie[_e]+=Be;for(var pe=1;pe<ie.length;pe+=2)ie[pe]*=de,ie[pe]!==0&&(ie[pe]=Or(Math.round(ie[pe]+.5)-.5,de,0)),ie[pe]+=De;return ie}},3700:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GridCache=void 0;var g=function(){function l(){this.cache=[]}return l.prototype.resize=function(_,f){for(var h=0;h<_;h++){this.cache.length<=h&&this.cache.push([]);for(var b=this.cache[h].length;b<f;b++)this.cache[h].push(void 0);this.cache[h].length=f}this.cache.length=_},l.prototype.clear=function(){for(var _=0;_<this.cache.length;_++)for(var f=0;f<this.cache[_].length;f++)this.cache[_][f]=void 0},l}();n.GridCache=g},5098:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.LinkRenderLayer=void 0;var b=g(1546),p=g(8803),o=g(2040),c=g(2585),u=function(i){function t(e,r,s,a,d,y,L,w){var m=i.call(this,e,"link",r,!0,s,a,L,w)||this;return d.onShowLinkUnderline(function(S){return m._onShowLinkUnderline(S)}),d.onHideLinkUnderline(function(S){return m._onHideLinkUnderline(S)}),y.onShowLinkUnderline(function(S){return m._onShowLinkUnderline(S)}),y.onHideLinkUnderline(function(S){return m._onHideLinkUnderline(S)}),m}return _(t,i),t.prototype.resize=function(e){i.prototype.resize.call(this,e),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(e){if(e.fg===p.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:e.fg&&(0,o.is256Color)(e.fg)?this._ctx.fillStyle=this._colors.ansi[e.fg].css:this._ctx.fillStyle=this._colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var r=e.y1+1;r<e.y2;r++)this._fillBottomLineAtCells(0,r,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e},t.prototype._onHideLinkUnderline=function(e){this._clearCurrentLink()},f([h(6,c.IBufferService),h(7,c.IOptionsService)],t)}(b.BaseRenderLayer);n.LinkRenderLayer=u},3525:function(H,n,g){var l,_=this&&this.__extends||(l=function(d,y){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,w){L.__proto__=w}||function(L,w){for(var m in w)Object.prototype.hasOwnProperty.call(w,m)&&(L[m]=w[m])},l(d,y)},function(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function L(){this.constructor=d}l(d,y),d.prototype=y===null?Object.create(y):(L.prototype=y.prototype,new L)}),f=this&&this.__decorate||function(d,y,L,w){var m,S=arguments.length,x=S<3?y:w===null?w=Object.getOwnPropertyDescriptor(y,L):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(d,y,L,w);else for(var k=d.length-1;k>=0;k--)(m=d[k])&&(x=(S<3?m(x):S>3?m(y,L,x):m(y,L))||x);return S>3&&x&&Object.defineProperty(y,L,x),x},h=this&&this.__param||function(d,y){return function(L,w){y(L,w,d)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Renderer=void 0;var b=g(9596),p=g(4149),o=g(2512),c=g(5098),u=g(844),i=g(4725),t=g(2585),e=g(1420),r=g(8460),s=1,a=function(d){function y(L,w,m,S,x,k,F,M){var E=d.call(this)||this;E._colors=L,E._screenElement=w,E._bufferService=k,E._charSizeService=F,E._optionsService=M,E._id=s++,E._onRequestRedraw=new r.EventEmitter;var A=E._optionsService.rawOptions.allowTransparency;return E._renderLayers=[x.createInstance(b.TextRenderLayer,E._screenElement,0,E._colors,A,E._id),x.createInstance(p.SelectionRenderLayer,E._screenElement,1,E._colors,E._id),x.createInstance(c.LinkRenderLayer,E._screenElement,2,E._colors,E._id,m,S),x.createInstance(o.CursorRenderLayer,E._screenElement,3,E._colors,E._id,E._onRequestRedraw)],E.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},E._devicePixelRatio=window.devicePixelRatio,E._updateDimensions(),E.onOptionsChanged(),E}return _(y,d),Object.defineProperty(y.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),y.prototype.dispose=function(){for(var L=0,w=this._renderLayers;L<w.length;L++)w[L].dispose();d.prototype.dispose.call(this),(0,e.removeTerminalFromCache)(this._id)},y.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},y.prototype.setColors=function(L){this._colors=L;for(var w=0,m=this._renderLayers;w<m.length;w++){var S=m[w];S.setColors(this._colors),S.reset()}},y.prototype.onResize=function(L,w){this._updateDimensions();for(var m=0,S=this._renderLayers;m<S.length;m++)S[m].resize(this.dimensions);this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},y.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},y.prototype.onBlur=function(){this._runOperation(function(L){return L.onBlur()})},y.prototype.onFocus=function(){this._runOperation(function(L){return L.onFocus()})},y.prototype.onSelectionChanged=function(L,w,m){m===void 0&&(m=!1),this._runOperation(function(S){return S.onSelectionChanged(L,w,m)})},y.prototype.onCursorMove=function(){this._runOperation(function(L){return L.onCursorMove()})},y.prototype.onOptionsChanged=function(){this._runOperation(function(L){return L.onOptionsChanged()})},y.prototype.clear=function(){this._runOperation(function(L){return L.reset()})},y.prototype._runOperation=function(L){for(var w=0,m=this._renderLayers;w<m.length;w++)L(m[w])},y.prototype.renderRows=function(L,w){for(var m=0,S=this._renderLayers;m<S.length;m++)S[m].onGridChanged(L,w)},y.prototype.clearTextureAtlas=function(){for(var L=0,w=this._renderLayers;L<w.length;L++)w[L].clearTextureAtlas()},y.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},f([h(4,t.IInstantiationService),h(5,t.IBufferService),h(6,i.ICharSizeService),h(7,t.IOptionsService)],y)}(u.Disposable);n.Renderer=a},1752:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.throwIfFalsy=void 0,n.throwIfFalsy=function(g){if(!g)throw new Error("value must not be falsy");return g}},4149:function(H,n,g){var l,_=this&&this.__extends||(l=function(c,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,t){i.__proto__=t}||function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])},l(c,u)},function(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function i(){this.constructor=c}l(c,u),c.prototype=u===null?Object.create(u):(i.prototype=u.prototype,new i)}),f=this&&this.__decorate||function(c,u,i,t){var e,r=arguments.length,s=r<3?u:t===null?t=Object.getOwnPropertyDescriptor(u,i):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(c,u,i,t);else for(var a=c.length-1;a>=0;a--)(e=c[a])&&(s=(r<3?e(s):r>3?e(u,i,s):e(u,i))||s);return r>3&&s&&Object.defineProperty(u,i,s),s},h=this&&this.__param||function(c,u){return function(i,t){u(i,t,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionRenderLayer=void 0;var b=g(1546),p=g(2585),o=function(c){function u(i,t,e,r,s,a){var d=c.call(this,i,"selection",t,!0,e,r,s,a)||this;return d._clearState(),d}return _(u,c),u.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},u.prototype.resize=function(i){c.prototype.resize.call(this,i),this._clearState()},u.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},u.prototype.onSelectionChanged=function(i,t,e){if(this._didStateChange(i,t,e,this._bufferService.buffer.ydisp))if(this._clearAll(),i&&t){var r=i[1]-this._bufferService.buffer.ydisp,s=t[1]-this._bufferService.buffer.ydisp,a=Math.max(r,0),d=Math.min(s,this._bufferService.rows-1);if(a>=this._bufferService.rows||d<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=this._colors.selectionTransparent.css,e){var y=i[0],L=t[0]-y,w=d-a+1;this._fillCells(y,a,L,w)}else{y=r===a?i[0]:0;var m=a===s?t[0]:this._bufferService.cols;this._fillCells(y,a,m-y,1);var S=Math.max(d-a-1,0);if(this._fillCells(0,a+1,this._bufferService.cols,S),a!==d){var x=s===d?t[0]:this._bufferService.cols;this._fillCells(0,d,x,1)}}this._state.start=[i[0],i[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=e,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},u.prototype._didStateChange=function(i,t,e,r){return!this._areCoordinatesEqual(i,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||e!==this._state.columnSelectMode||r!==this._state.ydisp},u.prototype._areCoordinatesEqual=function(i,t){return!(!i||!t)&&i[0]===t[0]&&i[1]===t[1]},f([h(4,p.IBufferService),h(5,p.IOptionsService)],u)}(b.BaseRenderLayer);n.SelectionRenderLayer=o},9596:function(H,n,g){var l,_=this&&this.__extends||(l=function(s,a){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var L in y)Object.prototype.hasOwnProperty.call(y,L)&&(d[L]=y[L])},l(s,a)},function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function d(){this.constructor=s}l(s,a),s.prototype=a===null?Object.create(a):(d.prototype=a.prototype,new d)}),f=this&&this.__decorate||function(s,a,d,y){var L,w=arguments.length,m=w<3?a:y===null?y=Object.getOwnPropertyDescriptor(a,d):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(s,a,d,y);else for(var S=s.length-1;S>=0;S--)(L=s[S])&&(m=(w<3?L(m):w>3?L(a,d,m):L(a,d))||m);return w>3&&m&&Object.defineProperty(a,d,m),m},h=this&&this.__param||function(s,a){return function(d,y){a(d,y,s)}};Object.defineProperty(n,"__esModule",{value:!0}),n.TextRenderLayer=void 0;var b=g(3700),p=g(1546),o=g(3734),c=g(643),u=g(511),i=g(2585),t=g(4725),e=g(4269),r=function(s){function a(d,y,L,w,m,S,x,k){var F=s.call(this,d,"text",y,w,L,m,S,x)||this;return F._characterJoinerService=k,F._characterWidth=0,F._characterFont="",F._characterOverlapCache={},F._workCell=new u.CellData,F._state=new b.GridCache,F}return _(a,s),a.prototype.resize=function(d){s.prototype.resize.call(this,d);var y=this._getFont(!1,!1);this._characterWidth===d.scaledCharWidth&&this._characterFont===y||(this._characterWidth=d.scaledCharWidth,this._characterFont=y,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},a.prototype.reset=function(){this._state.clear(),this._clearAll()},a.prototype._forEachCell=function(d,y,L){for(var w=d;w<=y;w++)for(var m=w+this._bufferService.buffer.ydisp,S=this._bufferService.buffer.lines.get(m),x=this._characterJoinerService.getJoinedCharacters(m),k=0;k<this._bufferService.cols;k++){S.loadCell(k,this._workCell);var F=this._workCell,M=!1,E=k;if(F.getWidth()!==0){if(x.length>0&&k===x[0][0]){M=!0;var A=x.shift();F=new e.JoinedCellData(this._workCell,S.translateToString(!0,A[0],A[1]),A[1]-A[0]),E=A[1]-1}!M&&this._isOverlapping(F)&&E<S.length-1&&S.getCodePoint(E+1)===c.NULL_CELL_CODE&&(F.content&=-12582913,F.content|=2<<22),L(F,k,w),k=E}}},a.prototype._drawBackground=function(d,y){var L=this,w=this._ctx,m=this._bufferService.cols,S=0,x=0,k=null;w.save(),this._forEachCell(d,y,function(F,M,E){var A=null;F.isInverse()?A=F.isFgDefault()?L._colors.foreground.css:F.isFgRGB()?"rgb("+o.AttributeData.toColorRGB(F.getFgColor()).join(",")+")":L._colors.ansi[F.getFgColor()].css:F.isBgRGB()?A="rgb("+o.AttributeData.toColorRGB(F.getBgColor()).join(",")+")":F.isBgPalette()&&(A=L._colors.ansi[F.getBgColor()].css),k===null&&(S=M,x=E),E!==x?(w.fillStyle=k||"",L._fillCells(S,x,m-S,1),S=M,x=E):k!==A&&(w.fillStyle=k||"",L._fillCells(S,x,M-S,1),S=M,x=E),k=A}),k!==null&&(w.fillStyle=k,this._fillCells(S,x,m-S,1)),w.restore()},a.prototype._drawForeground=function(d,y){var L=this;this._forEachCell(d,y,function(w,m,S){if(!w.isInvisible()&&(L._drawChars(w,m,S),w.isUnderline()||w.isStrikethrough())){if(L._ctx.save(),w.isInverse())if(w.isBgDefault())L._ctx.fillStyle=L._colors.background.css;else if(w.isBgRGB())L._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(w.getBgColor()).join(",")+")";else{var x=w.getBgColor();L._optionsService.rawOptions.drawBoldTextInBrightColors&&w.isBold()&&x<8&&(x+=8),L._ctx.fillStyle=L._colors.ansi[x].css}else if(w.isFgDefault())L._ctx.fillStyle=L._colors.foreground.css;else if(w.isFgRGB())L._ctx.fillStyle="rgb("+o.AttributeData.toColorRGB(w.getFgColor()).join(",")+")";else{var k=w.getFgColor();L._optionsService.rawOptions.drawBoldTextInBrightColors&&w.isBold()&&k<8&&(k+=8),L._ctx.fillStyle=L._colors.ansi[k].css}w.isStrikethrough()&&L._fillMiddleLineAtCells(m,S,w.getWidth()),w.isUnderline()&&L._fillBottomLineAtCells(m,S,w.getWidth()),L._ctx.restore()}})},a.prototype.onGridChanged=function(d,y){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,d,this._bufferService.cols,y-d+1),this._drawBackground(d,y),this._drawForeground(d,y))},a.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},a.prototype._isOverlapping=function(d){if(d.getWidth()!==1||d.getCode()<256)return!1;var y=d.getChars();if(this._characterOverlapCache.hasOwnProperty(y))return this._characterOverlapCache[y];this._ctx.save(),this._ctx.font=this._characterFont;var L=Math.floor(this._ctx.measureText(y).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[y]=L,L},f([h(5,i.IBufferService),h(6,i.IOptionsService),h(7,t.ICharacterJoinerService)],a)}(p.BaseRenderLayer);n.TextRenderLayer=r},9616:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseCharAtlas=void 0;var g=function(){function l(){this._didWarmUp=!1}return l.prototype.dispose=function(){},l.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},l.prototype._doWarmUp=function(){},l.prototype.clear=function(){},l.prototype.beginFrame=function(){},l}();n.BaseCharAtlas=g},1420:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.removeTerminalFromCache=n.acquireCharAtlas=void 0;var l=g(2040),_=g(1906),f=[];n.acquireCharAtlas=function(h,b,p,o,c){for(var u=(0,l.generateConfig)(o,c,h,p),i=0;i<f.length;i++){var t=(e=f[i]).ownedBy.indexOf(b);if(t>=0){if((0,l.configEquals)(e.config,u))return e.atlas;e.ownedBy.length===1?(e.atlas.dispose(),f.splice(i,1)):e.ownedBy.splice(t,1);break}}for(i=0;i<f.length;i++){var e=f[i];if((0,l.configEquals)(e.config,u))return e.ownedBy.push(b),e.atlas}var r={atlas:new _.DynamicCharAtlas(document,u),config:u,ownedBy:[b]};return f.push(r),r.atlas},n.removeTerminalFromCache=function(h){for(var b=0;b<f.length;b++){var p=f[b].ownedBy.indexOf(h);if(p!==-1){f[b].ownedBy.length===1?(f[b].atlas.dispose(),f.splice(b,1)):f[b].ownedBy.splice(p,1);break}}}},2040:function(H,n,g){var l=this&&this.__spreadArray||function(f,h,b){if(b||arguments.length===2)for(var p,o=0,c=h.length;o<c;o++)!p&&o in h||(p||(p=Array.prototype.slice.call(h,0,o)),p[o]=h[o]);return f.concat(p||Array.prototype.slice.call(h))};Object.defineProperty(n,"__esModule",{value:!0}),n.is256Color=n.configEquals=n.generateConfig=void 0;var _=g(643);n.generateConfig=function(f,h,b,p){var o={foreground:p.foreground,background:p.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:l([],p.ansi,!0)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:f,scaledCharHeight:h,fontFamily:b.fontFamily,fontSize:b.fontSize,fontWeight:b.fontWeight,fontWeightBold:b.fontWeightBold,allowTransparency:b.allowTransparency,colors:o}},n.configEquals=function(f,h){for(var b=0;b<f.colors.ansi.length;b++)if(f.colors.ansi[b].rgba!==h.colors.ansi[b].rgba)return!1;return f.devicePixelRatio===h.devicePixelRatio&&f.fontFamily===h.fontFamily&&f.fontSize===h.fontSize&&f.fontWeight===h.fontWeight&&f.fontWeightBold===h.fontWeightBold&&f.allowTransparency===h.allowTransparency&&f.scaledCharWidth===h.scaledCharWidth&&f.scaledCharHeight===h.scaledCharHeight&&f.colors.foreground===h.colors.foreground&&f.colors.background===h.colors.background},n.is256Color=function(f){return f<_.DEFAULT_COLOR}},8803:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CHAR_ATLAS_CELL_SPACING=n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;var l=g(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=l.isFirefox||l.isLegacyEdge?"bottom":"ideographic",n.CHAR_ATLAS_CELL_SPACING=1},1906:function(H,n,g){var l,_=this&&this.__extends||(l=function(y,L){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,m){w.__proto__=m}||function(w,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(w[S]=m[S])},l(y,L)},function(y,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function w(){this.constructor=y}l(y,L),y.prototype=L===null?Object.create(L):(w.prototype=L.prototype,new w)});Object.defineProperty(n,"__esModule",{value:!0}),n.NoneCharAtlas=n.DynamicCharAtlas=n.getGlyphCacheKey=void 0;var f=g(8803),h=g(9616),b=g(5680),p=g(7001),o=g(6114),c=g(1752),u=g(4774),i=1024,t=1024,e={css:"rgba(0, 0, 0, 0)",rgba:0};function r(y){return y.code<<21|y.bg<<12|y.fg<<3|(y.bold?0:4)+(y.dim?0:2)+(y.italic?0:1)}n.getGlyphCacheKey=r;var s=function(y){function L(w,m){var S=y.call(this)||this;S._config=m,S._drawToCacheCount=0,S._glyphsWaitingOnBitmap=[],S._bitmapCommitTimeout=null,S._bitmap=null,S._cacheCanvas=w.createElement("canvas"),S._cacheCanvas.width=i,S._cacheCanvas.height=t,S._cacheCtx=(0,c.throwIfFalsy)(S._cacheCanvas.getContext("2d",{alpha:!0}));var x=w.createElement("canvas");x.width=S._config.scaledCharWidth,x.height=S._config.scaledCharHeight,S._tmpCtx=(0,c.throwIfFalsy)(x.getContext("2d",{alpha:S._config.allowTransparency})),S._width=Math.floor(i/S._config.scaledCharWidth),S._height=Math.floor(t/S._config.scaledCharHeight);var k=S._width*S._height;return S._cacheMap=new p.LRUMap(k),S._cacheMap.prealloc(k),S}return _(L,y),L.prototype.dispose=function(){this._bitmapCommitTimeout!==null&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},L.prototype.beginFrame=function(){this._drawToCacheCount=0},L.prototype.clear=function(){if(this._cacheMap.size>0){var w=this._width*this._height;this._cacheMap=new p.LRUMap(w),this._cacheMap.prealloc(w)}this._cacheCtx.clearRect(0,0,i,t),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},L.prototype.draw=function(w,m,S,x){if(m.code===32)return!0;if(!this._canCache(m))return!1;var k=r(m),F=this._cacheMap.get(k);if(F!=null)return this._drawFromCache(w,F,S,x),!0;if(this._drawToCacheCount<100){var M;M=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var E=this._drawToCache(m,M);return this._cacheMap.set(k,E),this._drawFromCache(w,E,S,x),!0}return!1},L.prototype._canCache=function(w){return w.code<256},L.prototype._toCoordinateX=function(w){return w%this._width*this._config.scaledCharWidth},L.prototype._toCoordinateY=function(w){return Math.floor(w/this._width)*this._config.scaledCharHeight},L.prototype._drawFromCache=function(w,m,S,x){if(!m.isEmpty){var k=this._toCoordinateX(m.index),F=this._toCoordinateY(m.index);w.drawImage(m.inBitmap?this._bitmap:this._cacheCanvas,k,F,this._config.scaledCharWidth,this._config.scaledCharHeight,S,x,this._config.scaledCharWidth,this._config.scaledCharHeight)}},L.prototype._getColorFromAnsiIndex=function(w){return w<this._config.colors.ansi.length?this._config.colors.ansi[w]:b.DEFAULT_ANSI_COLORS[w]},L.prototype._getBackgroundColor=function(w){return this._config.allowTransparency?e:w.bg===f.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:w.bg<256?this._getColorFromAnsiIndex(w.bg):this._config.colors.background},L.prototype._getForegroundColor=function(w){return w.fg===f.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):w.fg<256?this._getColorFromAnsiIndex(w.fg):this._config.colors.foreground},L.prototype._drawToCache=function(w,m){this._drawToCacheCount++,this._tmpCtx.save();var S=this._getBackgroundColor(w);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=S.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var x=w.bold?this._config.fontWeightBold:this._config.fontWeight,k=w.italic?"italic":"";this._tmpCtx.font=k+" "+x+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline=f.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(w).css,w.dim&&(this._tmpCtx.globalAlpha=f.DIM_OPACITY),this._tmpCtx.fillText(w.chars,0,this._config.scaledCharHeight);var F=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),M=!1;if(this._config.allowTransparency||(M=d(F,S)),M&&w.chars==="_"&&!this._config.allowTransparency)for(var E=1;E<=5&&(this._tmpCtx.fillText(w.chars,0,this._config.scaledCharHeight-E),M=d(F=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),S));E++);this._tmpCtx.restore();var A=this._toCoordinateX(m),I=this._toCoordinateY(m);this._cacheCtx.putImageData(F,A,I);var j={index:m,isEmpty:M,inBitmap:!1};return this._addGlyphToBitmap(j),j},L.prototype._addGlyphToBitmap=function(w){var m=this;!("createImageBitmap"in window)||o.isFirefox||o.isSafari||(this._glyphsWaitingOnBitmap.push(w),this._bitmapCommitTimeout===null&&(this._bitmapCommitTimeout=window.setTimeout(function(){return m._generateBitmap()},100)))},L.prototype._generateBitmap=function(){var w=this,m=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then(function(S){w._bitmap=S;for(var x=0;x<m.length;x++)m[x].inBitmap=!0}),this._bitmapCommitTimeout=null},L}(h.BaseCharAtlas);n.DynamicCharAtlas=s;var a=function(y){function L(w,m){return y.call(this)||this}return _(L,y),L.prototype.draw=function(w,m,S,x){return!1},L}(h.BaseCharAtlas);function d(y,L){for(var w=!0,m=L.rgba>>>24,S=L.rgba>>>16&255,x=L.rgba>>>8&255,k=0;k<y.data.length;k+=4)y.data[k]===m&&y.data[k+1]===S&&y.data[k+2]===x?y.data[k+3]=0:w=!1;return w}n.NoneCharAtlas=a},7001:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.LRUMap=void 0;var g=function(){function l(_){this.capacity=_,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return l.prototype._unlinkNode=function(_){var f=_.prev,h=_.next;_===this._head&&(this._head=h),_===this._tail&&(this._tail=f),f!==null&&(f.next=h),h!==null&&(h.prev=f)},l.prototype._appendNode=function(_){var f=this._tail;f!==null&&(f.next=_),_.prev=f,_.next=null,this._tail=_,this._head===null&&(this._head=_)},l.prototype.prealloc=function(_){for(var f=this._nodePool,h=0;h<_;h++)f.push({prev:null,next:null,key:null,value:null})},l.prototype.get=function(_){var f=this._map[_];return f!==void 0?(this._unlinkNode(f),this._appendNode(f),f.value):null},l.prototype.peekValue=function(_){var f=this._map[_];return f!==void 0?f.value:null},l.prototype.peek=function(){var _=this._head;return _===null?null:_.value},l.prototype.set=function(_,f){var h=this._map[_];if(h!==void 0)h=this._map[_],this._unlinkNode(h),h.value=f;else if(this.size>=this.capacity)h=this._head,this._unlinkNode(h),delete this._map[h.key],h.key=_,h.value=f,this._map[_]=h;else{var b=this._nodePool;b.length>0?((h=b.pop()).key=_,h.value=f):h={prev:null,next:null,key:_,value:f},this._map[_]=h,this.size++}this._appendNode(h)},l}();n.LRUMap=g},1296:function(H,n,g){var l,_=this&&this.__extends||(l=function(w,m){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(S[k]=x[k])},l(w,m)},function(w,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function S(){this.constructor=w}l(w,m),w.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}),f=this&&this.__decorate||function(w,m,S,x){var k,F=arguments.length,M=F<3?m:x===null?x=Object.getOwnPropertyDescriptor(m,S):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(w,m,S,x);else for(var E=w.length-1;E>=0;E--)(k=w[E])&&(M=(F<3?k(M):F>3?k(m,S,M):k(m,S))||M);return F>3&&M&&Object.defineProperty(m,S,M),M},h=this&&this.__param||function(w,m){return function(S,x){m(S,x,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;var b=g(3787),p=g(8803),o=g(844),c=g(4725),u=g(2585),i=g(8460),t=g(4774),e=g(9631),r="xterm-dom-renderer-owner-",s="xterm-fg-",a="xterm-bg-",d="xterm-focus",y=1,L=function(w){function m(S,x,k,F,M,E,A,I,j,N){var z=w.call(this)||this;return z._colors=S,z._element=x,z._screenElement=k,z._viewportElement=F,z._linkifier=M,z._linkifier2=E,z._charSizeService=I,z._optionsService=j,z._bufferService=N,z._terminalClass=y++,z._rowElements=[],z._rowContainer=document.createElement("div"),z._rowContainer.classList.add("xterm-rows"),z._rowContainer.style.lineHeight="normal",z._rowContainer.setAttribute("aria-hidden","true"),z._refreshRowElements(z._bufferService.cols,z._bufferService.rows),z._selectionContainer=document.createElement("div"),z._selectionContainer.classList.add("xterm-selection"),z._selectionContainer.setAttribute("aria-hidden","true"),z.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},z._updateDimensions(),z._injectCss(),z._rowFactory=A.createInstance(b.DomRendererRowFactory,document,z._colors),z._element.classList.add(r+z._terminalClass),z._screenElement.appendChild(z._rowContainer),z._screenElement.appendChild(z._selectionContainer),z._linkifier.onShowLinkUnderline(function(J){return z._onLinkHover(J)}),z._linkifier.onHideLinkUnderline(function(J){return z._onLinkLeave(J)}),z._linkifier2.onShowLinkUnderline(function(J){return z._onLinkHover(J)}),z._linkifier2.onHideLinkUnderline(function(J){return z._onLinkLeave(J)}),z}return _(m,w),Object.defineProperty(m.prototype,"onRequestRedraw",{get:function(){return new i.EventEmitter().event},enumerable:!1,configurable:!0}),m.prototype.dispose=function(){this._element.classList.remove(r+this._terminalClass),(0,e.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement),w.prototype.dispose.call(this)},m.prototype._updateDimensions=function(){this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows;for(var S=0,x=this._rowElements;S<x.length;S++){var k=x[S];k.style.width=this.dimensions.canvasWidth+"px",k.style.height=this.dimensions.actualCellHeight+"px",k.style.lineHeight=this.dimensions.actualCellHeight+"px",k.style.overflow="hidden"}this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var F=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.textContent=F,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},m.prototype.setColors=function(S){this._colors=S,this._injectCss()},m.prototype._injectCss=function(){var S=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var x=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.rawOptions.fontFamily+"; font-size: "+this._optionsService.rawOptions.fontSize+"px;}";x+=this._terminalSelector+" span:not(."+b.BOLD_CLASS+") { font-weight: "+this._optionsService.rawOptions.fontWeight+";}"+this._terminalSelector+" span."+b.BOLD_CLASS+" { font-weight: "+this._optionsService.rawOptions.fontWeightBold+";}"+this._terminalSelector+" span."+b.ITALIC_CLASS+" { font-style: italic;}",x+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",x+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",x+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+":not(."+b.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_BLINK_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.rawOptions.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+b.CURSOR_CLASS+"."+b.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",x+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selectionTransparent.css+";}",this._colors.ansi.forEach(function(k,F){x+=S._terminalSelector+" ."+s+F+" { color: "+k.css+"; }"+S._terminalSelector+" ."+a+F+" { background-color: "+k.css+"; }"}),x+=this._terminalSelector+" ."+s+p.INVERTED_DEFAULT_COLOR+" { color: "+t.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" ."+a+p.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.textContent=x},m.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},m.prototype._refreshRowElements=function(S,x){for(var k=this._rowElements.length;k<=x;k++){var F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>x;)this._rowContainer.removeChild(this._rowElements.pop())},m.prototype.onResize=function(S,x){this._refreshRowElements(S,x),this._updateDimensions()},m.prototype.onCharSizeChanged=function(){this._updateDimensions()},m.prototype.onBlur=function(){this._rowContainer.classList.remove(d)},m.prototype.onFocus=function(){this._rowContainer.classList.add(d)},m.prototype.onSelectionChanged=function(S,x,k){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(S&&x){var F=S[1]-this._bufferService.buffer.ydisp,M=x[1]-this._bufferService.buffer.ydisp,E=Math.max(F,0),A=Math.min(M,this._bufferService.rows-1);if(!(E>=this._bufferService.rows||A<0)){var I=document.createDocumentFragment();if(k)I.appendChild(this._createSelectionElement(E,S[0],x[0],A-E+1));else{var j=F===E?S[0]:0,N=E===M?x[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(E,j,N));var z=A-E-1;if(I.appendChild(this._createSelectionElement(E+1,0,this._bufferService.cols,z)),E!==A){var J=M===A?x[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,J))}}this._selectionContainer.appendChild(I)}}},m.prototype._createSelectionElement=function(S,x,k,F){F===void 0&&(F=1);var M=document.createElement("div");return M.style.height=F*this.dimensions.actualCellHeight+"px",M.style.top=S*this.dimensions.actualCellHeight+"px",M.style.left=x*this.dimensions.actualCellWidth+"px",M.style.width=this.dimensions.actualCellWidth*(k-x)+"px",M},m.prototype.onCursorMove=function(){},m.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},m.prototype.clear=function(){for(var S=0,x=this._rowElements;S<x.length;S++)x[S].innerText=""},m.prototype.renderRows=function(S,x){for(var k=this._bufferService.buffer.ybase+this._bufferService.buffer.y,F=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),M=this._optionsService.rawOptions.cursorBlink,E=S;E<=x;E++){var A=this._rowElements[E];A.innerText="";var I=E+this._bufferService.buffer.ydisp,j=this._bufferService.buffer.lines.get(I),N=this._optionsService.rawOptions.cursorStyle;A.appendChild(this._rowFactory.createRow(j,I,I===k,N,F,M,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(m.prototype,"_terminalSelector",{get:function(){return"."+r+this._terminalClass},enumerable:!1,configurable:!0}),m.prototype._onLinkHover=function(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!0)},m.prototype._onLinkLeave=function(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!1)},m.prototype._setCellUnderline=function(S,x,k,F,M,E){for(;S!==x||k!==F;){var A=this._rowElements[k];if(!A)return;var I=A.children[S];I&&(I.style.textDecoration=E?"underline":"none"),++S>=M&&(S=0,k++)}},f([h(6,u.IInstantiationService),h(7,c.ICharSizeService),h(8,u.IOptionsService),h(9,u.IBufferService)],m)}(o.Disposable);n.DomRenderer=L},3787:function(H,n,g){var l=this&&this.__decorate||function(e,r,s,a){var d,y=arguments.length,L=y<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(e,r,s,a);else for(var w=e.length-1;w>=0;w--)(d=e[w])&&(L=(y<3?d(L):y>3?d(r,s,L):d(r,s))||L);return y>3&&L&&Object.defineProperty(r,s,L),L},_=this&&this.__param||function(e,r){return function(s,a){r(s,a,e)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=n.CURSOR_STYLE_UNDERLINE_CLASS=n.CURSOR_STYLE_BAR_CLASS=n.CURSOR_STYLE_BLOCK_CLASS=n.CURSOR_BLINK_CLASS=n.CURSOR_CLASS=n.STRIKETHROUGH_CLASS=n.UNDERLINE_CLASS=n.ITALIC_CLASS=n.DIM_CLASS=n.BOLD_CLASS=void 0;var f=g(8803),h=g(643),b=g(511),p=g(2585),o=g(4774),c=g(4725),u=g(4269);n.BOLD_CLASS="xterm-bold",n.DIM_CLASS="xterm-dim",n.ITALIC_CLASS="xterm-italic",n.UNDERLINE_CLASS="xterm-underline",n.STRIKETHROUGH_CLASS="xterm-strikethrough",n.CURSOR_CLASS="xterm-cursor",n.CURSOR_BLINK_CLASS="xterm-cursor-blink",n.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",n.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",n.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var i=function(){function e(r,s,a,d,y){this._document=r,this._colors=s,this._characterJoinerService=a,this._optionsService=d,this._coreService=y,this._workCell=new b.CellData}return e.prototype.setColors=function(r){this._colors=r},e.prototype.createRow=function(r,s,a,d,y,L,w,m){for(var S=this._document.createDocumentFragment(),x=this._characterJoinerService.getJoinedCharacters(s),k=0,F=Math.min(r.length,m)-1;F>=0;F--)if(r.loadCell(F,this._workCell).getCode()!==h.NULL_CELL_CODE||a&&F===y){k=F+1;break}for(F=0;F<k;F++){r.loadCell(F,this._workCell);var M=this._workCell.getWidth();if(M!==0){var E=!1,A=F,I=this._workCell;if(x.length>0&&F===x[0][0]){E=!0;var j=x.shift();I=new u.JoinedCellData(this._workCell,r.translateToString(!0,j[0],j[1]),j[1]-j[0]),A=j[1]-1,M=I.getWidth()}var N=this._document.createElement("span");if(M>1&&(N.style.width=w*M+"px"),E&&(N.style.display="inline",y>=F&&y<=A&&(y=F)),!this._coreService.isCursorHidden&&a&&F===y)switch(N.classList.add(n.CURSOR_CLASS),L&&N.classList.add(n.CURSOR_BLINK_CLASS),d){case"bar":N.classList.add(n.CURSOR_STYLE_BAR_CLASS);break;case"underline":N.classList.add(n.CURSOR_STYLE_UNDERLINE_CLASS);break;default:N.classList.add(n.CURSOR_STYLE_BLOCK_CLASS)}I.isBold()&&N.classList.add(n.BOLD_CLASS),I.isItalic()&&N.classList.add(n.ITALIC_CLASS),I.isDim()&&N.classList.add(n.DIM_CLASS),I.isUnderline()&&N.classList.add(n.UNDERLINE_CLASS),I.isInvisible()?N.textContent=h.WHITESPACE_CELL_CHAR:N.textContent=I.getChars()||h.WHITESPACE_CELL_CHAR,I.isStrikethrough()&&N.classList.add(n.STRIKETHROUGH_CLASS);var z=I.getFgColor(),J=I.getFgColorMode(),Y=I.getBgColor(),$=I.getBgColorMode(),R=!!I.isInverse();if(R){var U=z;z=Y,Y=U;var D=J;J=$,$=D}switch(J){case 16777216:case 33554432:I.isBold()&&z<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(z+=8),this._applyMinimumContrast(N,this._colors.background,this._colors.ansi[z])||N.classList.add("xterm-fg-"+z);break;case 50331648:var P=o.rgba.toColor(z>>16&255,z>>8&255,255&z);this._applyMinimumContrast(N,this._colors.background,P)||this._addStyle(N,"color:#"+t(z.toString(16),"0",6));break;default:this._applyMinimumContrast(N,this._colors.background,this._colors.foreground)||R&&N.classList.add("xterm-fg-"+f.INVERTED_DEFAULT_COLOR)}switch($){case 16777216:case 33554432:N.classList.add("xterm-bg-"+Y);break;case 50331648:this._addStyle(N,"background-color:#"+t(Y.toString(16),"0",6));break;default:R&&N.classList.add("xterm-bg-"+f.INVERTED_DEFAULT_COLOR)}S.appendChild(N),F=A}}return S},e.prototype._applyMinimumContrast=function(r,s,a){if(this._optionsService.rawOptions.minimumContrastRatio===1)return!1;var d=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return d===void 0&&(d=o.color.ensureContrastRatio(s,a,this._optionsService.rawOptions.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,d!=null?d:null)),!!d&&(this._addStyle(r,"color:"+d.css),!0)},e.prototype._addStyle=function(r,s){r.setAttribute("style",""+(r.getAttribute("style")||"")+s+";")},l([_(2,c.ICharacterJoinerService),_(3,p.IOptionsService),_(4,p.ICoreService)],e)}();function t(e,r,s){for(;e.length<s;)e=r+e;return e}n.DomRendererRowFactory=i},456:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0;var g=function(){function l(_){this._bufferService=_,this.isSelectAllActive=!1,this.selectionStartLength=0}return l.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(l.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var _=this.selectionStart[0]+this.selectionStartLength;return _>this._bufferService.cols?_%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)-1]:[_%this._bufferService.cols,this.selectionStart[1]+Math.floor(_/this._bufferService.cols)]:[_,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),l.prototype.areSelectionValuesReversed=function(){var _=this.selectionStart,f=this.selectionEnd;return!(!_||!f)&&(_[1]>f[1]||_[1]===f[1]&&_[0]>f[0])},l.prototype.onTrim=function(_){return this.selectionStart&&(this.selectionStart[1]-=_),this.selectionEnd&&(this.selectionEnd[1]-=_),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},l}();n.SelectionModel=g},428:function(H,n,g){var l=this&&this.__decorate||function(o,c,u,i){var t,e=arguments.length,r=e<3?c:i===null?i=Object.getOwnPropertyDescriptor(c,u):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(o,c,u,i);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(r=(e<3?t(r):e>3?t(c,u,r):t(c,u))||r);return e>3&&r&&Object.defineProperty(c,u,r),r},_=this&&this.__param||function(o,c){return function(u,i){c(u,i,o)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;var f=g(2585),h=g(8460),b=function(){function o(c,u,i){this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=new h.EventEmitter,this._measureStrategy=new p(c,u,this._optionsService)}return Object.defineProperty(o.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),o.prototype.measure=function(){var c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())},l([_(2,f.IOptionsService)],o)}();n.CharSizeService=b;var p=function(){function o(c,u,i){this._document=c,this._parentElement=u,this._optionsService=i,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return o.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=this._optionsService.rawOptions.fontSize+"px";var c=this._measureElement.getBoundingClientRect();return c.width!==0&&c.height!==0&&(this._result.width=c.width,this._result.height=Math.ceil(c.height)),this._result},o}()},4269:function(H,n,g){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}),f=this&&this.__decorate||function(t,e,r,s){var a,d=arguments.length,y=d<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(t,e,r,s);else for(var L=t.length-1;L>=0;L--)(a=t[L])&&(y=(d<3?a(y):d>3?a(e,r,y):a(e,r))||y);return d>3&&y&&Object.defineProperty(e,r,y),y},h=this&&this.__param||function(t,e){return function(r,s){e(r,s,t)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;var b=g(3734),p=g(643),o=g(511),c=g(2585),u=function(t){function e(r,s,a){var d=t.call(this)||this;return d.content=0,d.combinedData="",d.fg=r.fg,d.bg=r.bg,d.combinedData=s,d._width=a,d}return _(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(r){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(b.AttributeData);n.JoinedCellData=u;var i=function(){function t(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new o.CellData}return t.prototype.register=function(e){var r={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(r),r.id},t.prototype.deregister=function(e){for(var r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===e)return this._characterJoiners.splice(r,1),!0;return!1},t.prototype.getJoinedCharacters=function(e){if(this._characterJoiners.length===0)return[];var r=this._bufferService.buffer.lines.get(e);if(!r||r.length===0)return[];for(var s=[],a=r.translateToString(!0),d=0,y=0,L=0,w=r.getFg(0),m=r.getBg(0),S=0;S<r.getTrimmedLength();S++)if(r.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==m){if(S-d>1)for(var x=this._getJoinedRanges(a,L,y,r,d),k=0;k<x.length;k++)s.push(x[k]);d=S,L=y,w=this._workCell.fg,m=this._workCell.bg}y+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-d>1)for(x=this._getJoinedRanges(a,L,y,r,d),k=0;k<x.length;k++)s.push(x[k]);return s},t.prototype._getJoinedRanges=function(e,r,s,a,d){var y=e.substring(r,s),L=[];try{L=this._characterJoiners[0].handler(y)}catch(x){console.error(x)}for(var w=1;w<this._characterJoiners.length;w++)try{for(var m=this._characterJoiners[w].handler(y),S=0;S<m.length;S++)t._mergeRanges(L,m[S])}catch(x){console.error(x)}return this._stringRangesToCellRanges(L,a,d),L},t.prototype._stringRangesToCellRanges=function(e,r,s){var a=0,d=!1,y=0,L=e[a];if(L){for(var w=s;w<this._bufferService.cols;w++){var m=r.getWidth(w),S=r.getString(w).length||p.WHITESPACE_CELL_CHAR.length;if(m!==0){if(!d&&L[0]<=y&&(L[0]=w,d=!0),L[1]<=y){if(L[1]=w,!(L=e[++a]))break;L[0]<=y?(L[0]=w,d=!0):d=!1}y+=S}}L&&(L[1]=this._bufferService.cols)}},t._mergeRanges=function(e,r){for(var s=!1,a=0;a<e.length;a++){var d=e[a];if(s){if(r[1]<=d[0])return e[a-1][1]=r[1],e;if(r[1]<=d[1])return e[a-1][1]=Math.max(r[1],d[1]),e.splice(a,1),e;e.splice(a,1),a--}else{if(r[1]<=d[0])return e.splice(a,0,r),e;if(r[1]<=d[1])return d[0]=Math.min(r[0],d[0]),e;r[0]<d[1]&&(d[0]=Math.min(r[0],d[0]),s=!0)}}return s?e[e.length-1][1]=r[1]:e.push(r),e},t=f([h(0,c.IBufferService)],t)}();n.CharacterJoinerService=i},5114:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0;var g=function(){function l(_){this._textarea=_}return Object.defineProperty(l.prototype,"isFocused",{get:function(){return(this._textarea.getRootNode?this._textarea.getRootNode():document).activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),l}();n.CoreBrowserService=g},7641:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Decoration=n.DecorationService=void 0;var b=g(8460),p=g(844),o=g(2585),c=function(i){function t(e){var r=i.call(this)||this;return r._instantiationService=e,r._decorations=[],r}return _(t,i),t.prototype.attachToDom=function(e,r){var s=this;this._renderService=r,this._screenElement=e,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),e.appendChild(this._container),this.register(this._renderService.onRenderedBufferChange(function(){return s.refresh()})),this.register(this._renderService.onDimensionsChange(function(){return s.refresh(!0)}))},t.prototype.registerDecoration=function(e){var r=this;if(!e.marker.isDisposed&&this._container){var s=this._instantiationService.createInstance(u,e,this._container);return this._decorations.push(s),s.onDispose(function(){return r._decorations.splice(r._decorations.indexOf(s),1)}),this._queueRefresh(),s}},t.prototype._queueRefresh=function(){var e=this;this._animationFrame===void 0&&(this._animationFrame=window.requestAnimationFrame(function(){e.refresh(),e._animationFrame=void 0}))},t.prototype.refresh=function(e){if(this._renderService)for(var r=0,s=this._decorations;r<s.length;r++)s[r].render(this._renderService,e)},t.prototype.dispose=function(){for(var e=0,r=this._decorations;e<r.length;e++)r[e].dispose();this._screenElement&&this._container&&this._screenElement.contains(this._container)&&this._screenElement.removeChild(this._container)},f([h(0,o.IInstantiationService)],t)}(p.Disposable);n.DecorationService=c;var u=function(i){function t(e,r,s){var a,d=i.call(this)||this;return d._container=r,d._bufferService=s,d.isDisposed=!1,d._onDispose=new b.EventEmitter,d._onRender=new b.EventEmitter,d.x=(a=e.x)!==null&&a!==void 0?a:0,d._marker=e.marker,d._marker.onDispose(function(){return d.dispose()}),d.anchor=e.anchor||"left",d.width=e.width||1,d.height=e.height||1,d}return _(t,i),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"marker",{get:function(){return this._marker},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),t.prototype.render=function(e,r){this._element&&!r||this._createElement(e,r),this._container&&this._element&&!this._container.contains(this._element)&&this._container.append(this._element),this._refreshStyle(e),this._element&&this._onRender.fire(this._element)},t.prototype._createElement=function(e,r){r&&this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this._element=document.createElement("div"),this._element.classList.add("xterm-decoration"),this._element.style.width=this.width*e.dimensions.actualCellWidth+"px",this._element.style.height=this.height*e.dimensions.actualCellHeight+"px",this._element.style.top=(this.marker.line-this._bufferService.buffers.active.ydisp)*e.dimensions.actualCellHeight+"px",this._element.style.lineHeight=e.dimensions.actualCellHeight+"px",this.x&&this.x>this._bufferService.cols&&(this._element.style.display="none"),this.anchor==="right"?this._element.style.right=this.x?this.x*e.dimensions.actualCellWidth+"px":"":this._element.style.left=this.x?this.x*e.dimensions.actualCellWidth+"px":""},t.prototype._refreshStyle=function(e){if(this._element){var r=this.marker.line-this._bufferService.buffers.active.ydisp;r<0||r>this._bufferService.rows?this._element.style.display="none":(this._element.style.top=r*e.dimensions.actualCellHeight+"px",this._element.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block")}},t.prototype.dispose=function(){this.isDisposed||(this._element&&this._container.contains(this._element)&&this._container.removeChild(this._element),this.isDisposed=!0,this._onDispose.fire())},f([h(2,o.IBufferService)],t)}(p.Disposable);n.Decoration=u},8934:function(H,n,g){var l=this&&this.__decorate||function(p,o,c,u){var i,t=arguments.length,e=t<3?o:u===null?u=Object.getOwnPropertyDescriptor(o,c):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")e=Reflect.decorate(p,o,c,u);else for(var r=p.length-1;r>=0;r--)(i=p[r])&&(e=(t<3?i(e):t>3?i(o,c,e):i(o,c))||e);return t>3&&e&&Object.defineProperty(o,c,e),e},_=this&&this.__param||function(p,o){return function(c,u){o(c,u,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;var f=g(4725),h=g(9806),b=function(){function p(o,c){this._renderService=o,this._charSizeService=c}return p.prototype.getCoords=function(o,c,u,i,t){return(0,h.getCoords)(o,c,u,i,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,t)},p.prototype.getRawByteCoords=function(o,c,u,i){var t=this.getCoords(o,c,u,i);return(0,h.getRawByteCoords)(t)},l([_(0,f.IRenderService),_(1,f.ICharSizeService)],p)}();n.MouseService=b},3230:function(H,n,g){var l,_=this&&this.__extends||(l=function(r,s){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(a[y]=d[y])},l(r,s)},function(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function a(){this.constructor=r}l(r,s),r.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}),f=this&&this.__decorate||function(r,s,a,d){var y,L=arguments.length,w=L<3?s:d===null?d=Object.getOwnPropertyDescriptor(s,a):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(r,s,a,d);else for(var m=r.length-1;m>=0;m--)(y=r[m])&&(w=(L<3?y(w):L>3?y(s,a,w):y(s,a))||w);return L>3&&w&&Object.defineProperty(s,a,w),w},h=this&&this.__param||function(r,s){return function(a,d){s(a,d,r)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;var b=g(6193),p=g(8460),o=g(844),c=g(5596),u=g(3656),i=g(2585),t=g(4725),e=function(r){function s(a,d,y,L,w,m){var S=r.call(this)||this;if(S._renderer=a,S._rowCount=d,S._charSizeService=w,S._isPaused=!1,S._needsFullRefresh=!1,S._isNextRenderRedrawOnly=!0,S._needsSelectionRefresh=!1,S._canvasWidth=0,S._canvasHeight=0,S._selectionState={start:void 0,end:void 0,columnSelectMode:!1},S._onDimensionsChange=new p.EventEmitter,S._onRender=new p.EventEmitter,S._onRefreshRequest=new p.EventEmitter,S.register({dispose:function(){return S._renderer.dispose()}}),S._renderDebouncer=new b.RenderDebouncer(function(k,F){return S._renderRows(k,F)}),S.register(S._renderDebouncer),S._screenDprMonitor=new c.ScreenDprMonitor,S._screenDprMonitor.setListener(function(){return S.onDevicePixelRatioChange()}),S.register(S._screenDprMonitor),S.register(m.onResize(function(){return S._fullRefresh()})),S.register(m.buffers.onBufferActivate(function(){var k;return(k=S._renderer)===null||k===void 0?void 0:k.clear()})),S.register(L.onOptionChange(function(){return S._renderer.onOptionsChanged()})),S.register(S._charSizeService.onCharSizeChange(function(){return S.onCharSizeChanged()})),S._renderer.onRequestRedraw(function(k){return S.refreshRows(k.start,k.end,!0)}),S.register((0,u.addDisposableDomListener)(window,"resize",function(){return S.onDevicePixelRatioChange()})),"IntersectionObserver"in window){var x=new IntersectionObserver(function(k){return S._onIntersectionChange(k[k.length-1])},{threshold:0});x.observe(y),S.register({dispose:function(){return x.disconnect()}})}return S}return _(s,r),Object.defineProperty(s.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),s.prototype._onIntersectionChange=function(a){this._isPaused=a.isIntersecting===void 0?a.intersectionRatio===0:!a.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},s.prototype.refreshRows=function(a,d,y){y===void 0&&(y=!1),this._isPaused?this._needsFullRefresh=!0:(y||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(a,d,this._rowCount))},s.prototype._renderRows=function(a,d){this._renderer.renderRows(a,d),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:a,end:d}),this._isNextRenderRedrawOnly=!0},s.prototype.resize=function(a,d){this._rowCount=d,this._fireOnCanvasResize()},s.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},s.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},s.prototype.dispose=function(){r.prototype.dispose.call(this)},s.prototype.setRenderer=function(a){var d=this;this._renderer.dispose(),this._renderer=a,this._renderer.onRequestRedraw(function(y){return d.refreshRows(y.start,y.end,!0)}),this._needsSelectionRefresh=!0,this._fullRefresh()},s.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},s.prototype.clearTextureAtlas=function(){var a,d;(d=(a=this._renderer)===null||a===void 0?void 0:a.clearTextureAtlas)===null||d===void 0||d.call(a),this._fullRefresh()},s.prototype.setColors=function(a){this._renderer.setColors(a),this._fullRefresh()},s.prototype.onDevicePixelRatioChange=function(){this._charSizeService.measure(),this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},s.prototype.onResize=function(a,d){this._renderer.onResize(a,d),this._fullRefresh()},s.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},s.prototype.onBlur=function(){this._renderer.onBlur()},s.prototype.onFocus=function(){this._renderer.onFocus()},s.prototype.onSelectionChanged=function(a,d,y){this._selectionState.start=a,this._selectionState.end=d,this._selectionState.columnSelectMode=y,this._renderer.onSelectionChanged(a,d,y)},s.prototype.onCursorMove=function(){this._renderer.onCursorMove()},s.prototype.clear=function(){this._renderer.clear()},f([h(3,i.IOptionsService),h(4,t.ICharSizeService),h(5,i.IBufferService)],s)}(o.Disposable);n.RenderService=e},9312:function(H,n,g){var l,_=this&&this.__extends||(l=function(L,w){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(m[x]=S[x])},l(L,w)},function(L,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function m(){this.constructor=L}l(L,w),L.prototype=w===null?Object.create(w):(m.prototype=w.prototype,new m)}),f=this&&this.__decorate||function(L,w,m,S){var x,k=arguments.length,F=k<3?w:S===null?S=Object.getOwnPropertyDescriptor(w,m):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(L,w,m,S);else for(var M=L.length-1;M>=0;M--)(x=L[M])&&(F=(k<3?x(F):k>3?x(w,m,F):x(w,m))||F);return k>3&&F&&Object.defineProperty(w,m,F),F},h=this&&this.__param||function(L,w){return function(m,S){w(m,S,L)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;var b=g(6114),p=g(456),o=g(511),c=g(8460),u=g(4725),i=g(2585),t=g(9806),e=g(9504),r=g(844),s=g(4841),a=String.fromCharCode(160),d=new RegExp(a,"g"),y=function(L){function w(m,S,x,k,F,M,E,A){var I=L.call(this)||this;return I._element=m,I._screenElement=S,I._linkifier=x,I._bufferService=k,I._coreService=F,I._mouseService=M,I._optionsService=E,I._renderService=A,I._dragScrollAmount=0,I._enabled=!0,I._workCell=new o.CellData,I._mouseDownTimeStamp=0,I._oldHasSelection=!1,I._oldSelectionStart=void 0,I._oldSelectionEnd=void 0,I._onLinuxMouseSelection=I.register(new c.EventEmitter),I._onRedrawRequest=I.register(new c.EventEmitter),I._onSelectionChange=I.register(new c.EventEmitter),I._onRequestScrollLines=I.register(new c.EventEmitter),I._mouseMoveListener=function(j){return I._onMouseMove(j)},I._mouseUpListener=function(j){return I._onMouseUp(j)},I._coreService.onUserInput(function(){I.hasSelection&&I.clearSelection()}),I._trimListener=I._bufferService.buffer.lines.onTrim(function(j){return I._onTrim(j)}),I.register(I._bufferService.buffers.onBufferActivate(function(j){return I._onBufferActivate(j)})),I.enable(),I._model=new p.SelectionModel(I._bufferService),I._activeSelectionMode=0,I}return _(w,L),Object.defineProperty(w.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),w.prototype.dispose=function(){this._removeMouseDownListeners()},w.prototype.reset=function(){this.clearSelection()},w.prototype.disable=function(){this.clearSelection(),this._enabled=!1},w.prototype.enable=function(){this._enabled=!0},Object.defineProperty(w.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"hasSelection",{get:function(){var m=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!m||!S||m[0]===S[0]&&m[1]===S[1])},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"selectionText",{get:function(){var m=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;if(!m||!S)return"";var x=this._bufferService.buffer,k=[];if(this._activeSelectionMode===3){if(m[0]===S[0])return"";for(var F=m[1];F<=S[1];F++){var M=x.translateBufferLineToString(F,!0,m[0],S[0]);k.push(M)}}else{var E=m[1]===S[1]?S[0]:void 0;for(k.push(x.translateBufferLineToString(m[1],!0,m[0],E)),F=m[1]+1;F<=S[1]-1;F++){var A=x.lines.get(F);M=x.translateBufferLineToString(F,!0),A!=null&&A.isWrapped?k[k.length-1]+=M:k.push(M)}m[1]!==S[1]&&(A=x.lines.get(S[1]),M=x.translateBufferLineToString(S[1],!0,0,S[0]),A&&A.isWrapped?k[k.length-1]+=M:k.push(M))}return k.map(function(I){return I.replace(d," ")}).join(b.isWindows?`\r
`:`
`)},enumerable:!1,configurable:!0}),w.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},w.prototype.refresh=function(m){var S=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return S._refresh()})),b.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},w.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})},w.prototype._isClickInSelection=function(m){var S=this._getMouseBufferCoords(m),x=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!!(x&&k&&S)&&this._areCoordsInSelection(S,x,k)},w.prototype._areCoordsInSelection=function(m,S,x){return m[1]>S[1]&&m[1]<x[1]||S[1]===x[1]&&m[1]===S[1]&&m[0]>=S[0]&&m[0]<x[0]||S[1]<x[1]&&m[1]===x[1]&&m[0]<x[0]||S[1]<x[1]&&m[1]===S[1]&&m[0]>=S[0]},w.prototype._selectWordAtCursor=function(m,S){var x,k,F=(k=(x=this._linkifier.currentLink)===null||x===void 0?void 0:x.link)===null||k===void 0?void 0:k.range;if(F)return this._model.selectionStart=[F.start.x-1,F.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(F,this._bufferService.cols),this._model.selectionEnd=void 0,!0;var M=this._getMouseBufferCoords(m);return!!M&&(this._selectWordAt(M,S),this._model.selectionEnd=void 0,!0)},w.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},w.prototype.selectLines=function(m,S){this._model.clearSelection(),m=Math.max(m,0),S=Math.min(S,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,S],this.refresh(),this._onSelectionChange.fire()},w.prototype._onTrim=function(m){this._model.onTrim(m)&&this.refresh()},w.prototype._getMouseBufferCoords=function(m){var S=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(S)return S[0]--,S[1]--,S[1]+=this._bufferService.buffer.ydisp,S},w.prototype._getMouseEventScrollAmount=function(m){var S=(0,t.getCoordsRelativeToElement)(m,this._screenElement)[1],x=this._renderService.dimensions.canvasHeight;return S>=0&&S<=x?0:(S>x&&(S-=x),S=Math.min(Math.max(S,-50),50),(S/=50)/Math.abs(S)+Math.round(14*S))},w.prototype.shouldForceSelection=function(m){return b.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey},w.prototype.onMouseDown=function(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._onIncrementalClick(m):m.detail===1?this._onSingleClick(m):m.detail===2?this._onDoubleClick(m):m.detail===3&&this._onTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}},w.prototype._addMouseDownListeners=function(){var m=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval(function(){return m._dragScroll()},50)},w.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},w.prototype._onIncrementalClick=function(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))},w.prototype._onSingleClick=function(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),this._model.selectionStart){this._model.selectionEnd=void 0;var S=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);S&&S.length!==this._model.selectionStart[0]&&S.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}},w.prototype._onDoubleClick=function(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)},w.prototype._onTripleClick=function(m){var S=this._getMouseBufferCoords(m);S&&(this._activeSelectionMode=2,this._selectLineAt(S[1]))},w.prototype.shouldColumnSelect=function(m){return m.altKey&&!(b.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)},w.prototype._onMouseMove=function(m){if(m.stopImmediatePropagation(),this._model.selectionStart){var S=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),this._model.selectionEnd){this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var x=this._bufferService.buffer;if(this._model.selectionEnd[1]<x.lines.length){var k=x.lines.get(this._model.selectionEnd[1]);k&&k.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}S&&S[0]===this._model.selectionEnd[0]&&S[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},w.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}},w.prototype._onMouseUp=function(m){var S=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&S<500&&m.altKey&&this._optionsService.getOption("altClickMovesCursor")){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var x=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(x&&x[0]!==void 0&&x[1]!==void 0){var k=(0,e.moveToCellSequence)(x[0]-1,x[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(k,!0)}}}else this._fireEventIfSelectionChanged()},w.prototype._fireEventIfSelectionChanged=function(){var m=this._model.finalSelectionStart,S=this._model.finalSelectionEnd,x=!(!m||!S||m[0]===S[0]&&m[1]===S[1]);x?m&&S&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&S[0]===this._oldSelectionEnd[0]&&S[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,S,x)):this._oldHasSelection&&this._fireOnSelectionChange(m,S,x)},w.prototype._fireOnSelectionChange=function(m,S,x){this._oldSelectionStart=m,this._oldSelectionEnd=S,this._oldHasSelection=x,this._onSelectionChange.fire()},w.prototype._onBufferActivate=function(m){var S=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(function(x){return S._onTrim(x)})},w.prototype._convertViewportColToCharacterIndex=function(m,S){for(var x=S[0],k=0;S[0]>=k;k++){var F=m.loadCell(k,this._workCell).getChars().length;this._workCell.getWidth()===0?x--:F>1&&S[0]!==k&&(x+=F-1)}return x},w.prototype.setSelection=function(m,S,x){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,S],this._model.selectionStartLength=x,this.refresh()},w.prototype.rightClickSelect=function(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())},w.prototype._getWordAt=function(m,S,x,k){if(x===void 0&&(x=!0),k===void 0&&(k=!0),!(m[0]>=this._bufferService.cols)){var F=this._bufferService.buffer,M=F.lines.get(m[1]);if(M){var E=F.translateBufferLineToString(m[1],!1),A=this._convertViewportColToCharacterIndex(M,m),I=A,j=m[0]-A,N=0,z=0,J=0,Y=0;if(E.charAt(A)===" "){for(;A>0&&E.charAt(A-1)===" ";)A--;for(;I<E.length&&E.charAt(I+1)===" ";)I++}else{var $=m[0],R=m[0];M.getWidth($)===0&&(N++,$--),M.getWidth(R)===2&&(z++,R++);var U=M.getString(R).length;for(U>1&&(Y+=U-1,I+=U-1);$>0&&A>0&&!this._isCharWordSeparator(M.loadCell($-1,this._workCell));){M.loadCell($-1,this._workCell);var D=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,$--):D>1&&(J+=D-1,A-=D-1),A--,$--}for(;R<M.length&&I+1<E.length&&!this._isCharWordSeparator(M.loadCell(R+1,this._workCell));){M.loadCell(R+1,this._workCell);var P=this._workCell.getChars().length;this._workCell.getWidth()===2?(z++,R++):P>1&&(Y+=P-1,I+=P-1),I++,R++}}I++;var T=A+j-N+J,V=Math.min(this._bufferService.cols,I-A+N+z-J-Y);if(S||E.slice(A,I).trim()!==""){if(x&&T===0&&M.getCodePoint(0)!==32){var G=F.lines.get(m[1]-1);if(G&&M.isWrapped&&G.getCodePoint(this._bufferService.cols-1)!==32){var X=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(X){var Q=this._bufferService.cols-X.start;T-=Q,V+=Q}}}if(k&&T+V===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){var ee=F.lines.get(m[1]+1);if((ee==null?void 0:ee.isWrapped)&&ee.getCodePoint(0)!==32){var le=this._getWordAt([0,m[1]+1],!1,!1,!0);le&&(V+=le.length)}}return{start:T,length:V}}}}},w.prototype._selectWordAt=function(m,S){var x=this._getWordAt(m,S);if(x){for(;x.start<0;)x.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[x.start,m[1]],this._model.selectionStartLength=x.length}},w.prototype._selectToWordAt=function(m){var S=this._getWordAt(m,!0);if(S){for(var x=m[1];S.start<0;)S.start+=this._bufferService.cols,x--;if(!this._model.areSelectionValuesReversed())for(;S.start+S.length>this._bufferService.cols;)S.length-=this._bufferService.cols,x++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?S.start:S.start+S.length,x]}},w.prototype._isCharWordSeparator=function(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0},w.prototype._selectLineAt=function(m){var S=this._bufferService.buffer.getWrappedRangeForLine(m);this._model.selectionStart=[0,S.first],this._model.selectionEnd=[this._bufferService.cols,S.last],this._model.selectionStartLength=0},f([h(3,i.IBufferService),h(4,i.ICoreService),h(5,u.IMouseService),h(6,i.IOptionsService),h(7,u.IRenderService)],w)}(r.Disposable);n.SelectionService=y},4725:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.ICharacterJoinerService=n.ISoundService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;var l=g(8343);n.ICharSizeService=(0,l.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,l.createDecorator)("CoreBrowserService"),n.IMouseService=(0,l.createDecorator)("MouseService"),n.IRenderService=(0,l.createDecorator)("RenderService"),n.ISelectionService=(0,l.createDecorator)("SelectionService"),n.ISoundService=(0,l.createDecorator)("SoundService"),n.ICharacterJoinerService=(0,l.createDecorator)("CharacterJoinerService"),n.IDecorationService=(0,l.createDecorator)("DecorationService")},357:function(H,n,g){var l=this&&this.__decorate||function(b,p,o,c){var u,i=arguments.length,t=i<3?p:c===null?c=Object.getOwnPropertyDescriptor(p,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(b,p,o,c);else for(var e=b.length-1;e>=0;e--)(u=b[e])&&(t=(i<3?u(t):i>3?u(p,o,t):u(p,o))||t);return i>3&&t&&Object.defineProperty(p,o,t),t},_=this&&this.__param||function(b,p){return function(o,c){p(o,c,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SoundService=void 0;var f=g(2585),h=function(){function b(p){this._optionsService=p}return Object.defineProperty(b,"audioContext",{get:function(){if(!b._audioContext){var p=window.AudioContext||window.webkitAudioContext;if(!p)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;b._audioContext=new p}return b._audioContext},enumerable:!1,configurable:!0}),b.prototype.playBellSound=function(){var p=b.audioContext;if(p){var o=p.createBufferSource();p.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.rawOptions.bellSound)),function(c){o.buffer=c,o.connect(p.destination),o.start(0)})}},b.prototype._base64ToArrayBuffer=function(p){for(var o=window.atob(p),c=o.length,u=new Uint8Array(c),i=0;i<c;i++)u[i]=o.charCodeAt(i);return u.buffer},b.prototype._removeMimeType=function(p){return p.split(",")[1]},b=l([_(0,f.IOptionsService)],b)}();n.SoundService=h},6349:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;var l=g(8460),_=function(){function f(h){this._maxLength=h,this.onDeleteEmitter=new l.EventEmitter,this.onInsertEmitter=new l.EventEmitter,this.onTrimEmitter=new l.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(f.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var b=new Array(h),p=0;p<Math.min(h,this.length);p++)b[p]=this._array[this._getCyclicIndex(p)];this._array=b,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var b=this._length;b<h;b++)this._array[b]=void 0;this._length=h},enumerable:!1,configurable:!0}),f.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},f.prototype.set=function(h,b){this._array[this._getCyclicIndex(h)]=b},f.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},f.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(f.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),f.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},f.prototype.splice=function(h,b){for(var p=[],o=2;o<arguments.length;o++)p[o-2]=arguments[o];if(b){for(var c=h;c<this._length-b;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+b)];this._length-=b,this.onDeleteEmitter.fire({index:h,amount:b})}for(c=this._length-1;c>=h;c--)this._array[this._getCyclicIndex(c+p.length)]=this._array[this._getCyclicIndex(c)];for(c=0;c<p.length;c++)this._array[this._getCyclicIndex(h+c)]=p[c];if(p.length&&this.onInsertEmitter.fire({index:h,amount:p.length}),this._length+p.length>this._maxLength){var u=this._length+p.length-this._maxLength;this._startIndex+=u,this._length=this._maxLength,this.onTrimEmitter.fire(u)}else this._length+=p.length},f.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},f.prototype.shiftElements=function(h,b,p){if(!(b<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+p<0)throw new Error("Cannot shift elements in list beyond index 0");if(p>0){for(var o=b-1;o>=0;o--)this.set(h+o+p,this.get(h+o));var c=h+b+p-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(o=0;o<b;o++)this.set(h+o+p,this.get(h+o))}},f.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},f}();n.CircularList=_},1439:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function g(l,_){if(_===void 0&&(_=5),typeof l!="object")return l;var f=Array.isArray(l)?[]:{};for(var h in l)f[h]=_<=1?l[h]:l[h]&&g(l[h],_-1);return f}},8969:function(H,n,g){var l,_=this&&this.__extends||(l=function(m,S){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,k){x.__proto__=k}||function(x,k){for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(x[F]=k[F])},l(m,S)},function(m,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function x(){this.constructor=m}l(m,S),m.prototype=S===null?Object.create(S):(x.prototype=S.prototype,new x)});Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;var f=g(844),h=g(2585),b=g(4348),p=g(7866),o=g(744),c=g(7302),u=g(6975),i=g(8460),t=g(1753),e=g(3730),r=g(1480),s=g(7994),a=g(9282),d=g(5435),y=g(5981),L=!1,w=function(m){function S(x){var k=m.call(this)||this;return k._onBinary=new i.EventEmitter,k._onData=new i.EventEmitter,k._onLineFeed=new i.EventEmitter,k._onResize=new i.EventEmitter,k._onScroll=new i.EventEmitter,k._instantiationService=new b.InstantiationService,k.optionsService=new c.OptionsService(x),k._instantiationService.setService(h.IOptionsService,k.optionsService),k._bufferService=k.register(k._instantiationService.createInstance(o.BufferService)),k._instantiationService.setService(h.IBufferService,k._bufferService),k._logService=k._instantiationService.createInstance(p.LogService),k._instantiationService.setService(h.ILogService,k._logService),k.coreService=k.register(k._instantiationService.createInstance(u.CoreService,function(){return k.scrollToBottom()})),k._instantiationService.setService(h.ICoreService,k.coreService),k.coreMouseService=k._instantiationService.createInstance(t.CoreMouseService),k._instantiationService.setService(h.ICoreMouseService,k.coreMouseService),k._dirtyRowService=k._instantiationService.createInstance(e.DirtyRowService),k._instantiationService.setService(h.IDirtyRowService,k._dirtyRowService),k.unicodeService=k._instantiationService.createInstance(r.UnicodeService),k._instantiationService.setService(h.IUnicodeService,k.unicodeService),k._charsetService=k._instantiationService.createInstance(s.CharsetService),k._instantiationService.setService(h.ICharsetService,k._charsetService),k._inputHandler=new d.InputHandler(k._bufferService,k._charsetService,k.coreService,k._dirtyRowService,k._logService,k.optionsService,k.coreMouseService,k.unicodeService),k.register((0,i.forwardEvent)(k._inputHandler.onLineFeed,k._onLineFeed)),k.register(k._inputHandler),k.register((0,i.forwardEvent)(k._bufferService.onResize,k._onResize)),k.register((0,i.forwardEvent)(k.coreService.onData,k._onData)),k.register((0,i.forwardEvent)(k.coreService.onBinary,k._onBinary)),k.register(k.optionsService.onOptionChange(function(F){return k._updateOptions(F)})),k.register(k._bufferService.onScroll(function(F){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k.register(k._inputHandler.onScroll(function(F){k._onScroll.fire({position:k._bufferService.buffer.ydisp,source:0}),k._dirtyRowService.markRangeDirty(k._bufferService.buffer.scrollTop,k._bufferService.buffer.scrollBottom)})),k._writeBuffer=new y.WriteBuffer(function(F,M){return k._inputHandler.parse(F,M)}),k}return _(S,m),Object.defineProperty(S.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"onScroll",{get:function(){var x=this;return this._onScrollApi||(this._onScrollApi=new i.EventEmitter,this.register(this._onScroll.event(function(k){var F;(F=x._onScrollApi)===null||F===void 0||F.fire(k.position)}))),this._onScrollApi.event},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"options",{get:function(){return this.optionsService.options},set:function(x){for(var k in x)this.optionsService.options[k]=x[k]},enumerable:!1,configurable:!0}),S.prototype.dispose=function(){var x;this._isDisposed||(m.prototype.dispose.call(this),(x=this._windowsMode)===null||x===void 0||x.dispose(),this._windowsMode=void 0)},S.prototype.write=function(x,k){this._writeBuffer.write(x,k)},S.prototype.writeSync=function(x,k){this._logService.logLevel<=h.LogLevelEnum.WARN&&!L&&(this._logService.warn("writeSync is unreliable and will be removed soon."),L=!0),this._writeBuffer.writeSync(x,k)},S.prototype.resize=function(x,k){isNaN(x)||isNaN(k)||(x=Math.max(x,o.MINIMUM_COLS),k=Math.max(k,o.MINIMUM_ROWS),this._bufferService.resize(x,k))},S.prototype.scroll=function(x,k){k===void 0&&(k=!1),this._bufferService.scroll(x,k)},S.prototype.scrollLines=function(x,k,F){this._bufferService.scrollLines(x,k,F)},S.prototype.scrollPages=function(x){this._bufferService.scrollPages(x)},S.prototype.scrollToTop=function(){this._bufferService.scrollToTop()},S.prototype.scrollToBottom=function(){this._bufferService.scrollToBottom()},S.prototype.scrollToLine=function(x){this._bufferService.scrollToLine(x)},S.prototype.registerEscHandler=function(x,k){return this._inputHandler.registerEscHandler(x,k)},S.prototype.registerDcsHandler=function(x,k){return this._inputHandler.registerDcsHandler(x,k)},S.prototype.registerCsiHandler=function(x,k){return this._inputHandler.registerCsiHandler(x,k)},S.prototype.registerOscHandler=function(x,k){return this._inputHandler.registerOscHandler(x,k)},S.prototype._setup=function(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()},S.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()},S.prototype._updateOptions=function(x){var k;switch(x){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.rawOptions.windowsMode?this._enableWindowsMode():((k=this._windowsMode)===null||k===void 0||k.dispose(),this._windowsMode=void 0)}},S.prototype._enableWindowsMode=function(){var x=this;if(!this._windowsMode){var k=[];k.push(this.onLineFeed(a.updateWindowsModeWrappedState.bind(null,this._bufferService))),k.push(this.registerCsiHandler({final:"H"},function(){return(0,a.updateWindowsModeWrappedState)(x._bufferService),!1})),this._windowsMode={dispose:function(){for(var F=0,M=k;F<M.length;F++)M[F].dispose()}}}},S}(f.Disposable);n.CoreTerminal=w},8460:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0;var g=function(){function l(){this._listeners=[],this._disposed=!1}return Object.defineProperty(l.prototype,"event",{get:function(){var _=this;return this._event||(this._event=function(f){return _._listeners.push(f),{dispose:function(){if(!_._disposed){for(var h=0;h<_._listeners.length;h++)if(_._listeners[h]===f)return void _._listeners.splice(h,1)}}}}),this._event},enumerable:!1,configurable:!0}),l.prototype.fire=function(_,f){for(var h=[],b=0;b<this._listeners.length;b++)h.push(this._listeners[b]);for(b=0;b<h.length;b++)h[b].call(void 0,_,f)},l.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},l}();n.EventEmitter=g,n.forwardEvent=function(l,_){return l(function(f){return _.fire(f)})}},5435:function(H,n,g){var l,_=this&&this.__extends||(l=function(F,M){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var I in A)Object.prototype.hasOwnProperty.call(A,I)&&(E[I]=A[I])},l(F,M)},function(F,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");function E(){this.constructor=F}l(F,M),F.prototype=M===null?Object.create(M):(E.prototype=M.prototype,new E)});Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;var f,h=g(2584),b=g(7116),p=g(2015),o=g(844),c=g(8273),u=g(482),i=g(8437),t=g(8460),e=g(643),r=g(511),s=g(3734),a=g(2585),d=g(6242),y=g(6351),L=g(5941),w={"(":0,")":1,"*":2,"+":3,"-":1,".":2},m=131072;function S(F,M){if(F>24)return M.setWinLines||!1;switch(F){case 1:return!!M.restoreWin;case 2:return!!M.minimizeWin;case 3:return!!M.setWinPosition;case 4:return!!M.setWinSizePixels;case 5:return!!M.raiseWin;case 6:return!!M.lowerWin;case 7:return!!M.refreshWin;case 8:return!!M.setWinSizeChars;case 9:return!!M.maximizeWin;case 10:return!!M.fullscreenWin;case 11:return!!M.getWinState;case 13:return!!M.getWinPosition;case 14:return!!M.getWinSizePixels;case 15:return!!M.getScreenSizePixels;case 16:return!!M.getCellSizePixels;case 18:return!!M.getWinSizeChars;case 19:return!!M.getScreenSizeChars;case 20:return!!M.getIconTitle;case 21:return!!M.getWinTitle;case 22:return!!M.pushTitle;case 23:return!!M.popTitle;case 24:return!!M.setWinLines}return!1}(function(F){F[F.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",F[F.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(f=n.WindowsOptionsReportType||(n.WindowsOptionsReportType={}));var x=function(){function F(M,E,A,I){this._bufferService=M,this._coreService=E,this._logService=A,this._optionsService=I,this._data=new Uint32Array(0)}return F.prototype.hook=function(M){this._data=new Uint32Array(0)},F.prototype.put=function(M,E,A){this._data=(0,c.concat)(this._data,M.subarray(E,A))},F.prototype.unhook=function(M){if(!M)return this._data=new Uint32Array(0),!0;var E=(0,u.utf32ToString)(this._data);switch(this._data=new Uint32Array(0),E){case'"q':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r0"q'+h.C0.ESC+"\\");break;case'"p':this._coreService.triggerDataEvent(h.C0.ESC+'P1$r61;1"p'+h.C0.ESC+"\\");break;case"r":var A=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+A+h.C0.ESC+"\\");break;case"m":this._coreService.triggerDataEvent(h.C0.ESC+"P1$r0m"+h.C0.ESC+"\\");break;case" q":var I={block:2,underline:4,bar:6}[this._optionsService.rawOptions.cursorStyle];I-=this._optionsService.rawOptions.cursorBlink?1:0,this._coreService.triggerDataEvent(h.C0.ESC+"P1$r"+I+" q"+h.C0.ESC+"\\");break;default:this._logService.debug("Unknown DCS $q %s",E),this._coreService.triggerDataEvent(h.C0.ESC+"P0$r"+h.C0.ESC+"\\")}return!0},F}(),k=function(F){function M(E,A,I,j,N,z,J,Y,$){$===void 0&&($=new p.EscapeSequenceParser);var R=F.call(this)||this;R._bufferService=E,R._charsetService=A,R._coreService=I,R._dirtyRowService=j,R._logService=N,R._optionsService=z,R._coreMouseService=J,R._unicodeService=Y,R._parser=$,R._parseBuffer=new Uint32Array(4096),R._stringDecoder=new u.StringToUtf32,R._utf8Decoder=new u.Utf8ToUtf32,R._workCell=new r.CellData,R._windowTitle="",R._iconName="",R._windowTitleStack=[],R._iconNameStack=[],R._curAttrData=i.DEFAULT_ATTR_DATA.clone(),R._eraseAttrDataInternal=i.DEFAULT_ATTR_DATA.clone(),R._onRequestBell=new t.EventEmitter,R._onRequestRefreshRows=new t.EventEmitter,R._onRequestReset=new t.EventEmitter,R._onRequestSendFocus=new t.EventEmitter,R._onRequestSyncScrollBar=new t.EventEmitter,R._onRequestWindowsOptionsReport=new t.EventEmitter,R._onA11yChar=new t.EventEmitter,R._onA11yTab=new t.EventEmitter,R._onCursorMove=new t.EventEmitter,R._onLineFeed=new t.EventEmitter,R._onScroll=new t.EventEmitter,R._onTitleChange=new t.EventEmitter,R._onColor=new t.EventEmitter,R._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},R._specialColors=[256,257,258],R.register(R._parser),R._activeBuffer=R._bufferService.buffer,R.register(R._bufferService.buffers.onBufferActivate(function(T){return R._activeBuffer=T.activeBuffer})),R._parser.setCsiHandlerFallback(function(T,V){R._logService.debug("Unknown CSI code: ",{identifier:R._parser.identToString(T),params:V.toArray()})}),R._parser.setEscHandlerFallback(function(T){R._logService.debug("Unknown ESC code: ",{identifier:R._parser.identToString(T)})}),R._parser.setExecuteHandlerFallback(function(T){R._logService.debug("Unknown EXECUTE code: ",{code:T})}),R._parser.setOscHandlerFallback(function(T,V,G){R._logService.debug("Unknown OSC code: ",{identifier:T,action:V,data:G})}),R._parser.setDcsHandlerFallback(function(T,V,G){V==="HOOK"&&(G=G.toArray()),R._logService.debug("Unknown DCS code: ",{identifier:R._parser.identToString(T),action:V,payload:G})}),R._parser.setPrintHandler(function(T,V,G){return R.print(T,V,G)}),R._parser.registerCsiHandler({final:"@"},function(T){return R.insertChars(T)}),R._parser.registerCsiHandler({intermediates:" ",final:"@"},function(T){return R.scrollLeft(T)}),R._parser.registerCsiHandler({final:"A"},function(T){return R.cursorUp(T)}),R._parser.registerCsiHandler({intermediates:" ",final:"A"},function(T){return R.scrollRight(T)}),R._parser.registerCsiHandler({final:"B"},function(T){return R.cursorDown(T)}),R._parser.registerCsiHandler({final:"C"},function(T){return R.cursorForward(T)}),R._parser.registerCsiHandler({final:"D"},function(T){return R.cursorBackward(T)}),R._parser.registerCsiHandler({final:"E"},function(T){return R.cursorNextLine(T)}),R._parser.registerCsiHandler({final:"F"},function(T){return R.cursorPrecedingLine(T)}),R._parser.registerCsiHandler({final:"G"},function(T){return R.cursorCharAbsolute(T)}),R._parser.registerCsiHandler({final:"H"},function(T){return R.cursorPosition(T)}),R._parser.registerCsiHandler({final:"I"},function(T){return R.cursorForwardTab(T)}),R._parser.registerCsiHandler({final:"J"},function(T){return R.eraseInDisplay(T)}),R._parser.registerCsiHandler({prefix:"?",final:"J"},function(T){return R.eraseInDisplay(T)}),R._parser.registerCsiHandler({final:"K"},function(T){return R.eraseInLine(T)}),R._parser.registerCsiHandler({prefix:"?",final:"K"},function(T){return R.eraseInLine(T)}),R._parser.registerCsiHandler({final:"L"},function(T){return R.insertLines(T)}),R._parser.registerCsiHandler({final:"M"},function(T){return R.deleteLines(T)}),R._parser.registerCsiHandler({final:"P"},function(T){return R.deleteChars(T)}),R._parser.registerCsiHandler({final:"S"},function(T){return R.scrollUp(T)}),R._parser.registerCsiHandler({final:"T"},function(T){return R.scrollDown(T)}),R._parser.registerCsiHandler({final:"X"},function(T){return R.eraseChars(T)}),R._parser.registerCsiHandler({final:"Z"},function(T){return R.cursorBackwardTab(T)}),R._parser.registerCsiHandler({final:"`"},function(T){return R.charPosAbsolute(T)}),R._parser.registerCsiHandler({final:"a"},function(T){return R.hPositionRelative(T)}),R._parser.registerCsiHandler({final:"b"},function(T){return R.repeatPrecedingCharacter(T)}),R._parser.registerCsiHandler({final:"c"},function(T){return R.sendDeviceAttributesPrimary(T)}),R._parser.registerCsiHandler({prefix:">",final:"c"},function(T){return R.sendDeviceAttributesSecondary(T)}),R._parser.registerCsiHandler({final:"d"},function(T){return R.linePosAbsolute(T)}),R._parser.registerCsiHandler({final:"e"},function(T){return R.vPositionRelative(T)}),R._parser.registerCsiHandler({final:"f"},function(T){return R.hVPosition(T)}),R._parser.registerCsiHandler({final:"g"},function(T){return R.tabClear(T)}),R._parser.registerCsiHandler({final:"h"},function(T){return R.setMode(T)}),R._parser.registerCsiHandler({prefix:"?",final:"h"},function(T){return R.setModePrivate(T)}),R._parser.registerCsiHandler({final:"l"},function(T){return R.resetMode(T)}),R._parser.registerCsiHandler({prefix:"?",final:"l"},function(T){return R.resetModePrivate(T)}),R._parser.registerCsiHandler({final:"m"},function(T){return R.charAttributes(T)}),R._parser.registerCsiHandler({final:"n"},function(T){return R.deviceStatus(T)}),R._parser.registerCsiHandler({prefix:"?",final:"n"},function(T){return R.deviceStatusPrivate(T)}),R._parser.registerCsiHandler({intermediates:"!",final:"p"},function(T){return R.softReset(T)}),R._parser.registerCsiHandler({intermediates:" ",final:"q"},function(T){return R.setCursorStyle(T)}),R._parser.registerCsiHandler({final:"r"},function(T){return R.setScrollRegion(T)}),R._parser.registerCsiHandler({final:"s"},function(T){return R.saveCursor(T)}),R._parser.registerCsiHandler({final:"t"},function(T){return R.windowOptions(T)}),R._parser.registerCsiHandler({final:"u"},function(T){return R.restoreCursor(T)}),R._parser.registerCsiHandler({intermediates:"'",final:"}"},function(T){return R.insertColumns(T)}),R._parser.registerCsiHandler({intermediates:"'",final:"~"},function(T){return R.deleteColumns(T)}),R._parser.setExecuteHandler(h.C0.BEL,function(){return R.bell()}),R._parser.setExecuteHandler(h.C0.LF,function(){return R.lineFeed()}),R._parser.setExecuteHandler(h.C0.VT,function(){return R.lineFeed()}),R._parser.setExecuteHandler(h.C0.FF,function(){return R.lineFeed()}),R._parser.setExecuteHandler(h.C0.CR,function(){return R.carriageReturn()}),R._parser.setExecuteHandler(h.C0.BS,function(){return R.backspace()}),R._parser.setExecuteHandler(h.C0.HT,function(){return R.tab()}),R._parser.setExecuteHandler(h.C0.SO,function(){return R.shiftOut()}),R._parser.setExecuteHandler(h.C0.SI,function(){return R.shiftIn()}),R._parser.setExecuteHandler(h.C1.IND,function(){return R.index()}),R._parser.setExecuteHandler(h.C1.NEL,function(){return R.nextLine()}),R._parser.setExecuteHandler(h.C1.HTS,function(){return R.tabSet()}),R._parser.registerOscHandler(0,new d.OscHandler(function(T){return R.setTitle(T),R.setIconName(T),!0})),R._parser.registerOscHandler(1,new d.OscHandler(function(T){return R.setIconName(T)})),R._parser.registerOscHandler(2,new d.OscHandler(function(T){return R.setTitle(T)})),R._parser.registerOscHandler(4,new d.OscHandler(function(T){return R.setOrReportIndexedColor(T)})),R._parser.registerOscHandler(10,new d.OscHandler(function(T){return R.setOrReportFgColor(T)})),R._parser.registerOscHandler(11,new d.OscHandler(function(T){return R.setOrReportBgColor(T)})),R._parser.registerOscHandler(12,new d.OscHandler(function(T){return R.setOrReportCursorColor(T)})),R._parser.registerOscHandler(104,new d.OscHandler(function(T){return R.restoreIndexedColor(T)})),R._parser.registerOscHandler(110,new d.OscHandler(function(T){return R.restoreFgColor(T)})),R._parser.registerOscHandler(111,new d.OscHandler(function(T){return R.restoreBgColor(T)})),R._parser.registerOscHandler(112,new d.OscHandler(function(T){return R.restoreCursorColor(T)})),R._parser.registerEscHandler({final:"7"},function(){return R.saveCursor()}),R._parser.registerEscHandler({final:"8"},function(){return R.restoreCursor()}),R._parser.registerEscHandler({final:"D"},function(){return R.index()}),R._parser.registerEscHandler({final:"E"},function(){return R.nextLine()}),R._parser.registerEscHandler({final:"H"},function(){return R.tabSet()}),R._parser.registerEscHandler({final:"M"},function(){return R.reverseIndex()}),R._parser.registerEscHandler({final:"="},function(){return R.keypadApplicationMode()}),R._parser.registerEscHandler({final:">"},function(){return R.keypadNumericMode()}),R._parser.registerEscHandler({final:"c"},function(){return R.fullReset()}),R._parser.registerEscHandler({final:"n"},function(){return R.setgLevel(2)}),R._parser.registerEscHandler({final:"o"},function(){return R.setgLevel(3)}),R._parser.registerEscHandler({final:"|"},function(){return R.setgLevel(3)}),R._parser.registerEscHandler({final:"}"},function(){return R.setgLevel(2)}),R._parser.registerEscHandler({final:"~"},function(){return R.setgLevel(1)}),R._parser.registerEscHandler({intermediates:"%",final:"@"},function(){return R.selectDefaultCharset()}),R._parser.registerEscHandler({intermediates:"%",final:"G"},function(){return R.selectDefaultCharset()});var U=function(T){D._parser.registerEscHandler({intermediates:"(",final:T},function(){return R.selectCharset("("+T)}),D._parser.registerEscHandler({intermediates:")",final:T},function(){return R.selectCharset(")"+T)}),D._parser.registerEscHandler({intermediates:"*",final:T},function(){return R.selectCharset("*"+T)}),D._parser.registerEscHandler({intermediates:"+",final:T},function(){return R.selectCharset("+"+T)}),D._parser.registerEscHandler({intermediates:"-",final:T},function(){return R.selectCharset("-"+T)}),D._parser.registerEscHandler({intermediates:".",final:T},function(){return R.selectCharset("."+T)}),D._parser.registerEscHandler({intermediates:"/",final:T},function(){return R.selectCharset("/"+T)})},D=this;for(var P in b.CHARSETS)U(P);return R._parser.registerEscHandler({intermediates:"#",final:"8"},function(){return R.screenAlignmentPattern()}),R._parser.setErrorHandler(function(T){return R._logService.error("Parsing error: ",T),T}),R._parser.registerDcsHandler({intermediates:"$",final:"q"},new x(R._bufferService,R._coreService,R._logService,R._optionsService)),R}return _(M,F),Object.defineProperty(M.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestSendFocus",{get:function(){return this._onRequestSendFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"onColor",{get:function(){return this._onColor.event},enumerable:!1,configurable:!0}),M.prototype.dispose=function(){F.prototype.dispose.call(this)},M.prototype._preserveStack=function(E,A,I,j){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=I,this._parseStack.position=j},M.prototype._logSlowResolvingAsync=function(E){this._logService.logLevel<=a.LogLevelEnum.WARN&&Promise.race([E,new Promise(function(A,I){return setTimeout(function(){return I("#SLOW_TIMEOUT")},5e3)})]).catch(function(A){if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})},M.prototype.parse=function(E,A){var I,j=this._activeBuffer.x,N=this._activeBuffer.y,z=0,J=this._parseStack.paused;if(J){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(I),I;j=this._parseStack.cursorStartX,N=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>m&&(z=this._parseStack.position+m)}if(this._logService.logLevel<=a.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?' "'+E+'"':' "'+Array.prototype.map.call(E,function(U){return String.fromCharCode(U)}).join("")+'"'),typeof E=="string"?E.split("").map(function(U){return U.charCodeAt(0)}):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<m&&(this._parseBuffer=new Uint32Array(Math.min(E.length,m))),J||this._dirtyRowService.clearRange(),E.length>m)for(var Y=z;Y<E.length;Y+=m){var $=Y+m<E.length?Y+m:E.length,R=typeof E=="string"?this._stringDecoder.decode(E.substring(Y,$),this._parseBuffer):this._utf8Decoder.decode(E.subarray(Y,$),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,R))return this._preserveStack(j,N,R,Y),this._logSlowResolvingAsync(I),I}else if(!J&&(R=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer),I=this._parser.parse(this._parseBuffer,R)))return this._preserveStack(j,N,R,0),this._logSlowResolvingAsync(I),I;this._activeBuffer.x===j&&this._activeBuffer.y===N||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},M.prototype.print=function(E,A,I){var j,N,z=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,$=this._coreService.decPrivateModes.wraparound,R=this._coreService.modes.insertMode,U=this._curAttrData,D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowService.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-A>0&&D.getWidth(this._activeBuffer.x-1)===2&&D.setCellFromCodePoint(this._activeBuffer.x-1,0,1,U.fg,U.bg,U.extended);for(var P=A;P<I;++P){if(j=E[P],N=this._unicodeService.wcwidth(j),j<127&&z){var T=z[String.fromCharCode(j)];T&&(j=T.charCodeAt(0))}if(J&&this._onA11yChar.fire((0,u.stringFromCodePoint)(j)),N||!this._activeBuffer.x){if(this._activeBuffer.x+N-1>=Y){if($){for(;this._activeBuffer.x<Y;)D.setCellFromCodePoint(this._activeBuffer.x++,0,1,U.fg,U.bg,U.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,N===2)continue}if(R&&(D.insertCells(this._activeBuffer.x,N,this._activeBuffer.getNullCell(U),U),D.getWidth(Y-1)===2&&D.setCellFromCodePoint(Y-1,e.NULL_CELL_CODE,e.NULL_CELL_WIDTH,U.fg,U.bg,U.extended)),D.setCellFromCodePoint(this._activeBuffer.x++,j,N,U.fg,U.bg,U.extended),N>0)for(;--N;)D.setCellFromCodePoint(this._activeBuffer.x++,0,0,U.fg,U.bg,U.extended)}else D.getWidth(this._activeBuffer.x-1)?D.addCodepointToCell(this._activeBuffer.x-1,j):D.addCodepointToCell(this._activeBuffer.x-2,j)}I-A>0&&(D.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&I-A>0&&D.getWidth(this._activeBuffer.x)===0&&!D.hasContent(this._activeBuffer.x)&&D.setCellFromCodePoint(this._activeBuffer.x,0,1,U.fg,U.bg,U.extended),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype.registerCsiHandler=function(E,A){var I=this;return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,A):this._parser.registerCsiHandler(E,function(j){return!S(j.params[0],I._optionsService.rawOptions.windowOptions)||A(j)})},M.prototype.registerDcsHandler=function(E,A){return this._parser.registerDcsHandler(E,new y.DcsHandler(A))},M.prototype.registerEscHandler=function(E,A){return this._parser.registerEscHandler(E,A)},M.prototype.registerOscHandler=function(E,A){return this._parser.registerOscHandler(E,new d.OscHandler(A))},M.prototype.bell=function(){return this._onRequestBell.fire(),!0},M.prototype.lineFeed=function(){return this._dirtyRowService.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowService.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0},M.prototype.carriageReturn=function(){return this._activeBuffer.x=0,!0},M.prototype.backspace=function(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0?void 0:E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;var A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0},M.prototype.tab=function(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;var E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0},M.prototype.shiftOut=function(){return this._charsetService.setgLevel(1),!0},M.prototype.shiftIn=function(){return this._charsetService.setgLevel(0),!0},M.prototype._restrictCursor=function(E){E===void 0&&(E=this._bufferService.cols-1),this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._setCursor=function(E,A){this._dirtyRowService.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=E,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowService.markDirty(this._activeBuffer.y)},M.prototype._moveCursor=function(E,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+A)},M.prototype.cursorUp=function(E){var A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0},M.prototype.cursorDown=function(E){var A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0},M.prototype.cursorForward=function(E){return this._moveCursor(E.params[0]||1,0),!0},M.prototype.cursorBackward=function(E){return this._moveCursor(-(E.params[0]||1),0),!0},M.prototype.cursorNextLine=function(E){return this.cursorDown(E),this._activeBuffer.x=0,!0},M.prototype.cursorPrecedingLine=function(E){return this.cursorUp(E),this._activeBuffer.x=0,!0},M.prototype.cursorCharAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.cursorPosition=function(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0},M.prototype.charPosAbsolute=function(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0},M.prototype.hPositionRelative=function(E){return this._moveCursor(E.params[0]||1,0),!0},M.prototype.linePosAbsolute=function(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0},M.prototype.vPositionRelative=function(E){return this._moveCursor(0,E.params[0]||1),!0},M.prototype.hVPosition=function(E){return this.cursorPosition(E),!0},M.prototype.tabClear=function(E){var A=E.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0},M.prototype.cursorForwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var A=E.params[0]||1;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0},M.prototype.cursorBackwardTab=function(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;for(var A=E.params[0]||1;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0},M.prototype._eraseInBufferLine=function(E,A,I,j){j===void 0&&(j=!1);var N=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);N.replaceCells(A,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j&&(N.isWrapped=!1)},M.prototype._resetBufferLine=function(E){var A=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);A.fill(this._activeBuffer.getNullCell(this._eraseAttrData())),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),A.isWrapped=!1},M.prototype.eraseInDisplay=function(E){var A;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(A=this._activeBuffer.y,this._dirtyRowService.markDirty(A),this._eraseInBufferLine(A++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);A<this._bufferService.rows;A++)this._resetBufferLine(A);this._dirtyRowService.markDirty(A);break;case 1:for(A=this._activeBuffer.y,this._dirtyRowService.markDirty(A),this._eraseInBufferLine(A,0,this._activeBuffer.x+1,!0),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(A+1).isWrapped=!1);A--;)this._resetBufferLine(A);this._dirtyRowService.markDirty(0);break;case 2:for(A=this._bufferService.rows,this._dirtyRowService.markDirty(A-1);A--;)this._resetBufferLine(A);this._dirtyRowService.markDirty(0);break;case 3:var I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0},M.prototype.eraseInLine=function(E){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0)}return this._dirtyRowService.markDirty(this._activeBuffer.y),!0},M.prototype.insertLines=function(E){this._restrictCursor();var A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var I=this._activeBuffer.ybase+this._activeBuffer.y,j=this._bufferService.rows-1-this._activeBuffer.scrollBottom,N=this._bufferService.rows-1+this._activeBuffer.ybase-j+1;A--;)this._activeBuffer.lines.splice(N-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.deleteLines=function(E){this._restrictCursor();var A=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;var I,j=this._activeBuffer.ybase+this._activeBuffer.y;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;A--;)this._activeBuffer.lines.splice(j,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0},M.prototype.insertChars=function(E){this._restrictCursor();var A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.deleteChars=function(E){this._restrictCursor();var A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.scrollUp=function(E){for(var A=E.params[0]||1;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollDown=function(E){for(var A=E.params[0]||1;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(i.DEFAULT_ATTR_DATA));return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollLeft=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=E.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.scrollRight=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=E.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.insertColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=E.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.deleteColumns=function(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;for(var A=E.params[0]||1,I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){var j=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);j.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),j.isWrapped=!1}return this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0},M.prototype.eraseChars=function(E){this._restrictCursor();var A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._activeBuffer.y)),!0},M.prototype.repeatPrecedingCharacter=function(E){if(!this._parser.precedingCodepoint)return!0;for(var A=E.params[0]||1,I=new Uint32Array(A),j=0;j<A;++j)I[j]=this._parser.precedingCodepoint;return this.print(I,0,I.length),!0},M.prototype.sendDeviceAttributesPrimary=function(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0},M.prototype.sendDeviceAttributesSecondary=function(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0},M.prototype._is=function(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0},M.prototype.setMode=function(E){for(var A=0;A<E.length;A++)E.params[A]===4&&(this._coreService.modes.insertMode=!0);return!0},M.prototype.setModePrivate=function(E){for(var A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),this._charsetService.setgCharset(1,b.DEFAULT_CHARSET),this._charsetService.setgCharset(2,b.DEFAULT_CHARSET),this._charsetService.setgCharset(3,b.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0},M.prototype.resetMode=function(E){for(var A=0;A<E.length;A++)E.params[A]===4&&(this._coreService.modes.insertMode=!1);return!0},M.prototype.resetModePrivate=function(E){for(var A=0;A<E.length;A++)switch(E.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0},M.prototype._updateAttrColor=function(E,A,I,j,N){return A===2?(E|=50331648,E&=-16777216,E|=s.AttributeData.fromColorRGB([I,j,N])):A===5&&(E&=-50331904,E|=33554432|255&I),E},M.prototype._extractColor=function(E,A,I){var j=[0,0,-1,0,0,0],N=0,z=0;do{if(j[z+N]=E.params[A+z],E.hasSubParams(A+z)){var J=E.getSubParams(A+z),Y=0;do j[1]===5&&(N=1),j[z+Y+1+N]=J[Y];while(++Y<J.length&&Y+z+1+N<j.length);break}if(j[1]===5&&z+N>=2||j[1]===2&&z+N>=5)break;j[1]&&(N=1)}while(++z+A<E.length&&z+N<j.length);for(Y=2;Y<j.length;++Y)j[Y]===-1&&(j[Y]=0);switch(j[0]){case 38:I.fg=this._updateAttrColor(I.fg,j[1],j[3],j[4],j[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,j[1],j[3],j[4],j[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,j[1],j[3],j[4],j[5])}return z},M.prototype._processUnderline=function(E,A){A.extended=A.extended.clone(),(!~E||E>5)&&(E=1),A.extended.underlineStyle=E,A.fg|=268435456,E===0&&(A.fg&=-268435457),A.updateExtended()},M.prototype.charAttributes=function(E){if(E.length===1&&E.params[0]===0)return this._curAttrData.fg=i.DEFAULT_ATTR_DATA.fg,this._curAttrData.bg=i.DEFAULT_ATTR_DATA.bg,!0;for(var A,I=E.length,j=this._curAttrData,N=0;N<I;N++)(A=E.params[N])>=30&&A<=37?(j.fg&=-50331904,j.fg|=16777216|A-30):A>=40&&A<=47?(j.bg&=-50331904,j.bg|=16777216|A-40):A>=90&&A<=97?(j.fg&=-50331904,j.fg|=16777224|A-90):A>=100&&A<=107?(j.bg&=-50331904,j.bg|=16777224|A-100):A===0?(j.fg=i.DEFAULT_ATTR_DATA.fg,j.bg=i.DEFAULT_ATTR_DATA.bg):A===1?j.fg|=134217728:A===3?j.bg|=67108864:A===4?(j.fg|=268435456,this._processUnderline(E.hasSubParams(N)?E.getSubParams(N)[0]:1,j)):A===5?j.fg|=536870912:A===7?j.fg|=67108864:A===8?j.fg|=1073741824:A===9?j.fg|=2147483648:A===2?j.bg|=134217728:A===21?this._processUnderline(2,j):A===22?(j.fg&=-134217729,j.bg&=-134217729):A===23?j.bg&=-67108865:A===24?j.fg&=-268435457:A===25?j.fg&=-536870913:A===27?j.fg&=-67108865:A===28?j.fg&=-1073741825:A===29?j.fg&=2147483647:A===39?(j.fg&=-67108864,j.fg|=16777215&i.DEFAULT_ATTR_DATA.fg):A===49?(j.bg&=-67108864,j.bg|=16777215&i.DEFAULT_ATTR_DATA.bg):A===38||A===48||A===58?N+=this._extractColor(E,N,j):A===59?(j.extended=j.extended.clone(),j.extended.underlineColor=-1,j.updateExtended()):A===100?(j.fg&=-67108864,j.fg|=16777215&i.DEFAULT_ATTR_DATA.fg,j.bg&=-67108864,j.bg|=16777215&i.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",A);return!0},M.prototype.deviceStatus=function(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(h.C0.ESC+"[0n");break;case 6:var A=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"["+A+";"+I+"R")}return!0},M.prototype.deviceStatusPrivate=function(E){if(E.params[0]===6){var A=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(h.C0.ESC+"[?"+A+";"+I+"R")}return!0},M.prototype.softReset=function(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=i.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0},M.prototype.setCursorStyle=function(E){var A=E.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var I=A%2==1;return this._optionsService.options.cursorBlink=I,!0},M.prototype.setScrollRegion=function(E){var A,I=E.params[0]||1;return(E.length<2||(A=E.params[1])>this._bufferService.rows||A===0)&&(A=this._bufferService.rows),A>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=A-1,this._setCursor(0,0)),!0},M.prototype.windowOptions=function(E){if(!S(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;var A=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(f.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(f.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(h.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0},M.prototype.saveCursor=function(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0},M.prototype.restoreCursor=function(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0},M.prototype.setTitle=function(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0},M.prototype.setIconName=function(E){return this._iconName=E,!0},M.prototype.setOrReportIndexedColor=function(E){for(var A=[],I=E.split(";");I.length>1;){var j=I.shift(),N=I.shift();if(/^\d+$/.exec(j)){var z=parseInt(j);if(0<=z&&z<256)if(N==="?")A.push({type:0,index:z});else{var J=(0,L.parseColor)(N);J&&A.push({type:1,index:z,color:J})}}}return A.length&&this._onColor.fire(A),!0},M.prototype._setOrReportSpecialColor=function(E,A){for(var I=E.split(";"),j=0;j<I.length&&!(A>=this._specialColors.length);++j,++A)if(I[j]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{var N=(0,L.parseColor)(I[j]);N&&this._onColor.fire([{type:1,index:this._specialColors[A],color:N}])}return!0},M.prototype.setOrReportFgColor=function(E){return this._setOrReportSpecialColor(E,0)},M.prototype.setOrReportBgColor=function(E){return this._setOrReportSpecialColor(E,1)},M.prototype.setOrReportCursorColor=function(E){return this._setOrReportSpecialColor(E,2)},M.prototype.restoreIndexedColor=function(E){if(!E)return this._onColor.fire([{type:2}]),!0;for(var A=[],I=E.split(";"),j=0;j<I.length;++j)if(/^\d+$/.exec(I[j])){var N=parseInt(I[j]);0<=N&&N<256&&A.push({type:2,index:N})}return A.length&&this._onColor.fire(A),!0},M.prototype.restoreFgColor=function(E){return this._onColor.fire([{type:2,index:256}]),!0},M.prototype.restoreBgColor=function(E){return this._onColor.fire([{type:2,index:257}]),!0},M.prototype.restoreCursorColor=function(E){return this._onColor.fire([{type:2,index:258}]),!0},M.prototype.nextLine=function(){return this._activeBuffer.x=0,this.index(),!0},M.prototype.keypadApplicationMode=function(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0},M.prototype.keypadNumericMode=function(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0},M.prototype.selectDefaultCharset=function(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,b.DEFAULT_CHARSET),!0},M.prototype.selectCharset=function(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(w[E[0]],b.CHARSETS[E[1]]||b.DEFAULT_CHARSET),!0)},M.prototype.index=function(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0},M.prototype.tabSet=function(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0},M.prototype.reverseIndex=function(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){var E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0},M.prototype.fullReset=function(){return this._parser.reset(),this._onRequestReset.fire(),!0},M.prototype.reset=function(){this._curAttrData=i.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=i.DEFAULT_ATTR_DATA.clone()},M.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},M.prototype.setgLevel=function(E){return this._charsetService.setgLevel(E),!0},M.prototype.screenAlignmentPattern=function(){var E=new r.CellData;E.content=1<<22|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(var A=0;A<this._bufferService.rows;++A){var I=this._activeBuffer.ybase+this._activeBuffer.y+A,j=this._activeBuffer.lines.get(I);j&&(j.fill(E),j.isWrapped=!1)}return this._dirtyRowService.markAllDirty(),this._setCursor(0,0),!0},M}(o.Disposable);n.InputHandler=k},844:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.Disposable=void 0;var g=function(){function _(){this._disposables=[],this._isDisposed=!1}return _.prototype.dispose=function(){this._isDisposed=!0;for(var f=0,h=this._disposables;f<h.length;f++)h[f].dispose();this._disposables.length=0},_.prototype.register=function(f){return this._disposables.push(f),f},_.prototype.unregister=function(f){var h=this._disposables.indexOf(f);h!==-1&&this._disposables.splice(h,1)},_}();function l(_){for(var f=0,h=_;f<h.length;f++)h[f].dispose();_.length=0}n.Disposable=g,n.disposeArray=l,n.getDisposeArrayDisposable=function(_){return{dispose:function(){return l(_)}}}},6114:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.isSafari=n.isLegacyEdge=n.isFirefox=void 0;var g=typeof navigator=="undefined",l=g?"node":navigator.userAgent,_=g?"node":navigator.platform;n.isFirefox=l.includes("Firefox"),n.isLegacyEdge=l.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(l),n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(_),n.isIpad=_==="iPad",n.isIphone=_==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(_),n.isLinux=_.indexOf("Linux")>=0},8273:(H,n)=>{function g(l,_,f,h){if(f===void 0&&(f=0),h===void 0&&(h=l.length),f>=l.length)return l;f=(l.length+f)%l.length,h=h>=l.length?l.length:(l.length+h)%l.length;for(var b=f;b<h;++b)l[b]=_;return l}Object.defineProperty(n,"__esModule",{value:!0}),n.concat=n.fillFallback=n.fill=void 0,n.fill=function(l,_,f,h){return l.fill?l.fill(_,f,h):g(l,_,f,h)},n.fillFallback=g,n.concat=function(l,_){var f=new l.constructor(l.length+_.length);return f.set(l),f.set(_,l.length),f}},9282:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;var l=g(643);n.updateWindowsModeWrappedState=function(_){var f=_.buffer.lines.get(_.buffer.ybase+_.buffer.y-1),h=f==null?void 0:f.get(_.cols-1),b=_.buffer.lines.get(_.buffer.ybase+_.buffer.y);b&&h&&(b.isWrapped=h[l.CHAR_DATA_CODE_INDEX]!==l.NULL_CELL_CODE&&h[l.CHAR_DATA_CODE_INDEX]!==l.WHITESPACE_CELL_CODE)}},3734:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;var g=function(){function _(){this.fg=0,this.bg=0,this.extended=new l}return _.toColorRGB=function(f){return[f>>>16&255,f>>>8&255,255&f]},_.fromColorRGB=function(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]},_.prototype.clone=function(){var f=new _;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f},_.prototype.isInverse=function(){return 67108864&this.fg},_.prototype.isBold=function(){return 134217728&this.fg},_.prototype.isUnderline=function(){return 268435456&this.fg},_.prototype.isBlink=function(){return 536870912&this.fg},_.prototype.isInvisible=function(){return 1073741824&this.fg},_.prototype.isItalic=function(){return 67108864&this.bg},_.prototype.isDim=function(){return 134217728&this.bg},_.prototype.isStrikethrough=function(){return 2147483648&this.fg},_.prototype.getFgColorMode=function(){return 50331648&this.fg},_.prototype.getBgColorMode=function(){return 50331648&this.bg},_.prototype.isFgRGB=function(){return(50331648&this.fg)==50331648},_.prototype.isBgRGB=function(){return(50331648&this.bg)==50331648},_.prototype.isFgPalette=function(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432},_.prototype.isBgPalette=function(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432},_.prototype.isFgDefault=function(){return(50331648&this.fg)==0},_.prototype.isBgDefault=function(){return(50331648&this.bg)==0},_.prototype.isAttributeDefault=function(){return this.fg===0&&this.bg===0},_.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},_.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},_.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},_.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},_.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},_.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},_.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()},_.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()},_.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()},_.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},_}();n.AttributeData=g;var l=function(){function _(f,h){f===void 0&&(f=0),h===void 0&&(h=-1),this.underlineStyle=f,this.underlineColor=h}return _.prototype.clone=function(){return new _(this.underlineStyle,this.underlineColor)},_.prototype.isEmpty=function(){return this.underlineStyle===0},_}();n.ExtendedAttrs=l},9092:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferStringIterator=n.Buffer=n.MAX_BUFFER_SIZE=void 0;var l=g(6349),_=g(8437),f=g(511),h=g(643),b=g(4634),p=g(4863),o=g(7116),c=g(3734);n.MAX_BUFFER_SIZE=4294967295;var u=function(){function t(e,r,s){this._hasScrollback=e,this._optionsService=r,this._bufferService=s,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,h.WHITESPACE_CELL_CHAR,h.WHITESPACE_CELL_WIDTH,h.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return t.prototype.getNullCell=function(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell},t.prototype.getWhitespaceCell=function(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell},t.prototype.getBlankLine=function(e,r){return new _.BufferLine(this._bufferService.cols,this.getNullCell(e),r)},Object.defineProperty(t.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCursorInViewport",{get:function(){var e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows},enumerable:!1,configurable:!0}),t.prototype._getCorrectBufferLength=function(e){if(!this._hasScrollback)return e;var r=e+this._optionsService.rawOptions.scrollback;return r>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:r},t.prototype.fillViewportRows=function(e){if(this.lines.length===0){e===void 0&&(e=_.DEFAULT_ATTR_DATA);for(var r=this._rows;r--;)this.lines.push(this.getBlankLine(e))}},t.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new l.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},t.prototype.resize=function(e,r){var s=this.getNullCell(_.DEFAULT_ATTR_DATA),a=this._getCorrectBufferLength(r);if(a>this.lines.maxLength&&(this.lines.maxLength=a),this.lines.length>0){if(this._cols<e)for(var d=0;d<this.lines.length;d++)this.lines.get(d).resize(e,s);var y=0;if(this._rows<r)for(var L=this._rows;L<r;L++)this.lines.length<r+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new _.BufferLine(e,s)):this.ybase>0&&this.lines.length<=this.ybase+this.y+y+1?(this.ybase--,y++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(e,s)));else for(L=this._rows;L>r;L--)this.lines.length>r+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(a<this.lines.maxLength){var w=this.lines.length-a;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=a}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,r-1),y&&(this.y+=y),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=r-1,this._isReflowEnabled&&(this._reflow(e,r),this._cols>e))for(d=0;d<this.lines.length;d++)this.lines.get(d).resize(e,s);this._cols=e,this._rows=r},Object.defineProperty(t.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode},enumerable:!1,configurable:!0}),t.prototype._reflow=function(e,r){this._cols!==e&&(e>this._cols?this._reflowLarger(e,r):this._reflowSmaller(e,r))},t.prototype._reflowLarger=function(e,r){var s=(0,b.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(s.length>0){var a=(0,b.reflowLargerCreateNewLayout)(this.lines,s);(0,b.reflowLargerApplyNewLayout)(this.lines,a.layout),this._reflowLargerAdjustViewport(e,r,a.countRemoved)}},t.prototype._reflowLargerAdjustViewport=function(e,r,s){for(var a=this.getNullCell(_.DEFAULT_ATTR_DATA),d=s;d-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<r&&this.lines.push(new _.BufferLine(e,a))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-s,0)},t.prototype._reflowSmaller=function(e,r){for(var s=this.getNullCell(_.DEFAULT_ATTR_DATA),a=[],d=0,y=this.lines.length-1;y>=0;y--){var L=this.lines.get(y);if(!(!L||!L.isWrapped&&L.getTrimmedLength()<=e)){for(var w=[L];L.isWrapped&&y>0;)L=this.lines.get(--y),w.unshift(L);var m=this.ybase+this.y;if(!(m>=y&&m<y+w.length)){var S,x=w[w.length-1].getTrimmedLength(),k=(0,b.reflowSmallerGetNewLineLengths)(w,this._cols,e),F=k.length-w.length;S=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+F):Math.max(0,this.lines.length-this.lines.maxLength+F);for(var M=[],E=0;E<F;E++){var A=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);M.push(A)}M.length>0&&(a.push({start:y+w.length+d,newLines:M}),d+=M.length),w.push.apply(w,M);var I=k.length-1,j=k[I];j===0&&(j=k[--I]);for(var N=w.length-F-1,z=x;N>=0;){var J=Math.min(z,j);if(w[I]===void 0)break;if(w[I].copyCellsFrom(w[N],z-J,j-J,J,!0),(j-=J)==0&&(j=k[--I]),(z-=J)==0){N--;var Y=Math.max(N,0);z=(0,b.getWrappedLineTrimmedLength)(w,Y,this._cols)}}for(E=0;E<w.length;E++)k[E]<e&&w[E].setCell(k[E],s);for(var $=F-S;$-- >0;)this.ybase===0?this.y<r-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+d)-r&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+F,this.ybase+r-1)}}}if(a.length>0){var R=[],U=[];for(E=0;E<this.lines.length;E++)U.push(this.lines.get(E));var D=this.lines.length,P=D-1,T=0,V=a[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+d);var G=0;for(E=Math.min(this.lines.maxLength-1,D+d-1);E>=0;E--)if(V&&V.start>P+G){for(var X=V.newLines.length-1;X>=0;X--)this.lines.set(E--,V.newLines[X]);E++,R.push({index:P+1,amount:V.newLines.length}),G+=V.newLines.length,V=a[++T]}else this.lines.set(E,U[P--]);var Q=0;for(E=R.length-1;E>=0;E--)R[E].index+=Q,this.lines.onInsertEmitter.fire(R[E]),Q+=R[E].amount;var ee=Math.max(0,D+d-this.lines.maxLength);ee>0&&this.lines.onTrimEmitter.fire(ee)}},t.prototype.stringIndexToBufferIndex=function(e,r,s){for(s===void 0&&(s=!1);r;){var a=this.lines.get(e);if(!a)return[-1,-1];for(var d=s?a.getTrimmedLength():a.length,y=0;y<d;++y)if(a.get(y)[h.CHAR_DATA_WIDTH_INDEX]&&(r-=a.get(y)[h.CHAR_DATA_CHAR_INDEX].length||1),r<0)return[e,y];e++}return[e,0]},t.prototype.translateBufferLineToString=function(e,r,s,a){s===void 0&&(s=0);var d=this.lines.get(e);return d?d.translateToString(r,s,a):""},t.prototype.getWrappedRangeForLine=function(e){for(var r=e,s=e;r>0&&this.lines.get(r).isWrapped;)r--;for(;s+1<this.lines.length&&this.lines.get(s+1).isWrapped;)s++;return{first:r,last:s}},t.prototype.setupTabStops=function(e){for(e!=null?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0},t.prototype.prevStop=function(e){for(e==null&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.nextStop=function(e){for(e==null&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e},t.prototype.clearMarkers=function(e){if(this._isClearing=!0,e!==void 0)for(var r=0;r<this.markers.length;r++)this.markers[r].line===e&&(this.markers[r].dispose(),this.markers.splice(r--,1));else{for(var s=0,a=this.markers;s<a.length;s++)a[s].dispose();this.markers=[]}this._isClearing=!1},t.prototype.addMarker=function(e){var r=this,s=new p.Marker(e);return this.markers.push(s),s.register(this.lines.onTrim(function(a){s.line-=a,s.line<0&&s.dispose()})),s.register(this.lines.onInsert(function(a){s.line>=a.index&&(s.line+=a.amount)})),s.register(this.lines.onDelete(function(a){s.line>=a.index&&s.line<a.index+a.amount&&s.dispose(),s.line>a.index&&(s.line-=a.amount)})),s.register(s.onDispose(function(){return r._removeMarker(s)})),s},t.prototype._removeMarker=function(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)},t.prototype.iterator=function(e,r,s,a,d){return new i(this,e,r,s,a,d)},t}();n.Buffer=u;var i=function(){function t(e,r,s,a,d,y){s===void 0&&(s=0),a===void 0&&(a=e.lines.length),d===void 0&&(d=0),y===void 0&&(y=0),this._buffer=e,this._trimRight=r,this._startIndex=s,this._endIndex=a,this._startOverscan=d,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return t.prototype.hasNext=function(){return this._current<this._endIndex},t.prototype.next=function(){var e=this._buffer.getWrappedRangeForLine(this._current);e.first<this._startIndex-this._startOverscan&&(e.first=this._startIndex-this._startOverscan),e.last>this._endIndex+this._endOverscan&&(e.last=this._endIndex+this._endOverscan),e.first=Math.max(e.first,0),e.last=Math.min(e.last,this._buffer.lines.length);for(var r="",s=e.first;s<=e.last;++s)r+=this._buffer.translateBufferLineToString(s,this._trimRight);return this._current=e.last+1,{range:e,content:r}},t}();n.BufferStringIterator=i},8437:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;var l=g(482),_=g(643),f=g(511),h=g(3734);n.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);var b=function(){function p(o,c,u){u===void 0&&(u=!1),this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);for(var i=c||f.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),t=0;t<o;++t)this.setCell(t,i);this.length=o}return p.prototype.get=function(o){var c=this._data[3*o+0],u=2097151&c;return[this._data[3*o+1],2097152&c?this._combined[o]:u?(0,l.stringFromCodePoint)(u):"",c>>22,2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):u]},p.prototype.set=function(o,c){this._data[3*o+1]=c[_.CHAR_DATA_ATTR_INDEX],c[_.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=c[1],this._data[3*o+0]=2097152|o|c[_.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=c[_.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[_.CHAR_DATA_WIDTH_INDEX]<<22},p.prototype.getWidth=function(o){return this._data[3*o+0]>>22},p.prototype.hasWidth=function(o){return 12582912&this._data[3*o+0]},p.prototype.getFg=function(o){return this._data[3*o+1]},p.prototype.getBg=function(o){return this._data[3*o+2]},p.prototype.hasContent=function(o){return 4194303&this._data[3*o+0]},p.prototype.getCodePoint=function(o){var c=this._data[3*o+0];return 2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&c},p.prototype.isCombined=function(o){return 2097152&this._data[3*o+0]},p.prototype.getString=function(o){var c=this._data[3*o+0];return 2097152&c?this._combined[o]:2097151&c?(0,l.stringFromCodePoint)(2097151&c):""},p.prototype.loadCell=function(o,c){var u=3*o;return c.content=this._data[u+0],c.fg=this._data[u+1],c.bg=this._data[u+2],2097152&c.content&&(c.combinedData=this._combined[o]),268435456&c.bg&&(c.extended=this._extendedAttrs[o]),c},p.prototype.setCell=function(o,c){2097152&c.content&&(this._combined[o]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[o]=c.extended),this._data[3*o+0]=c.content,this._data[3*o+1]=c.fg,this._data[3*o+2]=c.bg},p.prototype.setCellFromCodePoint=function(o,c,u,i,t,e){268435456&t&&(this._extendedAttrs[o]=e),this._data[3*o+0]=c|u<<22,this._data[3*o+1]=i,this._data[3*o+2]=t},p.prototype.addCodepointToCell=function(o,c){var u=this._data[3*o+0];2097152&u?this._combined[o]+=(0,l.stringFromCodePoint)(c):(2097151&u?(this._combined[o]=(0,l.stringFromCodePoint)(2097151&u)+(0,l.stringFromCodePoint)(c),u&=-2097152,u|=2097152):u=c|1<<22,this._data[3*o+0]=u)},p.prototype.insertCells=function(o,c,u,i){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs),c<this.length-o){for(var t=new f.CellData,e=this.length-o-c-1;e>=0;--e)this.setCell(o+c+e,this.loadCell(o+e,t));for(e=0;e<c;++e)this.setCell(o+e,u)}else for(e=o;e<this.length;++e)this.setCell(e,u);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs)},p.prototype.deleteCells=function(o,c,u,i){if(o%=this.length,c<this.length-o){for(var t=new f.CellData,e=0;e<this.length-o-c;++e)this.setCell(o+e,this.loadCell(o+c+e,t));for(e=this.length-c;e<this.length;++e)this.setCell(e,u)}else for(e=o;e<this.length;++e)this.setCell(e,u);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs)},p.prototype.replaceCells=function(o,c,u,i){for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c,0,1,(i==null?void 0:i.fg)||0,(i==null?void 0:i.bg)||0,(i==null?void 0:i.extended)||new h.ExtendedAttrs);o<c&&o<this.length;)this.setCell(o++,u)},p.prototype.resize=function(o,c){if(o!==this.length){if(o>this.length){var u=new Uint32Array(3*o);this.length&&(3*o<this._data.length?u.set(this._data.subarray(0,3*o)):u.set(this._data)),this._data=u;for(var i=this.length;i<o;++i)this.setCell(i,c)}else if(o){(u=new Uint32Array(3*o)).set(this._data.subarray(0,3*o)),this._data=u;var t=Object.keys(this._combined);for(i=0;i<t.length;i++){var e=parseInt(t[i],10);e>=o&&delete this._combined[e]}}else this._data=new Uint32Array(0),this._combined={};this.length=o}},p.prototype.fill=function(o){this._combined={},this._extendedAttrs={};for(var c=0;c<this.length;++c)this.setCell(c,o)},p.prototype.copyFrom=function(o){for(var c in this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={},o._combined)this._combined[c]=o._combined[c];for(var c in this._extendedAttrs={},o._extendedAttrs)this._extendedAttrs[c]=o._extendedAttrs[c];this.isWrapped=o.isWrapped},p.prototype.clone=function(){var o=new p(0);for(var c in o._data=new Uint32Array(this._data),o.length=this.length,this._combined)o._combined[c]=this._combined[c];for(var c in this._extendedAttrs)o._extendedAttrs[c]=this._extendedAttrs[c];return o.isWrapped=this.isWrapped,o},p.prototype.getTrimmedLength=function(){for(var o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0},p.prototype.copyCellsFrom=function(o,c,u,i,t){var e=o._data;if(t)for(var r=i-1;r>=0;r--)for(var s=0;s<3;s++)this._data[3*(u+r)+s]=e[3*(c+r)+s];else for(r=0;r<i;r++)for(s=0;s<3;s++)this._data[3*(u+r)+s]=e[3*(c+r)+s];var a=Object.keys(o._combined);for(s=0;s<a.length;s++){var d=parseInt(a[s],10);d>=c&&(this._combined[d-c+u]=o._combined[d])}},p.prototype.translateToString=function(o,c,u){o===void 0&&(o=!1),c===void 0&&(c=0),u===void 0&&(u=this.length),o&&(u=Math.min(u,this.getTrimmedLength()));for(var i="";c<u;){var t=this._data[3*c+0],e=2097151&t;i+=2097152&t?this._combined[c]:e?(0,l.stringFromCodePoint)(e):_.WHITESPACE_CELL_CHAR,c+=t>>22||1}return i},p}();n.BufferLine=b},4841:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(g,l){if(g.start.y>g.end.y)throw new Error("Buffer range end ("+g.end.x+", "+g.end.y+") cannot be before start ("+g.start.x+", "+g.start.y+")");return l*(g.end.y-g.start.y)+(g.end.x-g.start.x+1)}},4634:(H,n)=>{function g(l,_,f){if(_===l.length-1)return l[_].getTrimmedLength();var h=!l[_].hasContent(f-1)&&l[_].getWidth(f-1)===1,b=l[_+1].getWidth(0)===2;return h&&b?f-1:f}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(l,_,f,h,b){for(var p=[],o=0;o<l.length-1;o++){var c=o,u=l.get(++c);if(u.isWrapped){for(var i=[l.get(o)];c<l.length&&u.isWrapped;)i.push(u),u=l.get(++c);if(h>=o&&h<c)o+=i.length-1;else{for(var t=0,e=g(i,t,_),r=1,s=0;r<i.length;){var a=g(i,r,_),d=a-s,y=f-e,L=Math.min(d,y);i[t].copyCellsFrom(i[r],s,e,L,!1),(e+=L)===f&&(t++,e=0),(s+=L)===a&&(r++,s=0),e===0&&t!==0&&i[t-1].getWidth(f-1)===2&&(i[t].copyCellsFrom(i[t-1],f-1,e++,1,!1),i[t-1].setCell(f-1,b))}i[t].replaceCells(e,f,b);for(var w=0,m=i.length-1;m>0&&(m>t||i[m].getTrimmedLength()===0);m--)w++;w>0&&(p.push(o+i.length-w),p.push(w)),o+=i.length-1}}}return p},n.reflowLargerCreateNewLayout=function(l,_){for(var f=[],h=0,b=_[h],p=0,o=0;o<l.length;o++)if(b===o){var c=_[++h];l.onDeleteEmitter.fire({index:o-p,amount:c}),o+=c-1,p+=c,b=_[++h]}else f.push(o);return{layout:f,countRemoved:p}},n.reflowLargerApplyNewLayout=function(l,_){for(var f=[],h=0;h<_.length;h++)f.push(l.get(_[h]));for(h=0;h<f.length;h++)l.set(h,f[h]);l.length=_.length},n.reflowSmallerGetNewLineLengths=function(l,_,f){for(var h=[],b=l.map(function(e,r){return g(l,r,_)}).reduce(function(e,r){return e+r}),p=0,o=0,c=0;c<b;){if(b-c<f){h.push(b-c);break}p+=f;var u=g(l,o,_);p>u&&(p-=u,o++);var i=l[o].getWidth(p-1)===2;i&&p--;var t=i?f-1:f;h.push(t),c+=t}return h},n.getWrappedLineTrimmedLength=g},5295:function(H,n,g){var l,_=this&&this.__extends||(l=function(p,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var i in u)Object.prototype.hasOwnProperty.call(u,i)&&(c[i]=u[i])},l(p,o)},function(p,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function c(){this.constructor=p}l(p,o),p.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)});Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;var f=g(9092),h=g(8460),b=function(p){function o(c,u){var i=p.call(this)||this;return i._optionsService=c,i._bufferService=u,i._onBufferActivate=i.register(new h.EventEmitter),i.reset(),i}return _(o,p),Object.defineProperty(o.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),o.prototype.reset=function(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()},Object.defineProperty(o.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),o.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},o.prototype.activateAltBuffer=function(c){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(c),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},o.prototype.resize=function(c,u){this._normal.resize(c,u),this._alt.resize(c,u)},o.prototype.setupTabStops=function(c){this._normal.setupTabStops(c),this._alt.setupTabStops(c)},o}(g(844).Disposable);n.BufferSet=b},511:function(H,n,g){var l,_=this&&this.__extends||(l=function(o,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,i){u.__proto__=i}||function(u,i){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(u[t]=i[t])},l(o,c)},function(o,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function u(){this.constructor=o}l(o,c),o.prototype=c===null?Object.create(c):(u.prototype=c.prototype,new u)});Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;var f=g(482),h=g(643),b=g(3734),p=function(o){function c(){var u=o!==null&&o.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new b.ExtendedAttrs,u.combinedData="",u}return _(c,o),c.fromCharData=function(u){var i=new c;return i.setFromCharData(u),i},c.prototype.isCombined=function(){return 2097152&this.content},c.prototype.getWidth=function(){return this.content>>22},c.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""},c.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},c.prototype.setFromCharData=function(u){this.fg=u[h.CHAR_DATA_ATTR_INDEX],this.bg=0;var i=!1;if(u[h.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(u[h.CHAR_DATA_CHAR_INDEX].length===2){var t=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){var e=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&e<=57343?this.content=1024*(t-55296)+e-56320+65536|u[h.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=u[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[h.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=u[h.CHAR_DATA_CHAR_INDEX],this.content=2097152|u[h.CHAR_DATA_WIDTH_INDEX]<<22)},c.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},c}(b.AttributeData);n.CellData=p},643:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=256,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:function(H,n,g){var l,_=this&&this.__extends||(l=function(b,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&(o[u]=c[u])},l(b,p)},function(b,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function o(){this.constructor=b}l(b,p),b.prototype=p===null?Object.create(p):(o.prototype=p.prototype,new o)});Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;var f=g(8460),h=function(b){function p(o){var c=b.call(this)||this;return c.line=o,c._id=p._nextId++,c.isDisposed=!1,c._onDispose=new f.EventEmitter,c}return _(p,b),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),p.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),b.prototype.dispose.call(this))},p._nextId=1,p}(g(844).Disposable);n.Marker=h},7116:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},n.CHARSETS.A={"#":"\xA3"},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},n.CHARSETS.C=n.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},n.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},n.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},n.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},n.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},n.CHARSETS.E=n.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},n.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},n.CHARSETS.H=n.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},n.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(H,n)=>{var g,l;Object.defineProperty(n,"__esModule",{value:!0}),n.C1=n.C0=void 0,(l=n.C0||(n.C0={})).NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F",(g=n.C1||(n.C1={})).PAD="\x80",g.HOP="\x81",g.BPH="\x82",g.NBH="\x83",g.IND="\x84",g.NEL="\x85",g.SSA="\x86",g.ESA="\x87",g.HTS="\x88",g.HTJ="\x89",g.VTS="\x8A",g.PLD="\x8B",g.PLU="\x8C",g.RI="\x8D",g.SS2="\x8E",g.SS3="\x8F",g.DCS="\x90",g.PU1="\x91",g.PU2="\x92",g.STS="\x93",g.CCH="\x94",g.MW="\x95",g.SPA="\x96",g.EPA="\x97",g.SOS="\x98",g.SGCI="\x99",g.SCI="\x9A",g.CSI="\x9B",g.ST="\x9C",g.OSC="\x9D",g.PM="\x9E",g.APC="\x9F"},7399:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;var l=g(2584),_={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(f,h,b,p){var o={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?o.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?o.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?o.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(o.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B");break;case 8:if(f.shiftKey){o.key=l.C0.BS;break}if(f.altKey){o.key=l.C0.ESC+l.C0.DEL;break}o.key=l.C0.DEL;break;case 9:if(f.shiftKey){o.key=l.C0.ESC+"[Z";break}o.key=l.C0.HT,o.cancel=!0;break;case 13:o.key=f.altKey?l.C0.ESC+l.C0.CR:l.C0.CR,o.cancel=!0;break;case 27:o.key=l.C0.ESC,f.altKey&&(o.key=l.C0.ESC+l.C0.ESC),o.cancel=!0;break;case 37:if(f.metaKey)break;c?(o.key=l.C0.ESC+"[1;"+(c+1)+"D",o.key===l.C0.ESC+"[1;3D"&&(o.key=l.C0.ESC+(b?"b":"[1;5D"))):o.key=h?l.C0.ESC+"OD":l.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(o.key=l.C0.ESC+"[1;"+(c+1)+"C",o.key===l.C0.ESC+"[1;3C"&&(o.key=l.C0.ESC+(b?"f":"[1;5C"))):o.key=h?l.C0.ESC+"OC":l.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(o.key=l.C0.ESC+"[1;"+(c+1)+"A",b||o.key!==l.C0.ESC+"[1;3A"||(o.key=l.C0.ESC+"[1;5A")):o.key=h?l.C0.ESC+"OA":l.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(o.key=l.C0.ESC+"[1;"+(c+1)+"B",b||o.key!==l.C0.ESC+"[1;3B"||(o.key=l.C0.ESC+"[1;5B")):o.key=h?l.C0.ESC+"OB":l.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(o.key=l.C0.ESC+"[2~");break;case 46:o.key=c?l.C0.ESC+"[3;"+(c+1)+"~":l.C0.ESC+"[3~";break;case 36:o.key=c?l.C0.ESC+"[1;"+(c+1)+"H":h?l.C0.ESC+"OH":l.C0.ESC+"[H";break;case 35:o.key=c?l.C0.ESC+"[1;"+(c+1)+"F":h?l.C0.ESC+"OF":l.C0.ESC+"[F";break;case 33:f.shiftKey?o.type=2:o.key=l.C0.ESC+"[5~";break;case 34:f.shiftKey?o.type=3:o.key=l.C0.ESC+"[6~";break;case 112:o.key=c?l.C0.ESC+"[1;"+(c+1)+"P":l.C0.ESC+"OP";break;case 113:o.key=c?l.C0.ESC+"[1;"+(c+1)+"Q":l.C0.ESC+"OQ";break;case 114:o.key=c?l.C0.ESC+"[1;"+(c+1)+"R":l.C0.ESC+"OR";break;case 115:o.key=c?l.C0.ESC+"[1;"+(c+1)+"S":l.C0.ESC+"OS";break;case 116:o.key=c?l.C0.ESC+"[15;"+(c+1)+"~":l.C0.ESC+"[15~";break;case 117:o.key=c?l.C0.ESC+"[17;"+(c+1)+"~":l.C0.ESC+"[17~";break;case 118:o.key=c?l.C0.ESC+"[18;"+(c+1)+"~":l.C0.ESC+"[18~";break;case 119:o.key=c?l.C0.ESC+"[19;"+(c+1)+"~":l.C0.ESC+"[19~";break;case 120:o.key=c?l.C0.ESC+"[20;"+(c+1)+"~":l.C0.ESC+"[20~";break;case 121:o.key=c?l.C0.ESC+"[21;"+(c+1)+"~":l.C0.ESC+"[21~";break;case 122:o.key=c?l.C0.ESC+"[23;"+(c+1)+"~":l.C0.ESC+"[23~";break;case 123:o.key=c?l.C0.ESC+"[24;"+(c+1)+"~":l.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(b&&!p||!f.altKey||f.metaKey)!b||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?o.key=f.key:f.key&&f.ctrlKey&&f.key==="_"&&(o.key=l.C0.US):f.keyCode===65&&(o.type=1);else{var u=_[f.keyCode],i=u==null?void 0:u[f.shiftKey?1:0];if(i)o.key=l.C0.ESC+i;else if(f.keyCode>=65&&f.keyCode<=90){var t=f.ctrlKey?f.keyCode-64:f.keyCode+32;o.key=l.C0.ESC+String.fromCharCode(t)}}else f.keyCode>=65&&f.keyCode<=90?o.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?o.key=l.C0.NUL:f.keyCode>=51&&f.keyCode<=55?o.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?o.key=l.C0.DEL:f.keyCode===219?o.key=l.C0.ESC:f.keyCode===220?o.key=l.C0.FS:f.keyCode===221&&(o.key=l.C0.GS)}return o}},482:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(_){return _>65535?(_-=65536,String.fromCharCode(55296+(_>>10))+String.fromCharCode(_%1024+56320)):String.fromCharCode(_)},n.utf32ToString=function(_,f,h){f===void 0&&(f=0),h===void 0&&(h=_.length);for(var b="",p=f;p<h;++p){var o=_[p];o>65535?(o-=65536,b+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):b+=String.fromCharCode(o)}return b};var g=function(){function _(){this._interim=0}return _.prototype.clear=function(){this._interim=0},_.prototype.decode=function(f,h){var b=f.length;if(!b)return 0;var p=0,o=0;this._interim&&(56320<=(i=f.charCodeAt(o++))&&i<=57343?h[p++]=1024*(this._interim-55296)+i-56320+65536:(h[p++]=this._interim,h[p++]=i),this._interim=0);for(var c=o;c<b;++c){var u=f.charCodeAt(c);if(55296<=u&&u<=56319){if(++c>=b)return this._interim=u,p;var i;56320<=(i=f.charCodeAt(c))&&i<=57343?h[p++]=1024*(u-55296)+i-56320+65536:(h[p++]=u,h[p++]=i)}else u!==65279&&(h[p++]=u)}return p},_}();n.StringToUtf32=g;var l=function(){function _(){this.interim=new Uint8Array(3)}return _.prototype.clear=function(){this.interim.fill(0)},_.prototype.decode=function(f,h){var b=f.length;if(!b)return 0;var p,o,c,u,i=0,t=0,e=0;if(this.interim[0]){var r=!1,s=this.interim[0];s&=(224&s)==192?31:(240&s)==224?15:7;for(var a=0,d=void 0;(d=63&this.interim[++a])&&a<4;)s<<=6,s|=d;for(var y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,L=y-a;e<L;){if(e>=b)return 0;if((192&(d=f[e++]))!=128){e--,r=!0;break}this.interim[a++]=d,s<<=6,s|=63&d}r||(y===2?s<128?e--:h[i++]=s:y===3?s<2048||s>=55296&&s<=57343||s===65279||(h[i++]=s):s<65536||s>1114111||(h[i++]=s)),this.interim.fill(0)}for(var w=b-4,m=e;m<b;){for(;!(!(m<w)||128&(p=f[m])||128&(o=f[m+1])||128&(c=f[m+2])||128&(u=f[m+3]));)h[i++]=p,h[i++]=o,h[i++]=c,h[i++]=u,m+=4;if((p=f[m++])<128)h[i++]=p;else if((224&p)==192){if(m>=b)return this.interim[0]=p,i;if((192&(o=f[m++]))!=128){m--;continue}if((t=(31&p)<<6|63&o)<128){m--;continue}h[i++]=t}else if((240&p)==224){if(m>=b)return this.interim[0]=p,i;if((192&(o=f[m++]))!=128){m--;continue}if(m>=b)return this.interim[0]=p,this.interim[1]=o,i;if((192&(c=f[m++]))!=128){m--;continue}if((t=(15&p)<<12|(63&o)<<6|63&c)<2048||t>=55296&&t<=57343||t===65279)continue;h[i++]=t}else if((248&p)==240){if(m>=b)return this.interim[0]=p,i;if((192&(o=f[m++]))!=128){m--;continue}if(m>=b)return this.interim[0]=p,this.interim[1]=o,i;if((192&(c=f[m++]))!=128){m--;continue}if(m>=b)return this.interim[0]=p,this.interim[1]=o,this.interim[2]=c,i;if((192&(u=f[m++]))!=128){m--;continue}if((t=(7&p)<<18|(63&o)<<12|(63&c)<<6|63&u)<65536||t>1114111)continue;h[i++]=t}}return i},_}();n.Utf8ToUtf32=l},225:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;var l,_=g(8273),f=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],b=function(){function p(){if(this.version="6",!l){l=new Uint8Array(65536),(0,_.fill)(l,1),l[0]=0,(0,_.fill)(l,0,1,32),(0,_.fill)(l,0,127,160),(0,_.fill)(l,2,4352,4448),l[9001]=2,l[9002]=2,(0,_.fill)(l,2,11904,42192),l[12351]=1,(0,_.fill)(l,2,44032,55204),(0,_.fill)(l,2,63744,64256),(0,_.fill)(l,2,65040,65050),(0,_.fill)(l,2,65072,65136),(0,_.fill)(l,2,65280,65377),(0,_.fill)(l,2,65504,65511);for(var o=0;o<f.length;++o)(0,_.fill)(l,0,f[o][0],f[o][1]+1)}}return p.prototype.wcwidth=function(o){return o<32?0:o<127?1:o<65536?l[o]:function(c,u){var i,t=0,e=u.length-1;if(c<u[0][0]||c>u[e][1])return!1;for(;e>=t;)if(c>u[i=t+e>>1][1])t=i+1;else{if(!(c<u[i][0]))return!0;e=i-1}return!1}(o,h)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1},p}();n.UnicodeV6=b},5981:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;var g=typeof queueMicrotask=="undefined"?function(_){Promise.resolve().then(_)}:queueMicrotask,l=function(){function _(f){this._action=f,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0}return _.prototype.writeSync=function(f,h){if(h!==void 0&&this._syncCalls>h)this._syncCalls=0;else if(this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(void 0),this._syncCalls++,!this._isSyncWriting){var b;for(this._isSyncWriting=!0;b=this._writeBuffer.shift();){this._action(b);var p=this._callbacks.shift();p&&p()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}},_.prototype.write=function(f,h){var b=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout(function(){return b._innerWrite()})),this._pendingData+=f.length,this._writeBuffer.push(f),this._callbacks.push(h)},_.prototype._innerWrite=function(f,h){var b=this;f===void 0&&(f=0),h===void 0&&(h=!0);for(var p=f||Date.now();this._writeBuffer.length>this._bufferOffset;){var o=this._writeBuffer[this._bufferOffset],c=this._action(o,h);if(c)return void c.catch(function(i){return g(function(){throw i}),Promise.resolve(!1)}).then(function(i){return Date.now()-p>=12?setTimeout(function(){return b._innerWrite(0,i)}):b._innerWrite(p,i)});var u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-p>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(function(){return b._innerWrite()})):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0)},_}();n.WriteBuffer=l},5941:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;var g=/^([\da-f]{1})\/([\da-f]{1})\/([\da-f]{1})$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,l=/^[\da-f]+$/;function _(f,h){var b=f.toString(16),p=b.length<2?"0"+b:b;switch(h){case 4:return b[0];case 8:return p;case 12:return(p+p).slice(0,3);default:return p+p}}n.parseColor=function(f){if(f){var h=f.toLowerCase();if(h.indexOf("rgb:")===0){h=h.slice(4);var b=g.exec(h);if(b){var p=b[1]?15:b[4]?255:b[7]?4095:65535;return[Math.round(parseInt(b[1]||b[4]||b[7]||b[10],16)/p*255),Math.round(parseInt(b[2]||b[5]||b[8]||b[11],16)/p*255),Math.round(parseInt(b[3]||b[6]||b[9]||b[12],16)/p*255)]}}else if(h.indexOf("#")===0&&(h=h.slice(1),l.exec(h)&&[3,6,9,12].includes(h.length))){for(var o=h.length/3,c=[0,0,0],u=0;u<3;++u){var i=parseInt(h.slice(o*u,o*u+o),16);c[u]=o===1?i<<4:o===2?i:o===3?i>>4:i>>8}return c}}},n.toRgbString=function(f,h){h===void 0&&(h=16);var b=f[0],p=f[1],o=f[2];return"rgb:"+_(b,h)+"/"+_(p,h)+"/"+_(o,h)}},5770:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;var l=g(482),_=g(8742),f=g(5770),h=[],b=function(){function c(){this._handlers=Object.create(null),this._active=h,this._ident=0,this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return c.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=h},c.prototype.registerHandler=function(u,i){this._handlers[u]===void 0&&(this._handlers[u]=[]);var t=this._handlers[u];return t.push(i),{dispose:function(){var e=t.indexOf(i);e!==-1&&t.splice(e,1)}}},c.prototype.clearHandler=function(u){this._handlers[u]&&delete this._handlers[u]},c.prototype.setHandlerFallback=function(u){this._handlerFb=u},c.prototype.reset=function(){if(this._active.length)for(var u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].unhook(!1);this._stack.paused=!1,this._active=h,this._ident=0},c.prototype.hook=function(u,i){if(this.reset(),this._ident=u,this._active=this._handlers[u]||h,this._active.length)for(var t=this._active.length-1;t>=0;t--)this._active[t].hook(i);else this._handlerFb(this._ident,"HOOK",i)},c.prototype.put=function(u,i,t){if(this._active.length)for(var e=this._active.length-1;e>=0;e--)this._active[e].put(u,i,t);else this._handlerFb(this._ident,"PUT",(0,l.utf32ToString)(u,i,t))},c.prototype.unhook=function(u,i){if(i===void 0&&(i=!0),this._active.length){var t=!1,e=this._active.length-1,r=!1;if(this._stack.paused&&(e=this._stack.loopPosition-1,t=i,r=this._stack.fallThrough,this._stack.paused=!1),!r&&t===!1){for(;e>=0&&(t=this._active[e].unhook(u))!==!0;e--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!1,t;e--}for(;e>=0;e--)if((t=this._active[e].unhook(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=e,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",u);this._active=h,this._ident=0},c}();n.DcsParser=b;var p=new _.Params;p.addParam(0);var o=function(){function c(u){this._handler=u,this._data="",this._params=p,this._hitLimit=!1}return c.prototype.hook=function(u){this._params=u.length>1||u.params[0]?u.clone():p,this._data="",this._hitLimit=!1},c.prototype.put=function(u,i,t){this._hitLimit||(this._data+=(0,l.utf32ToString)(u,i,t),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},c.prototype.unhook=function(u){var i=this,t=!1;if(this._hitLimit)t=!1;else if(u&&(t=this._handler(this._data,this._params))instanceof Promise)return t.then(function(e){return i._params=p,i._data="",i._hitLimit=!1,e});return this._params=p,this._data="",this._hitLimit=!1,t},c}();n.DcsHandler=o},2015:function(H,n,g){var l,_=this&&this.__extends||(l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},l(t,e)},function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}l(t,e),t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;var f=g(844),h=g(8273),b=g(8742),p=g(6242),o=g(6351),c=function(){function t(e){this.table=new Uint8Array(e)}return t.prototype.setDefault=function(e,r){(0,h.fill)(this.table,e<<4|r)},t.prototype.add=function(e,r,s,a){this.table[r<<8|e]=s<<4|a},t.prototype.addMany=function(e,r,s,a){for(var d=0;d<e.length;d++)this.table[r<<8|e[d]]=s<<4|a},t}();n.TransitionTable=c;var u=160;n.VT500_TRANSITION_TABLE=function(){var t=new c(4095),e=Array.apply(null,Array(256)).map(function(L,w){return w}),r=function(L,w){return e.slice(L,w)},s=r(32,127),a=r(0,24);a.push(25),a.push.apply(a,r(28,32));var d,y=r(0,14);for(d in t.setDefault(1,0),t.addMany(s,0,2,0),y)t.addMany([24,26,153,154],d,3,0),t.addMany(r(128,144),d,3,0),t.addMany(r(144,152),d,3,0),t.add(156,d,0,0),t.add(27,d,11,1),t.add(157,d,4,8),t.addMany([152,158,159],d,0,7),t.add(155,d,11,3),t.add(144,d,11,9);return t.addMany(a,0,3,0),t.addMany(a,1,3,1),t.add(127,1,0,1),t.addMany(a,8,0,8),t.addMany(a,3,3,3),t.add(127,3,0,3),t.addMany(a,4,3,4),t.add(127,4,0,4),t.addMany(a,6,3,6),t.addMany(a,5,3,5),t.add(127,5,0,5),t.addMany(a,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(s,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(r(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(s,7,0,7),t.addMany(a,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(r(64,127),3,7,0),t.addMany(r(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(r(48,60),4,8,4),t.addMany(r(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(r(32,64),6,0,6),t.add(127,6,0,6),t.addMany(r(64,127),6,0,0),t.addMany(r(32,48),3,9,5),t.addMany(r(32,48),5,9,5),t.addMany(r(48,64),5,0,6),t.addMany(r(64,127),5,7,0),t.addMany(r(32,48),4,9,5),t.addMany(r(32,48),1,9,2),t.addMany(r(32,48),2,9,2),t.addMany(r(48,127),2,10,0),t.addMany(r(48,80),1,10,0),t.addMany(r(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(r(96,127),1,10,0),t.add(80,1,11,9),t.addMany(a,9,0,9),t.add(127,9,0,9),t.addMany(r(28,32),9,0,9),t.addMany(r(32,48),9,9,12),t.addMany(r(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(a,11,0,11),t.addMany(r(32,128),11,0,11),t.addMany(r(28,32),11,0,11),t.addMany(a,10,0,10),t.add(127,10,0,10),t.addMany(r(28,32),10,0,10),t.addMany(r(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(r(32,48),10,9,12),t.addMany(a,12,0,12),t.add(127,12,0,12),t.addMany(r(28,32),12,0,12),t.addMany(r(32,48),12,9,12),t.addMany(r(48,64),12,0,11),t.addMany(r(64,127),12,12,13),t.addMany(r(64,127),10,12,13),t.addMany(r(64,127),9,12,13),t.addMany(a,13,13,13),t.addMany(s,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(u,0,2,0),t.add(u,8,5,8),t.add(u,6,0,6),t.add(u,11,0,11),t.add(u,13,13,13),t}();var i=function(t){function e(r){r===void 0&&(r=n.VT500_TRANSITION_TABLE);var s=t.call(this)||this;return s._transitions=r,s._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},s.initialState=0,s.currentState=s.initialState,s._params=new b.Params,s._params.addParam(0),s._collect=0,s.precedingCodepoint=0,s._printHandlerFb=function(a,d,y){},s._executeHandlerFb=function(a){},s._csiHandlerFb=function(a,d){},s._escHandlerFb=function(a){},s._errorHandlerFb=function(a){return a},s._printHandler=s._printHandlerFb,s._executeHandlers=Object.create(null),s._csiHandlers=Object.create(null),s._escHandlers=Object.create(null),s._oscParser=new p.OscParser,s._dcsParser=new o.DcsParser,s._errorHandler=s._errorHandlerFb,s.registerEscHandler({final:"\\"},function(){return!0}),s}return _(e,t),e.prototype._identifier=function(r,s){s===void 0&&(s=[64,126]);var a=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if((a=r.prefix.charCodeAt(0))&&60>a||a>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<r.intermediates.length;++d){var y=r.intermediates.charCodeAt(d);if(32>y||y>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");a<<=8,a|=y}}if(r.final.length!==1)throw new Error("final must be a single byte");var L=r.final.charCodeAt(0);if(s[0]>L||L>s[1])throw new Error("final must be in range "+s[0]+" .. "+s[1]);return(a<<=8)|L},e.prototype.identToString=function(r){for(var s=[];r;)s.push(String.fromCharCode(255&r)),r>>=8;return s.reverse().join("")},e.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},e.prototype.setPrintHandler=function(r){this._printHandler=r},e.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},e.prototype.registerEscHandler=function(r,s){var a=this._identifier(r,[48,126]);this._escHandlers[a]===void 0&&(this._escHandlers[a]=[]);var d=this._escHandlers[a];return d.push(s),{dispose:function(){var y=d.indexOf(s);y!==-1&&d.splice(y,1)}}},e.prototype.clearEscHandler=function(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]},e.prototype.setEscHandlerFallback=function(r){this._escHandlerFb=r},e.prototype.setExecuteHandler=function(r,s){this._executeHandlers[r.charCodeAt(0)]=s},e.prototype.clearExecuteHandler=function(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]},e.prototype.setExecuteHandlerFallback=function(r){this._executeHandlerFb=r},e.prototype.registerCsiHandler=function(r,s){var a=this._identifier(r);this._csiHandlers[a]===void 0&&(this._csiHandlers[a]=[]);var d=this._csiHandlers[a];return d.push(s),{dispose:function(){var y=d.indexOf(s);y!==-1&&d.splice(y,1)}}},e.prototype.clearCsiHandler=function(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]},e.prototype.setCsiHandlerFallback=function(r){this._csiHandlerFb=r},e.prototype.registerDcsHandler=function(r,s){return this._dcsParser.registerHandler(this._identifier(r),s)},e.prototype.clearDcsHandler=function(r){this._dcsParser.clearHandler(this._identifier(r))},e.prototype.setDcsHandlerFallback=function(r){this._dcsParser.setHandlerFallback(r)},e.prototype.registerOscHandler=function(r,s){return this._oscParser.registerHandler(r,s)},e.prototype.clearOscHandler=function(r){this._oscParser.clearHandler(r)},e.prototype.setOscHandlerFallback=function(r){this._oscParser.setHandlerFallback(r)},e.prototype.setErrorHandler=function(r){this._errorHandler=r},e.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},e.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])},e.prototype._preserveStack=function(r,s,a,d,y){this._parseStack.state=r,this._parseStack.handlers=s,this._parseStack.handlerPos=a,this._parseStack.transition=d,this._parseStack.chunkPos=y},e.prototype.parse=function(r,s,a){var d,y=0,L=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(a===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");var m=this._parseStack.handlers,S=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(a===!1&&S>-1){for(;S>=0&&(d=m[S](this._params))!==!0;S--)if(d instanceof Promise)return this._parseStack.handlerPos=S,d}this._parseStack.handlers=[];break;case 4:if(a===!1&&S>-1){for(;S>=0&&(d=m[S]())!==!0;S--)if(d instanceof Promise)return this._parseStack.handlerPos=S,d}this._parseStack.handlers=[];break;case 6:if(y=r[this._parseStack.chunkPos],d=this._dcsParser.unhook(y!==24&&y!==26,a))return d;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(y=r[this._parseStack.chunkPos],d=this._oscParser.end(y!==24&&y!==26,a))return d;y===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(var x=w;x<s;++x){switch(y=r[x],(L=this._transitions.table[this.currentState<<8|(y<160?y:u)])>>4){case 2:for(var k=x+1;;++k){if(k>=s||(y=r[k])<32||y>126&&y<u){this._printHandler(r,x,k),x=k-1;break}if(++k>=s||(y=r[k])<32||y>126&&y<u){this._printHandler(r,x,k),x=k-1;break}if(++k>=s||(y=r[k])<32||y>126&&y<u){this._printHandler(r,x,k),x=k-1;break}if(++k>=s||(y=r[k])<32||y>126&&y<u){this._printHandler(r,x,k),x=k-1;break}}break;case 3:this._executeHandlers[y]?this._executeHandlers[y]():this._executeHandlerFb(y),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:x,code:y,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:for(var F=(m=this._csiHandlers[this._collect<<8|y])?m.length-1:-1;F>=0&&(d=m[F](this._params))!==!0;F--)if(d instanceof Promise)return this._preserveStack(3,m,F,L,x),d;F<0&&this._csiHandlerFb(this._collect<<8|y,this._params),this.precedingCodepoint=0;break;case 8:do switch(y){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(y-48)}while(++x<s&&(y=r[x])>47&&y<60);x--;break;case 9:this._collect<<=8,this._collect|=y;break;case 10:for(var M=this._escHandlers[this._collect<<8|y],E=M?M.length-1:-1;E>=0&&(d=M[E]())!==!0;E--)if(d instanceof Promise)return this._preserveStack(4,M,E,L,x),d;E<0&&this._escHandlerFb(this._collect<<8|y),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|y,this._params);break;case 13:for(var A=x+1;;++A)if(A>=s||(y=r[A])===24||y===26||y===27||y>127&&y<u){this._dcsParser.put(r,x,A),x=A-1;break}break;case 14:if(d=this._dcsParser.unhook(y!==24&&y!==26))return this._preserveStack(6,[],0,L,x),d;y===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(var I=x+1;;I++)if(I>=s||(y=r[I])<32||y>127&&y<u){this._oscParser.put(r,x,I),x=I-1;break}break;case 6:if(d=this._oscParser.end(y!==24&&y!==26))return this._preserveStack(5,[],0,L,x),d;y===27&&(L|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&L}},e}(f.Disposable);n.EscapeSequenceParser=i},6242:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;var l=g(5770),_=g(482),f=[],h=function(){function p(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}return p.prototype.registerHandler=function(o,c){this._handlers[o]===void 0&&(this._handlers[o]=[]);var u=this._handlers[o];return u.push(c),{dispose:function(){var i=u.indexOf(c);i!==-1&&u.splice(i,1)}}},p.prototype.clearHandler=function(o){this._handlers[o]&&delete this._handlers[o]},p.prototype.setHandlerFallback=function(o){this._handlerFb=o},p.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){},this._active=f},p.prototype.reset=function(){if(this._state===2)for(var o=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;o>=0;--o)this._active[o].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0},p.prototype._start=function(){if(this._active=this._handlers[this._id]||f,this._active.length)for(var o=this._active.length-1;o>=0;o--)this._active[o].start();else this._handlerFb(this._id,"START")},p.prototype._put=function(o,c,u){if(this._active.length)for(var i=this._active.length-1;i>=0;i--)this._active[i].put(o,c,u);else this._handlerFb(this._id,"PUT",(0,_.utf32ToString)(o,c,u))},p.prototype.start=function(){this.reset(),this._state=1},p.prototype.put=function(o,c,u){if(this._state!==3){if(this._state===1)for(;c<u;){var i=o[c++];if(i===59){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+i-48}this._state===2&&u-c>0&&this._put(o,c,u)}},p.prototype.end=function(o,c){if(c===void 0&&(c=!0),this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){var u=!1,i=this._active.length-1,t=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,u=c,t=this._stack.fallThrough,this._stack.paused=!1),!t&&u===!1){for(;i>=0&&(u=this._active[i].end(o))!==!0;i--)if(u instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,u;i--}for(;i>=0;i--)if((u=this._active[i].end(!1))instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,u}else this._handlerFb(this._id,"END",o);this._active=f,this._id=-1,this._state=0}},p}();n.OscParser=h;var b=function(){function p(o){this._handler=o,this._data="",this._hitLimit=!1}return p.prototype.start=function(){this._data="",this._hitLimit=!1},p.prototype.put=function(o,c,u){this._hitLimit||(this._data+=(0,_.utf32ToString)(o,c,u),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},p.prototype.end=function(o){var c=this,u=!1;if(this._hitLimit)u=!1;else if(o&&(u=this._handler(this._data))instanceof Promise)return u.then(function(i){return c._data="",c._hitLimit=!1,i});return this._data="",this._hitLimit=!1,u},p}();n.OscHandler=b},8742:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;var g=2147483647,l=function(){function _(f,h){if(f===void 0&&(f=32),h===void 0&&(h=32),this.maxLength=f,this.maxSubParamsLength=h,h>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(h),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return _.fromArray=function(f){var h=new _;if(!f.length)return h;for(var b=Array.isArray(f[0])?1:0;b<f.length;++b){var p=f[b];if(Array.isArray(p))for(var o=0;o<p.length;++o)h.addSubParam(p[o]);else h.addParam(p)}return h},_.prototype.clone=function(){var f=new _(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f},_.prototype.toArray=function(){for(var f=[],h=0;h<this.length;++h){f.push(this.params[h]);var b=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-b>0&&f.push(Array.prototype.slice.call(this._subParams,b,p))}return f},_.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},_.prototype.addParam=function(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>g?g:f}},_.prototype.addSubParam=function(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>g?g:f,this._subParamsIdx[this.length-1]++}},_.prototype.hasSubParams=function(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0},_.prototype.getSubParams=function(f){var h=this._subParamsIdx[f]>>8,b=255&this._subParamsIdx[f];return b-h>0?this._subParams.subarray(h,b):null},_.prototype.getSubParamsAll=function(){for(var f={},h=0;h<this.length;++h){var b=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];p-b>0&&(f[h]=this._subParams.slice(b,p))}return f},_.prototype.addDigit=function(f){var h;if(!(this._rejectDigits||!(h=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var b=this._digitIsSub?this._subParams:this.params,p=b[h-1];b[h-1]=~p?Math.min(10*p+f,g):f}},_}();n.Params=l},5741:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0;var g=function(){function l(){this._addons=[]}return l.prototype.dispose=function(){for(var _=this._addons.length-1;_>=0;_--)this._addons[_].instance.dispose()},l.prototype.loadAddon=function(_,f){var h=this,b={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(b),f.dispose=function(){return h._wrappedAddonDispose(b)},f.activate(_)},l.prototype._wrappedAddonDispose=function(_){if(!_.isDisposed){for(var f=-1,h=0;h<this._addons.length;h++)if(this._addons[h]===_){f=h;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");_.isDisposed=!0,_.dispose.apply(_.instance),this._addons.splice(f,1)}},l}();n.AddonManager=g},8771:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;var l=g(3785),_=g(511),f=function(){function h(b,p){this._buffer=b,this.type=p}return h.prototype.init=function(b){return this._buffer=b,this},Object.defineProperty(h.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),h.prototype.getLine=function(b){var p=this._buffer.lines.get(b);if(p)return new l.BufferLineApiView(p)},h.prototype.getNullCell=function(){return new _.CellData},h}();n.BufferApiView=f},3785:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;var l=g(511),_=function(){function f(h){this._line=h}return Object.defineProperty(f.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),f.prototype.getCell=function(h,b){if(!(h<0||h>=this._line.length))return b?(this._line.loadCell(h,b),b):this._line.loadCell(h,new l.CellData)},f.prototype.translateToString=function(h,b,p){return this._line.translateToString(h,b,p)},f}();n.BufferLineApiView=_},8285:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;var l=g(8771),_=g(8460),f=function(){function h(b){var p=this;this._core=b,this._onBufferChange=new _.EventEmitter,this._normal=new l.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new l.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(function(){return p._onBufferChange.fire(p.active)})}return Object.defineProperty(h.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"active",{get:function(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"normal",{get:function(){return this._normal.init(this._core.buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"alternate",{get:function(){return this._alternate.init(this._core.buffers.alt)},enumerable:!1,configurable:!0}),h}();n.BufferNamespaceApi=f},7975:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0;var g=function(){function l(_){this._core=_}return l.prototype.registerCsiHandler=function(_,f){return this._core.registerCsiHandler(_,function(h){return f(h.toArray())})},l.prototype.addCsiHandler=function(_,f){return this.registerCsiHandler(_,f)},l.prototype.registerDcsHandler=function(_,f){return this._core.registerDcsHandler(_,function(h,b){return f(h,b.toArray())})},l.prototype.addDcsHandler=function(_,f){return this.registerDcsHandler(_,f)},l.prototype.registerEscHandler=function(_,f){return this._core.registerEscHandler(_,f)},l.prototype.addEscHandler=function(_,f){return this.registerEscHandler(_,f)},l.prototype.registerOscHandler=function(_,f){return this._core.registerOscHandler(_,f)},l.prototype.addOscHandler=function(_,f){return this.registerOscHandler(_,f)},l}();n.ParserApi=g},7090:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0;var g=function(){function l(_){this._core=_}return l.prototype.register=function(_){this._core.unicodeService.register(_)},Object.defineProperty(l.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(_){this._core.unicodeService.activeVersion=_},enumerable:!1,configurable:!0}),l}();n.UnicodeApi=g},744:function(H,n,g){var l,_=this&&this.__extends||(l=function(i,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])},l(i,t)},function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=i}l(i,t),i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}),f=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},h=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;var b=g(2585),p=g(5295),o=g(8460),c=g(844);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;var u=function(i){function t(e){var r=i.call(this)||this;return r._optionsService=e,r.isUserScrolling=!1,r._onResize=new o.EventEmitter,r._onScroll=new o.EventEmitter,r.cols=Math.max(e.rawOptions.cols||0,n.MINIMUM_COLS),r.rows=Math.max(e.rawOptions.rows||0,n.MINIMUM_ROWS),r.buffers=new p.BufferSet(e,r),r}return _(t,i),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){i.prototype.dispose.call(this),this.buffers.dispose()},t.prototype.resize=function(e,r){this.cols=e,this.rows=r,this.buffers.resize(e,r),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:e,rows:r})},t.prototype.reset=function(){this.buffers.reset(),this.isUserScrolling=!1},t.prototype.scroll=function(e,r){r===void 0&&(r=!1);var s,a=this.buffer;(s=this._cachedBlankLine)&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=a.getBlankLine(e,r),this._cachedBlankLine=s),s.isWrapped=r;var d=a.ybase+a.scrollTop,y=a.ybase+a.scrollBottom;if(a.scrollTop===0){var L=a.lines.isFull;y===a.lines.length-1?L?a.lines.recycle().copyFrom(s):a.lines.push(s.clone()):a.lines.splice(y+1,0,s.clone()),L?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{var w=y-d+1;a.lines.shiftElements(d+1,w-1,-1),a.lines.set(y,s.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)},t.prototype.scrollLines=function(e,r,s){var a=this.buffer;if(e<0){if(a.ydisp===0)return;this.isUserScrolling=!0}else e+a.ydisp>=a.ybase&&(this.isUserScrolling=!1);var d=a.ydisp;a.ydisp=Math.max(Math.min(a.ydisp+e,a.ybase),0),d!==a.ydisp&&(r||this._onScroll.fire(a.ydisp))},t.prototype.scrollPages=function(e){this.scrollLines(e*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)},t.prototype.scrollToLine=function(e){var r=e-this.buffer.ydisp;r!==0&&this.scrollLines(r)},f([h(0,b.IOptionsService)],t)}(c.Disposable);n.BufferService=u},7994:(H,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0;var g=function(){function l(){this.glevel=0,this._charsets=[]}return l.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},l.prototype.setgLevel=function(_){this.glevel=_,this.charset=this._charsets[_]},l.prototype.setgCharset=function(_,f){this._charsets[_]=f,this.glevel===_&&(this.charset=f)},l}();n.CharsetService=g},1753:function(H,n,g){var l=this&&this.__decorate||function(i,t,e,r){var s,a=arguments.length,d=a<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(i,t,e,r);else for(var y=i.length-1;y>=0;y--)(s=i[y])&&(d=(a<3?s(d):a>3?s(t,e,d):s(t,e))||d);return a>3&&d&&Object.defineProperty(t,e,d),d},_=this&&this.__param||function(i,t){return function(e,r){t(e,r,i)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;var f=g(2585),h=g(8460),b={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(i){return i.button!==4&&i.action===1&&(i.ctrl=!1,i.alt=!1,i.shift=!1,!0)}},VT200:{events:19,restrict:function(i){return i.action!==32}},DRAG:{events:23,restrict:function(i){return i.action!==32||i.button!==3}},ANY:{events:31,restrict:function(i){return!0}}};function p(i,t){var e=(i.ctrl?16:0)|(i.shift?4:0)|(i.alt?8:0);return i.button===4?(e|=64,e|=i.action):(e|=3&i.button,4&i.button&&(e|=64),8&i.button&&(e|=128),i.action===32?e|=32:i.action!==0||t||(e|=3)),e}var o=String.fromCharCode,c={DEFAULT:function(i){var t=[p(i,!1)+32,i.col+32,i.row+32];return t[0]>255||t[1]>255||t[2]>255?"":"\x1B[M"+o(t[0])+o(t[1])+o(t[2])},SGR:function(i){var t=i.action===0&&i.button!==4?"m":"M";return"\x1B[<"+p(i,!0)+";"+i.col+";"+i.row+t}},u=function(){function i(t,e){this._bufferService=t,this._coreService=e,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new h.EventEmitter,this._lastEvent=null;for(var r=0,s=Object.keys(b);r<s.length;r++){var a=s[r];this.addProtocol(a,b[a])}for(var d=0,y=Object.keys(c);d<y.length;d++){var L=y[d];this.addEncoding(L,c[L])}this.reset()}return i.prototype.addProtocol=function(t,e){this._protocols[t]=e},i.prototype.addEncoding=function(t,e){this._encodings[t]=e},Object.defineProperty(i.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(t){if(!this._protocols[t])throw new Error('unknown protocol "'+t+'"');this._activeProtocol=t,this._onProtocolChange.fire(this._protocols[t].events)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"areMouseEventsActive",{get:function(){return this._protocols[this._activeProtocol].events!==0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(t){if(!this._encodings[t])throw new Error('unknown encoding "'+t+'"');this._activeEncoding=t},enumerable:!1,configurable:!0}),i.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(i.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),i.prototype.triggerMouseEvent=function(t){if(t.col<0||t.col>=this._bufferService.cols||t.row<0||t.row>=this._bufferService.rows||t.button===4&&t.action===32||t.button===3&&t.action!==32||t.button!==4&&(t.action===2||t.action===3)||(t.col++,t.row++,t.action===32&&this._lastEvent&&this._compareEvents(this._lastEvent,t))||!this._protocols[this._activeProtocol].restrict(t))return!1;var e=this._encodings[this._activeEncoding](t);return e&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(e):this._coreService.triggerDataEvent(e,!0)),this._lastEvent=t,!0},i.prototype.explainEvents=function(t){return{down:!!(1&t),up:!!(2&t),drag:!!(4&t),move:!!(8&t),wheel:!!(16&t)}},i.prototype._compareEvents=function(t,e){return t.col===e.col&&t.row===e.row&&t.button===e.button&&t.action===e.action&&t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift},l([_(0,f.IBufferService),_(1,f.ICoreService)],i)}();n.CoreMouseService=u},6975:function(H,n,g){var l,_=this&&this.__extends||(l=function(e,r){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(s[d]=a[d])},l(e,r)},function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function s(){this.constructor=e}l(e,r),e.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}),f=this&&this.__decorate||function(e,r,s,a){var d,y=arguments.length,L=y<3?r:a===null?a=Object.getOwnPropertyDescriptor(r,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(e,r,s,a);else for(var w=e.length-1;w>=0;w--)(d=e[w])&&(L=(y<3?d(L):y>3?d(r,s,L):d(r,s))||L);return y>3&&L&&Object.defineProperty(r,s,L),L},h=this&&this.__param||function(e,r){return function(s,a){r(s,a,e)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;var b=g(2585),p=g(8460),o=g(1439),c=g(844),u=Object.freeze({insertMode:!1}),i=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),t=function(e){function r(s,a,d,y){var L=e.call(this)||this;return L._bufferService=a,L._logService=d,L._optionsService=y,L.isCursorInitialized=!1,L.isCursorHidden=!1,L._onData=L.register(new p.EventEmitter),L._onUserInput=L.register(new p.EventEmitter),L._onBinary=L.register(new p.EventEmitter),L._scrollToBottom=s,L.register({dispose:function(){return L._scrollToBottom=void 0}}),L.modes=(0,o.clone)(u),L.decPrivateModes=(0,o.clone)(i),L}return _(r,e),Object.defineProperty(r.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),r.prototype.reset=function(){this.modes=(0,o.clone)(u),this.decPrivateModes=(0,o.clone)(i)},r.prototype.triggerDataEvent=function(s,a){if(a===void 0&&(a=!1),!this._optionsService.rawOptions.disableStdin){var d=this._bufferService.buffer;d.ybase!==d.ydisp&&this._scrollToBottom(),a&&this._onUserInput.fire(),this._logService.debug('sending data "'+s+'"',function(){return s.split("").map(function(y){return y.charCodeAt(0)})}),this._onData.fire(s)}},r.prototype.triggerBinaryEvent=function(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug('sending binary "'+s+'"',function(){return s.split("").map(function(a){return a.charCodeAt(0)})}),this._onBinary.fire(s))},f([h(1,b.IBufferService),h(2,b.ILogService),h(3,b.IOptionsService)],r)}(c.Disposable);n.CoreService=t},3730:function(H,n,g){var l=this&&this.__decorate||function(b,p,o,c){var u,i=arguments.length,t=i<3?p:c===null?c=Object.getOwnPropertyDescriptor(p,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(b,p,o,c);else for(var e=b.length-1;e>=0;e--)(u=b[e])&&(t=(i<3?u(t):i>3?u(p,o,t):u(p,o))||t);return i>3&&t&&Object.defineProperty(p,o,t),t},_=this&&this.__param||function(b,p){return function(o,c){p(o,c,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DirtyRowService=void 0;var f=g(2585),h=function(){function b(p){this._bufferService=p,this.clearRange()}return Object.defineProperty(b.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),b.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},b.prototype.markDirty=function(p){p<this._start?this._start=p:p>this._end&&(this._end=p)},b.prototype.markRangeDirty=function(p,o){if(p>o){var c=p;p=o,o=c}p<this._start&&(this._start=p),o>this._end&&(this._end=o)},b.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},l([_(0,f.IBufferService)],b)}();n.DirtyRowService=h},4348:function(H,n,g){var l=this&&this.__spreadArray||function(p,o,c){if(c||arguments.length===2)for(var u,i=0,t=o.length;i<t;i++)!u&&i in o||(u||(u=Array.prototype.slice.call(o,0,i)),u[i]=o[i]);return p.concat(u||Array.prototype.slice.call(o))};Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;var _=g(2585),f=g(8343),h=function(){function p(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];this._entries=new Map;for(var u=0,i=o;u<i.length;u++){var t=i[u],e=t[0],r=t[1];this.set(e,r)}}return p.prototype.set=function(o,c){var u=this._entries.get(o);return this._entries.set(o,c),u},p.prototype.forEach=function(o){this._entries.forEach(function(c,u){return o(u,c)})},p.prototype.has=function(o){return this._entries.has(o)},p.prototype.get=function(o){return this._entries.get(o)},p}();n.ServiceCollection=h;var b=function(){function p(){this._services=new h,this._services.set(_.IInstantiationService,this)}return p.prototype.setService=function(o,c){this._services.set(o,c)},p.prototype.getService=function(o){return this._services.get(o)},p.prototype.createInstance=function(o){for(var c=[],u=1;u<arguments.length;u++)c[u-1]=arguments[u];for(var i=(0,f.getServiceDependencies)(o).sort(function(y,L){return y.index-L.index}),t=[],e=0,r=i;e<r.length;e++){var s=r[e],a=this._services.get(s.id);if(!a)throw new Error("[createInstance] "+o.name+" depends on UNKNOWN service "+s.id+".");t.push(a)}var d=i.length>0?i[0].index:c.length;if(c.length!==d)throw new Error("[createInstance] First service dependency of "+o.name+" at position "+(d+1)+" conflicts with "+c.length+" static arguments");return new(o.bind.apply(o,l([void 0],l(l([],c,!0),t,!0),!1)))},p}();n.InstantiationService=b},7866:function(H,n,g){var l=this&&this.__decorate||function(o,c,u,i){var t,e=arguments.length,r=e<3?c:i===null?i=Object.getOwnPropertyDescriptor(c,u):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(o,c,u,i);else for(var s=o.length-1;s>=0;s--)(t=o[s])&&(r=(e<3?t(r):e>3?t(c,u,r):t(c,u))||r);return e>3&&r&&Object.defineProperty(c,u,r),r},_=this&&this.__param||function(o,c){return function(u,i){c(u,i,o)}},f=this&&this.__spreadArray||function(o,c,u){if(u||arguments.length===2)for(var i,t=0,e=c.length;t<e;t++)!i&&t in c||(i||(i=Array.prototype.slice.call(c,0,t)),i[t]=c[t]);return o.concat(i||Array.prototype.slice.call(c))};Object.defineProperty(n,"__esModule",{value:!0}),n.LogService=void 0;var h=g(2585),b={debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},p=function(){function o(c){var u=this;this._optionsService=c,this.logLevel=h.LogLevelEnum.OFF,this._updateLogLevel(),this._optionsService.onOptionChange(function(i){i==="logLevel"&&u._updateLogLevel()})}return o.prototype._updateLogLevel=function(){this.logLevel=b[this._optionsService.rawOptions.logLevel]},o.prototype._evalLazyOptionalParams=function(c){for(var u=0;u<c.length;u++)typeof c[u]=="function"&&(c[u]=c[u]())},o.prototype._log=function(c,u,i){this._evalLazyOptionalParams(i),c.call.apply(c,f([console,"xterm.js: "+u],i,!1))},o.prototype.debug=function(c){for(var u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];this.logLevel<=h.LogLevelEnum.DEBUG&&this._log(console.log,c,u)},o.prototype.info=function(c){for(var u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];this.logLevel<=h.LogLevelEnum.INFO&&this._log(console.info,c,u)},o.prototype.warn=function(c){for(var u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];this.logLevel<=h.LogLevelEnum.WARN&&this._log(console.warn,c,u)},o.prototype.error=function(c){for(var u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];this.logLevel<=h.LogLevelEnum.ERROR&&this._log(console.error,c,u)},l([_(0,h.IOptionsService)],o)}();n.LogService=p},7302:function(H,n,g){var l=this&&this.__assign||function(){return l=Object.assign||function(p){for(var o,c=1,u=arguments.length;c<u;c++)for(var i in o=arguments[c])Object.prototype.hasOwnProperty.call(o,i)&&(p[i]=o[i]);return p},l.apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=n.DEFAULT_BELL_SOUND=void 0;var _=g(8460),f=g(6114);n.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,bellSound:n.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1};var h=["normal","bold","100","200","300","400","500","600","700","800","900"],b=function(){function p(o){this._onOptionChange=new _.EventEmitter;var c=l({},n.DEFAULT_OPTIONS);for(var u in o)if(u in c)try{var i=o[u];c[u]=this._sanitizeAndValidateOption(u,i)}catch(t){console.error(t)}this.rawOptions=c,this.options=l({},c),this._setupOptions()}return Object.defineProperty(p.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),p.prototype._setupOptions=function(){var o=this,c=function(e){if(!(e in n.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');return o.rawOptions[e]},u=function(e,r){if(!(e in n.DEFAULT_OPTIONS))throw new Error('No option with key "'+e+'"');r=o._sanitizeAndValidateOption(e,r),o.rawOptions[e]!==r&&(o.rawOptions[e]=r,o._onOptionChange.fire(e))};for(var i in this.rawOptions){var t={get:c.bind(this,i),set:u.bind(this,i)};Object.defineProperty(this.options,i,t)}},p.prototype.setOption=function(o,c){this.options[o]=c},p.prototype._sanitizeAndValidateOption=function(o,c){switch(o){case"bellStyle":case"cursorStyle":case"rendererType":case"wordSeparator":c||(c=n.DEFAULT_OPTIONS[o]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=h.includes(c)?c:n.DEFAULT_OPTIONS[o];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(o+" cannot be less than 1, value: "+c);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(o+" cannot be less than 0, value: "+c);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(o+" cannot be less than or equal to 0, value: "+c);case"rows":case"cols":if(!c&&c!==0)throw new Error(o+" must be numeric, value: "+c)}return c},p.prototype.getOption=function(o){return this.options[o]},p}();n.OptionsService=b},8343:(H,n)=>{function g(l,_,f){_.di$target===_?_.di$dependencies.push({id:l,index:f}):(_.di$dependencies=[{id:l,index:f}],_.di$target=_)}Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0,n.serviceRegistry=new Map,n.getServiceDependencies=function(l){return l.di$dependencies||[]},n.createDecorator=function(l){if(n.serviceRegistry.has(l))return n.serviceRegistry.get(l);var _=function(f,h,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");g(_,f,b)};return _.toString=function(){return l},n.serviceRegistry.set(l,_),_}},2585:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IUnicodeService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.IDirtyRowService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;var l,_=g(8343);n.IBufferService=(0,_.createDecorator)("BufferService"),n.ICoreMouseService=(0,_.createDecorator)("CoreMouseService"),n.ICoreService=(0,_.createDecorator)("CoreService"),n.ICharsetService=(0,_.createDecorator)("CharsetService"),n.IDirtyRowService=(0,_.createDecorator)("DirtyRowService"),n.IInstantiationService=(0,_.createDecorator)("InstantiationService"),(l=n.LogLevelEnum||(n.LogLevelEnum={}))[l.DEBUG=0]="DEBUG",l[l.INFO=1]="INFO",l[l.WARN=2]="WARN",l[l.ERROR=3]="ERROR",l[l.OFF=4]="OFF",n.ILogService=(0,_.createDecorator)("LogService"),n.IOptionsService=(0,_.createDecorator)("OptionsService"),n.IUnicodeService=(0,_.createDecorator)("UnicodeService")},1480:(H,n,g)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;var l=g(8460),_=g(225),f=function(){function h(){this._providers=Object.create(null),this._active="",this._onChange=new l.EventEmitter;var b=new _.UnicodeV6;this.register(b),this._active=b.version,this._activeProvider=b}return Object.defineProperty(h.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"activeVersion",{get:function(){return this._active},set:function(b){if(!this._providers[b])throw new Error('unknown Unicode version "'+b+'"');this._active=b,this._activeProvider=this._providers[b],this._onChange.fire(b)},enumerable:!1,configurable:!0}),h.prototype.register=function(b){this._providers[b.version]=b},h.prototype.wcwidth=function(b){return this._activeProvider.wcwidth(b)},h.prototype.getStringCellWidth=function(b){for(var p=0,o=b.length,c=0;c<o;++c){var u=b.charCodeAt(c);if(55296<=u&&u<=56319){if(++c>=o)return p+this.wcwidth(u);var i=b.charCodeAt(c);56320<=i&&i<=57343?u=1024*(u-55296)+i-56320+65536:p+=this.wcwidth(i)}p+=this.wcwidth(u)}return p},h}();n.UnicodeService=f}},B={};return function H(n){var g=B[n];if(g!==void 0)return g.exports;var l=B[n]={exports:{}};return C[n].call(l.exports,l,l.exports,H),l.exports}(4389)})()})})(qr);const ye=Object.create(null);ye.open="0";ye.close="1";ye.ping="2";ye.pong="3";ye.message="4";ye.upgrade="5";ye.noop="6";const jt=Object.create(null);Object.keys(ye).forEach(O=>{jt[ye[O]]=O});const ai={type:"error",data:"parser error"},ci=typeof Blob=="function"||typeof Blob!="undefined"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",li=typeof ArrayBuffer=="function",hi=O=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O&&O.buffer instanceof ArrayBuffer,Ur=({type:O,data:v},C,B)=>ci&&v instanceof Blob?C?B(v):Mr(v,B):li&&(v instanceof ArrayBuffer||hi(v))?C?B(v):Mr(new Blob([v]),B):B(ye[O]+(v||"")),Mr=(O,v)=>{const C=new FileReader;return C.onload=function(){const B=C.result.split(",")[1];v("b"+B)},C.readAsDataURL(O)},Tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",je=typeof Uint8Array=="undefined"?[]:new Uint8Array(256);for(let O=0;O<Tr.length;O++)je[Tr.charCodeAt(O)]=O;const ui=O=>{let v=O.length*.75,C=O.length,B,H=0,n,g,l,_;O[O.length-1]==="="&&(v--,O[O.length-2]==="="&&v--);const f=new ArrayBuffer(v),h=new Uint8Array(f);for(B=0;B<C;B+=4)n=je[O.charCodeAt(B)],g=je[O.charCodeAt(B+1)],l=je[O.charCodeAt(B+2)],_=je[O.charCodeAt(B+3)],h[H++]=n<<2|g>>4,h[H++]=(g&15)<<4|l>>2,h[H++]=(l&3)<<6|_&63;return f},fi=typeof ArrayBuffer=="function",Nr=(O,v)=>{if(typeof O!="string")return{type:"message",data:zr(O,v)};const C=O.charAt(0);return C==="b"?{type:"message",data:di(O.substring(1),v)}:jt[C]?O.length>1?{type:jt[C],data:O.substring(1)}:{type:jt[C]}:ai},di=(O,v)=>{if(fi){const C=ui(O);return zr(C,v)}else return{base64:!0,data:O}},zr=(O,v)=>{switch(v){case"blob":return O instanceof ArrayBuffer?new Blob([O]):O;case"arraybuffer":default:return O}},Kr=String.fromCharCode(30),_i=(O,v)=>{const C=O.length,B=new Array(C);let H=0;O.forEach((n,g)=>{Ur(n,!1,l=>{B[g]=l,++H===C&&v(B.join(Kr))})})},pi=(O,v)=>{const C=O.split(Kr),B=[];for(let H=0;H<C.length;H++){const n=Nr(C[H],v);if(B.push(n),n.type==="error")break}return B},Vr=4;function re(O){if(O)return vi(O)}function vi(O){for(var v in re.prototype)O[v]=re.prototype[v];return O}re.prototype.on=re.prototype.addEventListener=function(O,v){return this._callbacks=this._callbacks||{},(this._callbacks["$"+O]=this._callbacks["$"+O]||[]).push(v),this};re.prototype.once=function(O,v){function C(){this.off(O,C),v.apply(this,arguments)}return C.fn=v,this.on(O,C),this};re.prototype.off=re.prototype.removeListener=re.prototype.removeAllListeners=re.prototype.removeEventListener=function(O,v){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var C=this._callbacks["$"+O];if(!C)return this;if(arguments.length==1)return delete this._callbacks["$"+O],this;for(var B,H=0;H<C.length;H++)if(B=C[H],B===v||B.fn===v){C.splice(H,1);break}return C.length===0&&delete this._callbacks["$"+O],this};re.prototype.emit=function(O){this._callbacks=this._callbacks||{};for(var v=new Array(arguments.length-1),C=this._callbacks["$"+O],B=1;B<arguments.length;B++)v[B-1]=arguments[B];if(C){C=C.slice(0);for(var B=0,H=C.length;B<H;++B)C[B].apply(this,v)}return this};re.prototype.emitReserved=re.prototype.emit;re.prototype.listeners=function(O){return this._callbacks=this._callbacks||{},this._callbacks["$"+O]||[]};re.prototype.hasListeners=function(O){return!!this.listeners(O).length};const Ce=(()=>typeof self!="undefined"?self:typeof window!="undefined"?window:Function("return this")())();function Gr(O,...v){return v.reduce((C,B)=>(O.hasOwnProperty(B)&&(C[B]=O[B]),C),{})}const gi=setTimeout,yi=clearTimeout;function Ut(O,v){v.useNativeTimers?(O.setTimeoutFn=gi.bind(Ce),O.clearTimeoutFn=yi.bind(Ce)):(O.setTimeoutFn=setTimeout.bind(Ce),O.clearTimeoutFn=clearTimeout.bind(Ce))}const mi=1.33;function bi(O){return typeof O=="string"?Si(O):Math.ceil((O.byteLength||O.size)*mi)}function Si(O){let v=0,C=0;for(let B=0,H=O.length;B<H;B++)v=O.charCodeAt(B),v<128?C+=1:v<2048?C+=2:v<55296||v>=57344?C+=3:(B++,C+=4);return C}class Ci extends Error{constructor(v,C,B){super(v),this.description=C,this.context=B,this.type="TransportError"}}class Yr extends re{constructor(v){super(),this.writable=!1,Ut(this,v),this.opts=v,this.query=v.query,this.readyState="",this.socket=v.socket}onError(v,C,B){return super.emitReserved("error",new Ci(v,C,B)),this}open(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(v){this.readyState==="open"&&this.write(v)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(v){const C=Nr(v,this.socket.binaryType);this.onPacket(C)}onPacket(v){super.emitReserved("packet",v)}onClose(v){this.readyState="closed",super.emitReserved("close",v)}}const Xr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Sr=64,wi={};let Br=0,Ht=0,Dr;function Pr(O){let v="";do v=Xr[O%Sr]+v,O=Math.floor(O/Sr);while(O>0);return v}function Jr(){const O=Pr(+new Date);return O!==Dr?(Br=0,Dr=O):O+"."+Pr(Br++)}for(;Ht<Sr;Ht++)wi[Xr[Ht]]=Ht;function Zr(O){let v="";for(let C in O)O.hasOwnProperty(C)&&(v.length&&(v+="&"),v+=encodeURIComponent(C)+"="+encodeURIComponent(O[C]));return v}function Li(O){let v={},C=O.split("&");for(let B=0,H=C.length;B<H;B++){let n=C[B].split("=");v[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return v}let $r=!1;try{$r=typeof XMLHttpRequest!="undefined"&&"withCredentials"in new XMLHttpRequest}catch{}const Ei=$r;function Qr(O){const v=O.xdomain;try{if(typeof XMLHttpRequest!="undefined"&&(!v||Ei))return new XMLHttpRequest}catch{}if(!v)try{return new Ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function ki(){}const xi=function(){return new Qr({xdomain:!1}).responseType!=null}();class Ai extends Yr{constructor(v){if(super(v),this.polling=!1,typeof location!="undefined"){const B=location.protocol==="https:";let H=location.port;H||(H=B?"443":"80"),this.xd=typeof location!="undefined"&&v.hostname!==location.hostname||H!==v.port,this.xs=v.secure!==B}const C=v&&v.forceBase64;this.supportsBinary=xi&&!C}get name(){return"polling"}doOpen(){this.poll()}pause(v){this.readyState="pausing";const C=()=>{this.readyState="paused",v()};if(this.polling||!this.writable){let B=0;this.polling&&(B++,this.once("pollComplete",function(){--B||C()})),this.writable||(B++,this.once("drain",function(){--B||C()}))}else C()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(v){const C=B=>{if(this.readyState==="opening"&&B.type==="open"&&this.onOpen(),B.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(B)};pi(v,this.socket.binaryType).forEach(C),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const v=()=>{this.write([{type:"close"}])};this.readyState==="open"?v():this.once("open",v)}write(v){this.writable=!1,_i(v,C=>{this.doWrite(C,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let v=this.query||{};const C=this.opts.secure?"https":"http";let B="";this.opts.timestampRequests!==!1&&(v[this.opts.timestampParam]=Jr()),!this.supportsBinary&&!v.sid&&(v.b64=1),this.opts.port&&(C==="https"&&Number(this.opts.port)!==443||C==="http"&&Number(this.opts.port)!==80)&&(B=":"+this.opts.port);const H=Zr(v),n=this.opts.hostname.indexOf(":")!==-1;return C+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+B+this.opts.path+(H.length?"?"+H:"")}request(v={}){return Object.assign(v,{xd:this.xd,xs:this.xs},this.opts),new ge(this.uri(),v)}doWrite(v,C){const B=this.request({method:"POST",data:v});B.on("success",C),B.on("error",(H,n)=>{this.onError("xhr post error",H,n)})}doPoll(){const v=this.request();v.on("data",this.onData.bind(this)),v.on("error",(C,B)=>{this.onError("xhr poll error",C,B)}),this.pollXhr=v}}class ge extends re{constructor(v,C){super(),Ut(this,C),this.opts=C,this.method=C.method||"GET",this.uri=v,this.async=C.async!==!1,this.data=C.data!==void 0?C.data:null,this.create()}create(){const v=Gr(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");v.xdomain=!!this.opts.xd,v.xscheme=!!this.opts.xs;const C=this.xhr=new Qr(v);try{C.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){C.setDisableHeaderCheck&&C.setDisableHeaderCheck(!0);for(let B in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(B)&&C.setRequestHeader(B,this.opts.extraHeaders[B])}}catch{}if(this.method==="POST")try{C.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{C.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in C&&(C.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(C.timeout=this.opts.requestTimeout),C.onreadystatechange=()=>{C.readyState===4&&(C.status===200||C.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof C.status=="number"?C.status:0)},0))},C.send(this.data)}catch(B){this.setTimeoutFn(()=>{this.onError(B)},0);return}typeof document!="undefined"&&(this.index=ge.requestsCount++,ge.requests[this.index]=this)}onError(v){this.emitReserved("error",v,this.xhr),this.cleanup(!0)}cleanup(v){if(!(typeof this.xhr=="undefined"||this.xhr===null)){if(this.xhr.onreadystatechange=ki,v)try{this.xhr.abort()}catch{}typeof document!="undefined"&&delete ge.requests[this.index],this.xhr=null}}onLoad(){const v=this.xhr.responseText;v!==null&&(this.emitReserved("data",v),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}ge.requestsCount=0;ge.requests={};if(typeof document!="undefined"){if(typeof attachEvent=="function")attachEvent("onunload",Ir);else if(typeof addEventListener=="function"){const O="onpagehide"in Ce?"pagehide":"unload";addEventListener(O,Ir,!1)}}function Ir(){for(let O in ge.requests)ge.requests.hasOwnProperty(O)&&ge.requests[O].abort()}const Ri=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?v=>Promise.resolve().then(v):(v,C)=>C(v,0))(),Ft=Ce.WebSocket||Ce.MozWebSocket,Hr=!0,Oi="arraybuffer",Fr=typeof navigator!="undefined"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Mi extends Yr{constructor(v){super(v),this.supportsBinary=!v.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const v=this.uri(),C=this.opts.protocols,B=Fr?{}:Gr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(B.headers=this.opts.extraHeaders);try{this.ws=Hr&&!Fr?C?new Ft(v,C):new Ft(v):new Ft(v,C,B)}catch(H){return this.emitReserved("error",H)}this.ws.binaryType=this.socket.binaryType||Oi,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=v=>this.onClose({description:"websocket connection closed",context:v}),this.ws.onmessage=v=>this.onData(v.data),this.ws.onerror=v=>this.onError("websocket error",v)}write(v){this.writable=!1;for(let C=0;C<v.length;C++){const B=v[C],H=C===v.length-1;Ur(B,this.supportsBinary,n=>{const g={};try{Hr&&this.ws.send(n)}catch{}H&&Ri(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws!="undefined"&&(this.ws.close(),this.ws=null)}uri(){let v=this.query||{};const C=this.opts.secure?"wss":"ws";let B="";this.opts.port&&(C==="wss"&&Number(this.opts.port)!==443||C==="ws"&&Number(this.opts.port)!==80)&&(B=":"+this.opts.port),this.opts.timestampRequests&&(v[this.opts.timestampParam]=Jr()),this.supportsBinary||(v.b64=1);const H=Zr(v),n=this.opts.hostname.indexOf(":")!==-1;return C+"://"+(n?"["+this.opts.hostname+"]":this.opts.hostname)+B+this.opts.path+(H.length?"?"+H:"")}check(){return!!Ft}}const Ti={websocket:Mi,polling:Ai},Bi=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Di=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Cr(O){const v=O,C=O.indexOf("["),B=O.indexOf("]");C!=-1&&B!=-1&&(O=O.substring(0,C)+O.substring(C,B).replace(/:/g,";")+O.substring(B,O.length));let H=Bi.exec(O||""),n={},g=14;for(;g--;)n[Di[g]]=H[g]||"";return C!=-1&&B!=-1&&(n.source=v,n.host=n.host.substring(1,n.host.length-1).replace(/;/g,":"),n.authority=n.authority.replace("[","").replace("]","").replace(/;/g,":"),n.ipv6uri=!0),n.pathNames=Pi(n,n.path),n.queryKey=Ii(n,n.query),n}function Pi(O,v){const C=/\/{2,9}/g,B=v.replace(C,"/").split("/");return(v.substr(0,1)=="/"||v.length===0)&&B.splice(0,1),v.substr(v.length-1,1)=="/"&&B.splice(B.length-1,1),B}function Ii(O,v){const C={};return v.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(B,H,n){H&&(C[H]=n)}),C}class be extends re{constructor(v,C={}){super(),v&&typeof v=="object"&&(C=v,v=null),v?(v=Cr(v),C.hostname=v.host,C.secure=v.protocol==="https"||v.protocol==="wss",C.port=v.port,v.query&&(C.query=v.query)):C.host&&(C.hostname=Cr(C.host).host),Ut(this,C),this.secure=C.secure!=null?C.secure:typeof location!="undefined"&&location.protocol==="https:",C.hostname&&!C.port&&(C.port=this.secure?"443":"80"),this.hostname=C.hostname||(typeof location!="undefined"?location.hostname:"localhost"),this.port=C.port||(typeof location!="undefined"&&location.port?location.port:this.secure?"443":"80"),this.transports=C.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},C),this.opts.path=this.opts.path.replace(/\/$/,"")+"/",typeof this.opts.query=="string"&&(this.opts.query=Li(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(v){const C=Object.assign({},this.opts.query);C.EIO=Vr,C.transport=v,this.id&&(C.sid=this.id);const B=Object.assign({},this.opts.transportOptions[v],this.opts,{query:C,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Ti[v](B)}open(){let v;if(this.opts.rememberUpgrade&&be.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)v="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else v=this.transports[0];this.readyState="opening";try{v=this.createTransport(v)}catch{this.transports.shift(),this.open();return}v.open(),this.setTransport(v)}setTransport(v){this.transport&&this.transport.removeAllListeners(),this.transport=v,v.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",C=>this.onClose("transport close",C))}probe(v){let C=this.createTransport(v),B=!1;be.priorWebsocketSuccess=!1;const H=()=>{B||(C.send([{type:"ping",data:"probe"}]),C.once("packet",b=>{if(!B)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",C),!C)return;be.priorWebsocketSuccess=C.name==="websocket",this.transport.pause(()=>{B||this.readyState!=="closed"&&(h(),this.setTransport(C),C.send([{type:"upgrade"}]),this.emitReserved("upgrade",C),C=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=C.name,this.emitReserved("upgradeError",p)}}))};function n(){B||(B=!0,h(),C.close(),C=null)}const g=b=>{const p=new Error("probe error: "+b);p.transport=C.name,n(),this.emitReserved("upgradeError",p)};function l(){g("transport closed")}function _(){g("socket closed")}function f(b){C&&b.name!==C.name&&n()}const h=()=>{C.removeListener("open",H),C.removeListener("error",g),C.removeListener("close",l),this.off("close",_),this.off("upgrading",f)};C.once("open",H),C.once("error",g),C.once("close",l),this.once("close",_),this.once("upgrading",f),C.open()}onOpen(){if(this.readyState="open",be.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause){let v=0;const C=this.upgrades.length;for(;v<C;v++)this.probe(this.upgrades[v])}}onPacket(v){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",v),this.emitReserved("heartbeat"),v.type){case"open":this.onHandshake(JSON.parse(v.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const C=new Error("server error");C.code=v.data,this.onError(C);break;case"message":this.emitReserved("data",v.data),this.emitReserved("message",v.data);break}}onHandshake(v){this.emitReserved("handshake",v),this.id=v.sid,this.transport.query.sid=v.sid,this.upgrades=this.filterUpgrades(v.upgrades),this.pingInterval=v.pingInterval,this.pingTimeout=v.pingTimeout,this.maxPayload=v.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const v=this.getWritablePackets();this.transport.send(v),this.prevBufferLen=v.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let C=1;for(let B=0;B<this.writeBuffer.length;B++){const H=this.writeBuffer[B].data;if(H&&(C+=bi(H)),B>0&&C>this.maxPayload)return this.writeBuffer.slice(0,B);C+=2}return this.writeBuffer}write(v,C,B){return this.sendPacket("message",v,C,B),this}send(v,C,B){return this.sendPacket("message",v,C,B),this}sendPacket(v,C,B,H){if(typeof C=="function"&&(H=C,C=void 0),typeof B=="function"&&(H=B,B=null),this.readyState==="closing"||this.readyState==="closed")return;B=B||{},B.compress=B.compress!==!1;const n={type:v,data:C,options:B};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),H&&this.once("flush",H),this.flush()}close(){const v=()=>{this.onClose("forced close"),this.transport.close()},C=()=>{this.off("upgrade",C),this.off("upgradeError",C),v()},B=()=>{this.once("upgrade",C),this.once("upgradeError",C)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?B():v()}):this.upgrading?B():v()),this}onError(v){be.priorWebsocketSuccess=!1,this.emitReserved("error",v),this.onClose("transport error",v)}onClose(v,C){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",v,C),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(v){const C=[];let B=0;const H=v.length;for(;B<H;B++)~this.transports.indexOf(v[B])&&C.push(v[B]);return C}}be.protocol=Vr;be.protocol;function Hi(O,v="",C){let B=O;C=C||typeof location!="undefined"&&location,O==null&&(O=C.protocol+"//"+C.host),typeof O=="string"&&(O.charAt(0)==="/"&&(O.charAt(1)==="/"?O=C.protocol+O:O=C.host+O),/^(https?|wss?):\/\//.test(O)||(typeof C!="undefined"?O=C.protocol+"//"+O:O="https://"+O),B=Cr(O)),B.port||(/^(http|ws)$/.test(B.protocol)?B.port="80":/^(http|ws)s$/.test(B.protocol)&&(B.port="443")),B.path=B.path||"/";const n=B.host.indexOf(":")!==-1?"["+B.host+"]":B.host;return B.id=B.protocol+"://"+n+":"+B.port+v,B.href=B.protocol+"://"+n+(C&&C.port===B.port?"":":"+B.port),B}const Fi=typeof ArrayBuffer=="function",ji=O=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):O.buffer instanceof ArrayBuffer,ei=Object.prototype.toString,Wi=typeof Blob=="function"||typeof Blob!="undefined"&&ei.call(Blob)==="[object BlobConstructor]",qi=typeof File=="function"||typeof File!="undefined"&&ei.call(File)==="[object FileConstructor]";function kr(O){return Fi&&(O instanceof ArrayBuffer||ji(O))||Wi&&O instanceof Blob||qi&&O instanceof File}function Wt(O,v){if(!O||typeof O!="object")return!1;if(Array.isArray(O)){for(let C=0,B=O.length;C<B;C++)if(Wt(O[C]))return!0;return!1}if(kr(O))return!0;if(O.toJSON&&typeof O.toJSON=="function"&&arguments.length===1)return Wt(O.toJSON(),!0);for(const C in O)if(Object.prototype.hasOwnProperty.call(O,C)&&Wt(O[C]))return!0;return!1}function Ui(O){const v=[],C=O.data,B=O;return B.data=wr(C,v),B.attachments=v.length,{packet:B,buffers:v}}function wr(O,v){if(!O)return O;if(kr(O)){const C={_placeholder:!0,num:v.length};return v.push(O),C}else if(Array.isArray(O)){const C=new Array(O.length);for(let B=0;B<O.length;B++)C[B]=wr(O[B],v);return C}else if(typeof O=="object"&&!(O instanceof Date)){const C={};for(const B in O)Object.prototype.hasOwnProperty.call(O,B)&&(C[B]=wr(O[B],v));return C}return O}function Ni(O,v){return O.data=Lr(O.data,v),O.attachments=void 0,O}function Lr(O,v){if(!O)return O;if(O&&O._placeholder)return v[O.num];if(Array.isArray(O))for(let C=0;C<O.length;C++)O[C]=Lr(O[C],v);else if(typeof O=="object")for(const C in O)Object.prototype.hasOwnProperty.call(O,C)&&(O[C]=Lr(O[C],v));return O}const zi=5;var Z;(function(O){O[O.CONNECT=0]="CONNECT",O[O.DISCONNECT=1]="DISCONNECT",O[O.EVENT=2]="EVENT",O[O.ACK=3]="ACK",O[O.CONNECT_ERROR=4]="CONNECT_ERROR",O[O.BINARY_EVENT=5]="BINARY_EVENT",O[O.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));class Ki{constructor(v){this.replacer=v}encode(v){return(v.type===Z.EVENT||v.type===Z.ACK)&&Wt(v)?(v.type=v.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,this.encodeAsBinary(v)):[this.encodeAsString(v)]}encodeAsString(v){let C=""+v.type;return(v.type===Z.BINARY_EVENT||v.type===Z.BINARY_ACK)&&(C+=v.attachments+"-"),v.nsp&&v.nsp!=="/"&&(C+=v.nsp+","),v.id!=null&&(C+=v.id),v.data!=null&&(C+=JSON.stringify(v.data,this.replacer)),C}encodeAsBinary(v){const C=Ui(v),B=this.encodeAsString(C.packet),H=C.buffers;return H.unshift(B),H}}class xr extends re{constructor(v){super(),this.reviver=v}add(v){let C;if(typeof v=="string")C=this.decodeString(v),C.type===Z.BINARY_EVENT||C.type===Z.BINARY_ACK?(this.reconstructor=new Vi(C),C.attachments===0&&super.emitReserved("decoded",C)):super.emitReserved("decoded",C);else if(kr(v)||v.base64)if(this.reconstructor)C=this.reconstructor.takeBinaryData(v),C&&(this.reconstructor=null,super.emitReserved("decoded",C));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+v)}decodeString(v){let C=0;const B={type:Number(v.charAt(0))};if(Z[B.type]===void 0)throw new Error("unknown packet type "+B.type);if(B.type===Z.BINARY_EVENT||B.type===Z.BINARY_ACK){const n=C+1;for(;v.charAt(++C)!=="-"&&C!=v.length;);const g=v.substring(n,C);if(g!=Number(g)||v.charAt(C)!=="-")throw new Error("Illegal attachments");B.attachments=Number(g)}if(v.charAt(C+1)==="/"){const n=C+1;for(;++C&&!(v.charAt(C)===","||C===v.length););B.nsp=v.substring(n,C)}else B.nsp="/";const H=v.charAt(C+1);if(H!==""&&Number(H)==H){const n=C+1;for(;++C;){const g=v.charAt(C);if(g==null||Number(g)!=g){--C;break}if(C===v.length)break}B.id=Number(v.substring(n,C+1))}if(v.charAt(++C)){const n=this.tryParse(v.substr(C));if(xr.isPayloadValid(B.type,n))B.data=n;else throw new Error("invalid payload")}return B}tryParse(v){try{return JSON.parse(v,this.reviver)}catch{return!1}}static isPayloadValid(v,C){switch(v){case Z.CONNECT:return typeof C=="object";case Z.DISCONNECT:return C===void 0;case Z.CONNECT_ERROR:return typeof C=="string"||typeof C=="object";case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(C)&&C.length>0;case Z.ACK:case Z.BINARY_ACK:return Array.isArray(C)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Vi{constructor(v){this.packet=v,this.buffers=[],this.reconPack=v}takeBinaryData(v){if(this.buffers.push(v),this.buffers.length===this.reconPack.attachments){const C=Ni(this.reconPack,this.buffers);return this.finishedReconstruction(),C}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}var Gi=Object.freeze(Object.defineProperty({__proto__:null,protocol:zi,get PacketType(){return Z},Encoder:Ki,Decoder:xr},Symbol.toStringTag,{value:"Module"}));function ue(O,v,C){return O.on(v,C),function(){O.off(v,C)}}const Yi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ti extends re{constructor(v,C,B){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=v,this.nsp=C,B&&B.auth&&(this.auth=B.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const v=this.io;this.subs=[ue(v,"open",this.onopen.bind(this)),ue(v,"packet",this.onpacket.bind(this)),ue(v,"error",this.onerror.bind(this)),ue(v,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...v){return v.unshift("message"),this.emit.apply(this,v),this}emit(v,...C){if(Yi.hasOwnProperty(v))throw new Error('"'+v+'" is a reserved event name');C.unshift(v);const B={type:Z.EVENT,data:C};if(B.options={},B.options.compress=this.flags.compress!==!1,typeof C[C.length-1]=="function"){const g=this.ids++,l=C.pop();this._registerAckCallback(g,l),B.id=g}const H=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!H||!this.connected)||(this.connected?(this.notifyOutgoingListeners(B),this.packet(B)):this.sendBuffer.push(B)),this.flags={},this}_registerAckCallback(v,C){const B=this.flags.timeout;if(B===void 0){this.acks[v]=C;return}const H=this.io.setTimeoutFn(()=>{delete this.acks[v];for(let n=0;n<this.sendBuffer.length;n++)this.sendBuffer[n].id===v&&this.sendBuffer.splice(n,1);C.call(this,new Error("operation has timed out"))},B);this.acks[v]=(...n)=>{this.io.clearTimeoutFn(H),C.apply(this,[null,...n])}}packet(v){v.nsp=this.nsp,this.io._packet(v)}onopen(){typeof this.auth=="function"?this.auth(v=>{this.packet({type:Z.CONNECT,data:v})}):this.packet({type:Z.CONNECT,data:this.auth})}onerror(v){this.connected||this.emitReserved("connect_error",v)}onclose(v,C){this.connected=!1,delete this.id,this.emitReserved("disconnect",v,C)}onpacket(v){if(v.nsp===this.nsp)switch(v.type){case Z.CONNECT:if(v.data&&v.data.sid){const H=v.data.sid;this.onconnect(H)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(v);break;case Z.ACK:case Z.BINARY_ACK:this.onack(v);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const B=new Error(v.data.message);B.data=v.data.data,this.emitReserved("connect_error",B);break}}onevent(v){const C=v.data||[];v.id!=null&&C.push(this.ack(v.id)),this.connected?this.emitEvent(C):this.receiveBuffer.push(Object.freeze(C))}emitEvent(v){if(this._anyListeners&&this._anyListeners.length){const C=this._anyListeners.slice();for(const B of C)B.apply(this,v)}super.emit.apply(this,v)}ack(v){const C=this;let B=!1;return function(...H){B||(B=!0,C.packet({type:Z.ACK,id:v,data:H}))}}onack(v){const C=this.acks[v.id];typeof C=="function"&&(C.apply(this,v.data),delete this.acks[v.id])}onconnect(v){this.id=v,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(v=>this.emitEvent(v)),this.receiveBuffer=[],this.sendBuffer.forEach(v=>{this.notifyOutgoingListeners(v),this.packet(v)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(v=>v()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(v){return this.flags.compress=v,this}get volatile(){return this.flags.volatile=!0,this}timeout(v){return this.flags.timeout=v,this}onAny(v){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(v),this}prependAny(v){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(v),this}offAny(v){if(!this._anyListeners)return this;if(v){const C=this._anyListeners;for(let B=0;B<C.length;B++)if(v===C[B])return C.splice(B,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(v){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(v),this}prependAnyOutgoing(v){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(v),this}offAnyOutgoing(v){if(!this._anyOutgoingListeners)return this;if(v){const C=this._anyOutgoingListeners;for(let B=0;B<C.length;B++)if(v===C[B])return C.splice(B,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(v){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const C=this._anyOutgoingListeners.slice();for(const B of C)B.apply(this,v.data)}}}function Te(O){O=O||{},this.ms=O.min||100,this.max=O.max||1e4,this.factor=O.factor||2,this.jitter=O.jitter>0&&O.jitter<=1?O.jitter:0,this.attempts=0}Te.prototype.duration=function(){var O=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var v=Math.random(),C=Math.floor(v*this.jitter*O);O=(Math.floor(v*10)&1)==0?O-C:O+C}return Math.min(O,this.max)|0};Te.prototype.reset=function(){this.attempts=0};Te.prototype.setMin=function(O){this.ms=O};Te.prototype.setMax=function(O){this.max=O};Te.prototype.setJitter=function(O){this.jitter=O};class Er extends re{constructor(v,C){var B;super(),this.nsps={},this.subs=[],v&&typeof v=="object"&&(C=v,v=void 0),C=C||{},C.path=C.path||"/socket.io",this.opts=C,Ut(this,C),this.reconnection(C.reconnection!==!1),this.reconnectionAttempts(C.reconnectionAttempts||1/0),this.reconnectionDelay(C.reconnectionDelay||1e3),this.reconnectionDelayMax(C.reconnectionDelayMax||5e3),this.randomizationFactor((B=C.randomizationFactor)!==null&&B!==void 0?B:.5),this.backoff=new Te({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(C.timeout==null?2e4:C.timeout),this._readyState="closed",this.uri=v;const H=C.parser||Gi;this.encoder=new H.Encoder,this.decoder=new H.Decoder,this._autoConnect=C.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(v){return arguments.length?(this._reconnection=!!v,this):this._reconnection}reconnectionAttempts(v){return v===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=v,this)}reconnectionDelay(v){var C;return v===void 0?this._reconnectionDelay:(this._reconnectionDelay=v,(C=this.backoff)===null||C===void 0||C.setMin(v),this)}randomizationFactor(v){var C;return v===void 0?this._randomizationFactor:(this._randomizationFactor=v,(C=this.backoff)===null||C===void 0||C.setJitter(v),this)}reconnectionDelayMax(v){var C;return v===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=v,(C=this.backoff)===null||C===void 0||C.setMax(v),this)}timeout(v){return arguments.length?(this._timeout=v,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(v){if(~this._readyState.indexOf("open"))return this;this.engine=new be(this.uri,this.opts);const C=this.engine,B=this;this._readyState="opening",this.skipReconnect=!1;const H=ue(C,"open",function(){B.onopen(),v&&v()}),n=ue(C,"error",g=>{B.cleanup(),B._readyState="closed",this.emitReserved("error",g),v?v(g):B.maybeReconnectOnOpen()});if(this._timeout!==!1){const g=this._timeout;g===0&&H();const l=this.setTimeoutFn(()=>{H(),C.close(),C.emit("error",new Error("timeout"))},g);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(H),this.subs.push(n),this}connect(v){return this.open(v)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const v=this.engine;this.subs.push(ue(v,"ping",this.onping.bind(this)),ue(v,"data",this.ondata.bind(this)),ue(v,"error",this.onerror.bind(this)),ue(v,"close",this.onclose.bind(this)),ue(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(v){this.decoder.add(v)}ondecoded(v){this.emitReserved("packet",v)}onerror(v){this.emitReserved("error",v)}socket(v,C){let B=this.nsps[v];return B||(B=new ti(this,v,C),this.nsps[v]=B),B}_destroy(v){const C=Object.keys(this.nsps);for(const B of C)if(this.nsps[B].active)return;this._close()}_packet(v){const C=this.encoder.encode(v);for(let B=0;B<C.length;B++)this.engine.write(C[B],v.options)}cleanup(){this.subs.forEach(v=>v()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(v,C){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",v,C),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const v=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const C=this.backoff.duration();this._reconnecting=!0;const B=this.setTimeoutFn(()=>{v.skipReconnect||(this.emitReserved("reconnect_attempt",v.backoff.attempts),!v.skipReconnect&&v.open(H=>{H?(v._reconnecting=!1,v.reconnect(),this.emitReserved("reconnect_error",H)):v.onreconnect()}))},C);this.opts.autoUnref&&B.unref(),this.subs.push(function(){clearTimeout(B)})}}onreconnect(){const v=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",v)}}const Fe={};function qt(O,v){typeof O=="object"&&(v=O,O=void 0),v=v||{};const C=Hi(O,v.path||"/socket.io"),B=C.source,H=C.id,n=C.path,g=Fe[H]&&n in Fe[H].nsps,l=v.forceNew||v["force new connection"]||v.multiplex===!1||g;let _;return l?_=new Er(B,v):(Fe[H]||(Fe[H]=new Er(B,v)),_=Fe[H]),C.query&&!v.query&&(v.query=C.queryKey),_.socket(C.path,v)}Object.assign(qt,{Manager:Er,Socket:ti,io:qt,connect:qt});const Nt=qt("http://localhost:8001"),jr=document.querySelector("#app"),Xi={fontFamily:"JetBrains Mono",cols:100,rows:30},Ji=document.getElementById("submit-connection");let Wr=!1;const zt=new qr.exports.Terminal(Xi);Ji.addEventListener("submit",O=>{O.preventDefault(),Wr||zt.open(jr),jr.style.display="block",Wr=!0;const v=O.currentTarget.host,C=O.currentTarget.port;Nt.emit("terminal.details",{details:{host:v.value,port:C.value}})});zt.onData(O=>Nt.emit("terminal.data",O));Nt.on("terminal.inData",O=>{zt.write(O)});Nt.on("terminal.conErr",()=>{zt.write("ERROR"),console.log("could not connect")});
